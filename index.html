<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šåŠŸèƒ½å­¸ç¿’å¹³å°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
        }
        .app-bg {
            background: linear-gradient(135deg, #4f46e5, #a855f7, #ec4899);
            min-height: 100vh;
            overflow-x: hidden; /* Allow vertical scroll, prevent horizontal */
            position: relative;
        }
        .app-bg::before {
            content: '';
            position: absolute;
            top: -10%; right: -10%;
            width: 300px; height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            animation: pulse-light 8s infinite;
        }
        .app-bg::after {
            content: '';
            position: absolute;
            bottom: -15%; left: -10%;
            width: 400px; height: 400px;
            background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 65%);
            animation: pulse-light 10s infinite reverse;
        }
        @keyframes pulse-light {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
        }
        .view-content { transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; }
        .view-content.hidden { opacity: 0; transform: translateY(10px); display: none; }
        .nav-btn.active { background-color: #fff; color: #4f46e5; box-shadow: 0 4px 14px 0 rgb(0 0 0 / 10%); }
        .radio-btn-group input[type="radio"] { display: none; }
        .radio-btn-group label {
            cursor: pointer; background-color: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); transition: all 0.2s;
        }
        .radio-btn-group input[type="radio"]:checked + label {
            background-color: #fbbf24; color: #854d0e; font-weight: bold; border-color: #fbbf24;
        }
        .loader {
            width: 20px; height: 20px; border: 2px solid #FFF; border-bottom-color: transparent; border-radius: 50%; display: inline-block; box-sizing: border-box; animation: rotation 1s linear infinite;
        }
        .audio-loader {
             width: 16px; height: 16px; border: 2px solid #fff; border-bottom-color: transparent; border-radius: 50%; display: inline-block; box-sizing: border-box; animation: rotation 1s linear infinite;
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .app-file-drop-zone { border: 2px dashed rgba(255,255,255,0.4); transition: all 0.2s ease-in-out; overflow: visible; }
        .app-file-drop-zone.dragover { background-color: rgba(255,255,255,0.1); border-color: #fbbf24; }
        .language-select { position: relative; z-index: 50; }
        .expert-card { cursor: pointer; border: 2px solid transparent; transition: all 0.2s; }
        .expert-card.selected { border-color: #fbbf24; background-color: rgba(255,255,255,0.3); }
        .chat-bubble { max-width: 85%; }
        .chat-bubble.user { background-color: #4f46e5; color: white; border-radius: 1.2rem 1.2rem 0.2rem 1.2rem; }
        .chat-bubble.bot { background-color: #e2e8f0; color: #1e293b; border-radius: 1.2rem 1.2rem 1.2rem 0.2rem; }
        .chat-bubble.bot.summary { background-color: #dbeafe; border: 1px solid #93c5fd; }
        [contenteditable]:empty:before{
            content: attr(data-placeholder-key);
            color: #9ca3af;
            font-style: italic;
        }
        #story-display-container span {
            cursor: pointer;
            transition: background-color 0.2s;
        }
         #story-display-container span.highlight {
            background-color: rgba(251, 191, 36, 0.5);
        }
        .play-audio-btn {
            background-color: #ec4899; color: white; border-radius: 50%; width: 32px; height: 32px;
            display: flex; align-items: center; justify-content: center; transition: background-color 0.2s;
        }
        .play-audio-btn:hover { background-color: #db2777; }
        .play-audio-btn.loading .fa-play { display: none; }
        .play-audio-btn:not(.loading) .audio-loader { display: none; }
        .lesson-lang-btn {
            background-color: rgba(255, 255, 255, 0.2); color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.2s;
        }
        .lesson-lang-btn.active {
            background-color: #fbbf24; color: #854d0e; font-weight: bold; border-color: #fbbf24;
        }
        .prose strong { color: inherit; }
        .badge-chip {
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            border-radius: 9999px;
            padding: 0.1rem 0.75rem;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            background: rgba(255,255,255,0.08);
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }
        .badge-chip.timer { border-color: rgba(248,250,252,0.5); }
        .badge-chip.record { border-color: rgba(248,113,113,0.5); background: rgba(248,113,113,0.15); }
        .waveform-bar {
            height: 28px;
            display: flex;
            align-items: flex-end;
            gap: 4px;
        }
        .waveform-bar span {
            width: 4px;
            background: linear-gradient(180deg, #f472b6, #fb7185);
            border-radius: 999px;
            animation: waveform-bounce 0.9s ease-in-out infinite;
        }
        .waveform-bar span:nth-child(2) { animation-delay: 0.1s; }
        .waveform-bar span:nth-child(3) { animation-delay: 0.2s; }
        .waveform-bar span:nth-child(4) { animation-delay: 0.3s; }
        @keyframes waveform-bounce {
            0%, 100% { height: 6px; opacity: 0.7; }
            50% { height: 24px; opacity: 1; }
        }
        .progress-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .progress-step {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            border: 1px dashed rgba(255,255,255,0.3);
            color: rgba(255,255,255,0.7);
        }
        .progress-step.active {
            border-style: solid;
            background: rgba(16,185,129,0.15);
            color: #6ee7b7;
        }
        .result-panel-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
        }
        .result-panel {
            border-radius: 0.75rem;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(15,23,42,0.4);
            padding: 1rem;
        }
        .result-panel h5 {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .timer-flash {
            animation: timerBlink 1s linear infinite;
        }
        @keyframes timerBlink {
            0%, 100% { color: #fbbf24; }
            50% { color: #fef08a; }
        }
        .audio-button-row {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
        }
        .download-audio-btn {
            background-color: rgba(255, 255, 255, 0.18);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 9999px;
            border: 1px solid rgba(255,255,255,0.25);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: 0.4rem;
            transition: background-color 0.2s ease;
        }
        .download-audio-btn:hover {
            background-color: rgba(255,255,255,0.35);
        }
        .download-audio-btn.hidden {
            display: none;
        }

    </style>
</head>
<body class="app-bg">
    <!-- Login Modal -->
    <!-- Login Modal - Redesigned for Kids -->
    <div id="login-modal" class="fixed inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 z-50 flex items-center justify-center p-4 overflow-y-auto">
        <!-- Animated Background Elements - More playful for kids -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse"></div>
            <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-pink-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
            <div class="absolute top-1/2 left-1/2 w-72 h-72 bg-indigo-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
            <!-- Floating decorative elements for kids -->
            <div class="absolute top-20 left-10 text-4xl animate-bounce" style="animation-duration: 3s; animation-delay: 0.5s;">ğŸŒŸ</div>
            <div class="absolute top-40 right-20 text-3xl animate-bounce" style="animation-duration: 2.5s; animation-delay: 1s;">âœ¨</div>
            <div class="absolute bottom-32 left-20 text-3xl animate-bounce" style="animation-duration: 3.5s; animation-delay: 1.5s;">ğŸˆ</div>
            <div class="absolute bottom-20 right-10 text-4xl animate-bounce" style="animation-duration: 2s; animation-delay: 0.8s;">ğŸš€</div>
        </div>
        
        <!-- Language Switcher - Top Right -->
        <div class="absolute top-4 right-4 md:top-6 md:right-8 z-20">
            <select id="login-language-switcher" class="language-select bg-white/20 backdrop-blur-sm text-white rounded-lg px-4 py-2 border-2 border-white/30 focus:outline-none focus:ring-2 focus:ring-yellow-400 text-sm font-medium cursor-pointer hover:bg-white/30 transition-all">
                <option value="zh-Hant">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</option>
                <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                <option value="vi">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
                <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
            </select>
        </div>
        
        <div class="relative bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl max-w-md w-full p-6 md:p-8 lg:p-10 my-4 md:my-8 border-2 border-white/20 max-h-[95vh] overflow-y-auto">
            <!-- Main Title -->
            <div class="text-center mb-2">
                <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-1">
                    <span class="bg-gradient-to-r from-cyan-300 via-blue-300 to-indigo-300 bg-clip-text text-transparent">å¤šèªè¨€</span>
                    <span class="bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-300 bg-clip-text text-transparent">å­¸ç¿’å¹³å°</span>
                </h1>
            </div>
            
            <!-- Logo/Brand Section -->
            <div class="text-center mb-6 md:mb-8">
                <div class="inline-flex items-center justify-center w-20 h-20 md:w-24 md:h-24 bg-gradient-to-br from-indigo-400 via-purple-400 to-pink-400 rounded-3xl mb-3 md:mb-4 shadow-lg transform hover:scale-110 transition-transform animate-bounce" style="animation-duration: 2s;">
                    <i class="fas fa-rocket text-4xl md:text-5xl text-white"></i>
                </div>
                <h2 class="text-2xl md:text-3xl font-bold text-white mb-2 bg-gradient-to-r from-white via-yellow-200 to-pink-200 bg-clip-text text-transparent">
                    LingoVerse AI
                </h2>
                <p class="text-indigo-200 text-base md:text-lg font-medium" data-translate-key="main_subtitle">æ‚¨çš„ AI å­¸ç¿’å®‡å®™ ğŸŒŸ</p>
                <p class="text-white/90 text-xs md:text-sm mt-2 flex items-center justify-center gap-2">
                    <span data-translate-key="login.welcomeBack">æ­¡è¿å›ä¾†ï¼</span>
                    <span class="animate-pulse">âœ¨</span>
                </p>
            </div>
            
            <div id="login-error" class="hidden mb-4 bg-red-500/20 backdrop-blur-sm border-l-4 border-red-400 text-red-100 p-4 rounded-lg text-sm"></div>
            
            <form id="login-form" class="space-y-5">
                <div>
                    <label for="login-email" class="block text-sm font-medium text-white/90 mb-2">
                        <i class="fas fa-envelope mr-2 text-indigo-300"></i><span data-translate-key="login.email">é›»å­éƒµä»¶</span>
                    </label>
                    <input type="email" id="login-email" required 
                           class="w-full px-4 py-3 bg-white/10 backdrop-blur-sm border-2 border-white/20 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 focus:outline-none text-white placeholder-white/50 transition-all"
                           data-translate-key="login.emailPlaceholder" placeholder="your@email.com">
                </div>
                <div>
                    <label for="login-password" class="block text-sm font-medium text-white/90 mb-2">
                        <i class="fas fa-lock mr-2 text-indigo-300"></i><span data-translate-key="login.password">å¯†ç¢¼</span>
                    </label>
                    <input type="password" id="login-password" required
                           class="w-full px-4 py-3 bg-white/10 backdrop-blur-sm border-2 border-white/20 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 focus:outline-none text-white placeholder-white/50 transition-all"
                           data-translate-key="login.passwordPlaceholder" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>
                <button type="submit" id="login-submit-btn"
                        class="w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-bold py-4 px-6 rounded-lg hover:from-indigo-600 hover:via-purple-600 hover:to-pink-600 focus:outline-none focus:ring-4 focus:ring-yellow-400/50 transition-all transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">
                    <span data-translate-key="login.loginBtn">ç™»å…¥</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-sm text-white/70">
                    <span data-translate-key="login.noAccount">é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ</span> 
                    <a href="#" id="show-signup" class="text-yellow-300 hover:text-yellow-200 font-semibold transition-colors inline-flex items-center gap-1">
                        <span data-translate-key="login.registerNow">ç«‹å³è¨»å†Š</span>
                        <i class="fas fa-chevron-right text-xs"></i>
                    </a>
                </p>
            </div>
            
            <!-- Feature Highlights - More playful for kids -->
            <div class="mt-8 pt-6 border-t border-white/20">
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div class="flex flex-col items-center transform hover:scale-110 transition-transform cursor-default">
                        <div class="text-4xl mb-2 animate-bounce" style="animation-duration: 2s;">ğŸŒ</div>
                        <p class="text-sm text-white font-medium" data-translate-key="login.featureMultilingual">å¤šèªè¨€</p>
                    </div>
                    <div class="flex flex-col items-center transform hover:scale-110 transition-transform cursor-default">
                        <div class="text-4xl mb-2 animate-bounce" style="animation-duration: 2.5s; animation-delay: 0.3s;">ğŸ¤–</div>
                        <p class="text-sm text-white font-medium" data-translate-key="login.featureAI">AI é©…å‹•</p>
                    </div>
                    <div class="flex flex-col items-center transform hover:scale-110 transition-transform cursor-default">
                        <div class="text-4xl mb-2 animate-bounce" style="animation-duration: 2.2s; animation-delay: 0.6s;">â­</div>
                        <p class="text-sm text-white font-medium" data-translate-key="login.featurePersonalized">å€‹äººåŒ–</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal - Redesigned for Kids -->
    <div id="signup-modal" class="fixed inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 z-50 flex items-center justify-center p-4 hidden overflow-y-auto">
        <!-- Animated Background Elements - More playful for kids -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse"></div>
            <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-pink-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
            <div class="absolute top-1/2 left-1/2 w-72 h-72 bg-indigo-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
            <!-- Floating decorative elements for kids -->
            <div class="absolute top-20 left-10 text-4xl animate-bounce" style="animation-duration: 3s; animation-delay: 0.5s;">ğŸ¨</div>
            <div class="absolute top-40 right-20 text-3xl animate-bounce" style="animation-duration: 2.5s; animation-delay: 1s;">ğŸ‰</div>
            <div class="absolute bottom-32 left-20 text-3xl animate-bounce" style="animation-duration: 3.5s; animation-delay: 1.5s;">ğŸ</div>
            <div class="absolute bottom-20 right-10 text-4xl animate-bounce" style="animation-duration: 2s; animation-delay: 0.8s;">ğŸŒˆ</div>
        </div>
        
        <!-- Language Switcher - Top Right -->
        <div class="absolute top-2 right-2 md:top-4 md:right-4 z-20">
            <select id="signup-language-switcher" class="language-select bg-white/20 backdrop-blur-sm text-white rounded-lg px-2 py-1.5 md:px-4 md:py-2 border-2 border-white/30 focus:outline-none focus:ring-2 focus:ring-yellow-400 text-xs md:text-sm font-medium cursor-pointer hover:bg-white/30 transition-all">
                <option value="zh-Hant">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</option>
                <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                <option value="vi">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
                <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
            </select>
        </div>
        
        <div class="relative bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl max-w-md w-full p-6 md:p-8 lg:p-10 my-4 md:my-8 border-2 border-white/20 max-h-[95vh] overflow-y-auto">
            <!-- Main Title -->
            <div class="text-center mb-2">
                <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-1">
                    <span class="bg-gradient-to-r from-cyan-300 via-blue-300 to-indigo-300 bg-clip-text text-transparent">å¤šèªè¨€</span>
                    <span class="bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-300 bg-clip-text text-transparent">å­¸ç¿’å¹³å°</span>
                </h1>
            </div>
            
            <!-- Logo/Brand Section -->
            <div class="text-center mb-6 md:mb-8">
                <div class="inline-flex items-center justify-center w-20 h-20 md:w-24 md:h-24 bg-gradient-to-br from-emerald-400 via-cyan-400 to-blue-400 rounded-3xl mb-3 md:mb-4 shadow-lg transform hover:scale-110 transition-transform animate-bounce" style="animation-duration: 2s;">
                    <i class="fas fa-user-plus text-4xl md:text-5xl text-white"></i>
                </div>
                <h2 class="text-2xl md:text-3xl font-bold text-white mb-2 bg-gradient-to-r from-white via-cyan-200 to-emerald-200 bg-clip-text text-transparent">
                    <span data-translate-key="signup.joinUs">åŠ å…¥æˆ‘å€‘</span> ğŸ‰
                </h2>
                <p class="text-indigo-200 text-base md:text-lg font-medium" data-translate-key="signup.startJourney">é–‹å§‹æ‚¨çš„ AI å­¸ç¿’ä¹‹æ—… âœ¨</p>
                <p class="text-white/90 text-xs md:text-sm mt-2 flex items-center justify-center gap-2">
                    <span data-translate-key="signup.signupDesc">è¨»å†Šå¸³è™Ÿï¼Œç«‹å³é«”é©—å¤šæ¨£åŒ–çš„ AI å­¸ç¿’åŠŸèƒ½</span>
                </p>
            </div>
            
            <div id="signup-error" class="hidden mb-4 bg-red-500/20 backdrop-blur-sm border-l-4 border-red-400 text-red-100 p-4 rounded-lg text-sm"></div>
            <div id="signup-success" class="hidden mb-4 bg-green-500/20 backdrop-blur-sm border-l-4 border-green-400 text-green-100 p-4 rounded-lg text-sm"></div>
            
            <form id="signup-form" class="space-y-5">
                <div>
                    <label for="signup-email" class="block text-sm font-medium text-white/90 mb-2">
                        <i class="fas fa-envelope mr-2 text-indigo-300"></i><span data-translate-key="signup.email">é›»å­éƒµä»¶</span>
                    </label>
                    <input type="email" id="signup-email" required
                           class="w-full px-4 py-3 bg-white/10 backdrop-blur-sm border-2 border-white/20 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 focus:outline-none text-white placeholder-white/50 transition-all"
                           data-translate-key="signup.emailPlaceholder" placeholder="your@email.com">
                </div>
                <div>
                    <label for="signup-password" class="block text-sm font-medium text-white/90 mb-2">
                        <i class="fas fa-lock mr-2 text-indigo-300"></i><span data-translate-key="signup.password">å¯†ç¢¼</span>
                    </label>
                    <input type="password" id="signup-password" required minlength="6"
                           class="w-full px-4 py-3 bg-white/10 backdrop-blur-sm border-2 border-white/20 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 focus:outline-none text-white placeholder-white/50 transition-all"
                           data-translate-key="signup.passwordPlaceholder" placeholder="è‡³å°‘6å€‹å­—å…ƒ">
                    <p class="text-xs text-white/60 mt-1">
                        <i class="fas fa-info-circle mr-1"></i><span data-translate-key="signup.passwordHint">å¯†ç¢¼é•·åº¦è‡³å°‘éœ€è¦ 6 å€‹å­—å…ƒ</span>
                    </p>
                </div>
                <button type="submit"
                        class="w-full bg-gradient-to-r from-emerald-500 via-cyan-500 to-blue-500 text-white font-bold py-4 px-6 rounded-lg hover:from-emerald-600 hover:via-cyan-600 hover:to-blue-600 focus:outline-none focus:ring-4 focus:ring-yellow-400/50 transition-all transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2">
                    <span data-translate-key="signup.signupBtn">å»ºç«‹å¸³è™Ÿ</span>
                    <i class="fas fa-rocket"></i>
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-sm text-white/70">
                    <span data-translate-key="signup.haveAccount">å·²æœ‰å¸³è™Ÿï¼Ÿ</span> 
                    <a href="#" id="show-login" class="text-yellow-300 hover:text-yellow-200 font-semibold transition-colors inline-flex items-center gap-1">
                        <span data-translate-key="signup.backToLogin">è¿”å›ç™»å…¥</span>
                        <i class="fas fa-chevron-left text-xs"></i>
                    </a>
                </p>
            </div>
            
            <!-- Benefits Section - More playful for kids -->
            <div class="mt-6 md:mt-8 pt-4 md:pt-6 border-t border-white/20">
                <p class="text-xs md:text-sm font-semibold text-white/90 mb-3 md:mb-4 text-center flex items-center justify-center gap-2">
                    <span data-translate-key="signup.benefitsTitle">è¨»å†Šå³å¯äº«å—ï¼š</span>
                    <span class="text-lg md:text-xl animate-bounce">ğŸ</span>
                </p>
                <div class="grid grid-cols-2 gap-2 md:gap-3">
                    <div class="flex items-center gap-1 md:gap-2 bg-white/10 backdrop-blur-sm rounded-xl p-2 md:p-3 border border-white/20 transform hover:scale-105 transition-transform">
                        <span class="text-xl md:text-2xl">ğŸŒ</span>
                        <span class="text-xs md:text-sm text-white font-medium" data-translate-key="signup.benefitMultilingual">å¤šèªè¨€å­¸ç¿’</span>
                    </div>
                    <div class="flex items-center gap-1 md:gap-2 bg-white/10 backdrop-blur-sm rounded-xl p-2 md:p-3 border border-white/20 transform hover:scale-105 transition-transform">
                        <span class="text-xl md:text-2xl">ğŸ¤–</span>
                        <span class="text-xs md:text-sm text-white font-medium" data-translate-key="signup.benefitAITutor">AI åŠ©æ•™</span>
                    </div>
                    <div class="flex items-center gap-1 md:gap-2 bg-white/10 backdrop-blur-sm rounded-xl p-2 md:p-3 border border-white/20 transform hover:scale-105 transition-transform">
                        <span class="text-xl md:text-2xl">ğŸ“š</span>
                        <span class="text-xs md:text-sm text-white font-medium" data-translate-key="signup.benefitTutoring">ä½œæ¥­è¼”å°</span>
                    </div>
                    <div class="flex items-center gap-1 md:gap-2 bg-white/10 backdrop-blur-sm rounded-xl p-2 md:p-3 border border-white/20 transform hover:scale-105 transition-transform">
                        <span class="text-xl md:text-2xl">ğŸ“–</span>
                        <span class="text-xs md:text-sm text-white font-medium" data-translate-key="signup.benefitStorybook">ç¹ªæœ¬æœ—è®€</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App (hidden until authenticated) -->
    <div id="main-app" class="hidden">
    <div class="container mx-auto p-4 md:p-8 max-w-5xl relative z-10">
        <!-- Language Switcher and Logout Button -->
        <div class="absolute top-4 right-4 md:top-6 md:right-8 z-20 overflow-visible flex items-center gap-2">
            <button id="logout-btn" class="bg-red-500/80 hover:bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-all hidden" title="ç™»å‡º">
                <i class="fas fa-sign-out-alt mr-1"></i>ç™»å‡º
            </button>
            <select id="language-switcher" class="language-select bg-white/20 text-white rounded-md p-2 border-2 border-white/30 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                <option value="zh-Hant">ç¹é«”ä¸­æ–‡</option>
                <option value="en">English</option>
                <option value="vi">Tiáº¿ng Viá»‡t</option>
                <option value="ja">æ—¥æœ¬èª</option>
            </select>
        </div>

        <!-- New Main Header -->
        <header class="text-center mb-6">
            <h1 class="text-5xl md:text-6xl font-bold text-white tracking-tight" data-translate-key="main_title">LingoVerse AI</h1>
            <p class="text-lg text-indigo-200 mt-2" data-translate-key="main_subtitle">æ‚¨çš„ AI å­¸ç¿’å®‡å®™</p>
        </header>

        <!-- New Main Navigation -->
        <nav id="main-nav" class="mb-8 flex flex-wrap justify-center p-2 bg-black/10 backdrop-blur-sm rounded-xl border border-white/20">
            <button data-view="platform-view" class="nav-btn flex-1 py-3 px-4 rounded-lg text-white font-medium text-center active" data-translate-key="nav.learningPlatform">å¤šèªè¨€å­¸ç¿’å¹³å°</button>
            <button data-view="tutoring-view" class="nav-btn flex-1 py-3 px-4 rounded-lg text-white font-medium text-center" data-translate-key="nav.studentTutoring">å­¸ç”Ÿèª²ç¨‹è¼”å°</button>
            <button data-view="storybook-view" class="nav-btn flex-1 py-3 px-4 rounded-lg text-white font-medium text-center" data-translate-key="nav.storybookReading">å…’ç«¥ç¹ªæœ¬æœ—è®€</button>
            <button data-view="ai-tutor-view" class="nav-btn flex-1 py-3 px-4 rounded-lg text-white font-medium text-center" data-translate-key="nav.aiTutor">AI åŠ©æ•™</button>
            <button data-view="ai-doctor-view" class="nav-btn flex-1 py-3 px-4 rounded-lg text-white font-medium text-center" data-translate-key="nav.aiDoctor">AI å°é†«ç”Ÿ</button>
            <button data-view="debate-coach-view" class="nav-btn flex-1 py-3 px-4 rounded-lg text-white font-medium text-center" data-translate-key="nav.debateCoach">AI è¾¯è«–æ•™ç·´</button>
            <button data-view="my-learning-view" class="nav-btn flex-1 py-3 px-4 rounded-lg text-white font-medium text-center" data-translate-key="nav.myLearning">
                <i class="fas fa-book-open mr-2"></i>æˆ‘çš„å­¸ç¿’
            </button>
            <button data-view="admin-view" id="admin-nav-btn" class="nav-btn flex-1 py-3 px-4 rounded-lg text-white font-medium text-center hidden" style="background-color: rgba(239, 68, 68, 0.3); border: 1px solid rgba(239, 68, 68, 0.5);">
                <i class="fas fa-shield-alt mr-2"></i>ç®¡ç†å“¡
            </button>
        </nav>
        
        <!-- View Container -->
        <main>
            <!-- (1) Multilingual Learning Platform View -->
            <div id="platform-view" class="view-content">
                <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white">
                    <h2 class="text-3xl font-bold text-center mb-2" data-translate-key="pageTitle">å¤šèªè¨€å­¸ç¿’å¹³å°</h2>
                    <p class="text-center text-indigo-200 mb-8" data-translate-key="pageSubtitle">é–‹å§‹ä»Šå¤©çš„å­¸ç¿’å†’éšªå§ï¼</p>
                    
                    <div id="error-message" class="hidden mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md" role="alert"></div>

                    <!-- Step 1: Age Selection -->
                    <div class="mb-8">
                        <h3 class="font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="ageTitle">1. é¸æ“‡å¹´é½¡</h3>
                        <div id="age-group" class="radio-btn-group grid grid-cols-2 md:grid-cols-5 gap-3">
                            <input type="radio" id="age-under-5" name="age" value="Under 5" checked><label for="age-under-5" class="block text-center rounded-lg p-3" data-translate-key="age_under_5">5æ­²ä»¥ä¸‹</label>
                            <input type="radio" id="age-6-10" name="age" value="6-10 years"><label for="age-6-10" class="block text-center rounded-lg p-3" data-translate-key="age_6_10">6-10æ­²</label>
                            <input type="radio" id="age-10-15" name="age" value="10-15 years"><label for="age-10-15" class="block text-center rounded-lg p-3" data-translate-key="age_10_15">10-15æ­²</label>
                            <input type="radio" id="age-15-20" name="age" value="15-20 years"><label for="age-15-20" class="block text-center rounded-lg p-3" data-translate-key="age_15_20">15-20æ­²</label>
                            <input type="radio" id="age-over-20" name="age" value="Over 20"><label for="age-over-20" class="block text-center rounded-lg p-3" data-translate-key="age_over_20">20æ­²ä»¥ä¸Š</label>
                        </div>
                    </div>
                     <!-- Step 2: Subject Selection -->
                    <div class="mb-8">
                        <h3 class="font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="subjectTitle">2. é¸æ“‡èª²ç¨‹é¡å‹</h3>
                        <div id="subject-group" class="radio-btn-group grid grid-cols-2 md:grid-cols-3 gap-3">
                            <input type="radio" id="subject-kids-en" name="subject" value="KidsEnglish" checked><label for="subject-kids-en" class="block text-center rounded-lg p-3" data-translate-key="subjectKidsEn">å…’ç«¥è‹±æ–‡</label>
                            <input type="radio" id="subject-adult-en" name="subject" value="AdultEnglish"><label for="subject-adult-en" class="block text-center rounded-lg p-3" data-translate-key="subjectAdultEn">æˆäººè‹±æ–‡</label>
                            <input type="radio" id="subject-sci" name="subject" value="Science"><label for="subject-sci" class="block text-center rounded-lg p-3" data-translate-key="subjectSci">ç§‘å­¸</label>
                            <input type="radio" id="subject-math" name="subject" value="Math"><label for="subject-math" class="block text-center rounded-lg p-3" data-translate-key="subjectMath">æ•¸å­¸</label>
                            <input type="radio" id="subject-hist" name="subject" value="History"><label for="subject-hist" class="block text-center rounded-lg p-3" data-translate-key="subjectHist">æ­·å²</label>
                            <input type="radio" id="subject-geo" name="subject" value="Geography"><label for="subject-geo" class="block text-center rounded-lg p-3" data-translate-key="subjectGeo">åœ°ç†</label>
                        </div>
                    </div>
                     <!-- Step 3: Lesson Type Selection -->
                    <div class="mb-8">
                        <h3 class="font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="lessonTypeTitle">3. é¸æ“‡é¡å‹</h3>
                        <div id="lesson-type-group" class="radio-btn-group grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                            <input type="radio" id="type-course" name="lesson-type" value="æ•™å­¸èª²ç¨‹" checked><label for="type-course" class="block text-center rounded-lg p-3" data-translate-key="lessonType.course">æ•™å­¸èª²ç¨‹</label>
                            <input type="radio" id="type-story" name="lesson-type" value="å•Ÿç™¼æ•…äº‹"><label for="type-story" class="block text-center rounded-lg p-3" data-translate-key="lessonType.story">å•Ÿç™¼æ•…äº‹</label>
                            <input type="radio" id="type-vocab" name="lesson-type" value="5å€‹å­—å½™èˆ‡ä¾‹å¥"><label for="type-vocab" class="block text-center rounded-lg p-3" data-translate-key="lessonType.vocab">5å€‹å­—å½™èˆ‡ä¾‹å¥</label>
                            <input type="radio" id="type-qa" name="lesson-type" value="AIæå•"><label for="type-qa" class="block text-center rounded-lg p-3" data-translate-key="lessonType.qa">AIæå•</label>
                            <input type="radio" id="type-dialogue" name="lesson-type" value="é›™äººåšå®¢"><label for="type-dialogue" class="block text-center rounded-lg p-3" data-translate-key="lessonType.dialogue">é›™äººåšå®¢</label>
                        </div>
                    </div>
                    <!-- Step 4: Topic Selection -->
                    <div class="mb-8">
                        <h3 class="font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="topicTitle">4. é¸æ“‡ä¸»é¡Œ</h3>
                        <select id="topic-select" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white"></select>
                        <div id="custom-topic-wrapper" class="hidden mt-4 space-y-2">
                            <label for="custom-topic-input" class="block text-sm font-medium text-white" data-translate-key="topicCustomLabel">è‡ªè¨‚ä¸»é¡Œ</label>
                            <input id="custom-topic-input" type="text" class="w-full p-2 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white placeholder-gray-300" data-translate-key="topicCustomPlaceholder" placeholder="è«‹è¼¸å…¥æƒ³å­¸ç¿’çš„ä¸»é¡Œ">
                        </div>
                    </div>
                    <!-- Generate Button -->
                    <div class="text-center">
                         <button id="generate-lesson-btn" class="w-full md:w-1/2 bg-gradient-to-r from-emerald-400 to-cyan-500 text-white font-bold py-3 px-6 rounded-lg hover:from-emerald-500 hover:to-cyan-600 focus:outline-none focus:ring-4 focus:ring-cyan-300 transition-all transform hover:scale-105 shadow-lg flex items-center justify-center mx-auto">
                           <span class="btn-text" data-translate-key="generateBtn">ç”Ÿæˆå­¸ç¿’è¨ˆç•«</span>
                           <div class="loader ml-2 hidden"></div>
                        </button>
                    </div>
                </div>
                <!-- Lesson Display Area -->
                <div id="lesson-container" class="mt-8 hidden"></div>
            </div>

            <!-- (2) Student Tutoring View -->
            <div id="tutoring-view" class="view-content hidden">
                <!-- Initial State -->
                <div id="tutoring-initial-view">
                    <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-8 border-2 border-white/20 text-white text-center">
                        <h2 class="text-3xl font-bold mb-4" data-translate-key="tutoring.title">å­¸ç”Ÿèª²ç¨‹è¼”å°</h2>
                        <p class="text-indigo-200 mb-8 max-w-2xl mx-auto" data-translate-key="tutoring.subtitle">æ‹ç…§ä¸Šå‚³ä½œæ¥­ï¼ŒAIåŠ©æ•™ç«‹å³ç‚ºæ‚¨åˆ†æèˆ‡æŒ‡å°ï¼å¾æ­¤å‘Šåˆ¥æª¢æŸ¥ä½œæ¥­çš„ç…©æƒ±ï¼Œè®“AIæä¾›å°ˆæ¥­çš„è§£é¡Œæ­¥é©Ÿã€æ¦‚å¿µèªªæ˜èˆ‡å€‹äººåŒ–ç·´ç¿’ã€‚</p>
                        <button id="start-upload-btn" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-8 rounded-lg hover:from-purple-600 hover:to-pink-600 focus:outline-none focus:ring-4 focus:ring-pink-300 transition-all transform hover:scale-105 shadow-lg text-lg" data-translate-key="tutoring.startUploadBtn">
                            ç«‹å³ä¸Šå‚³ä½œæ¥­
                        </button>
                    </div>
                </div>
                
                <!-- Upload State -->
                <div id="tutoring-upload-view" class="hidden">
                     <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white">
                        <h2 class="text-3xl font-bold text-center mb-6" data-translate-key="tutoring.uploadTitle">ä¸Šå‚³ä½œæ¥­</h2>
                        
                        <div id="tutoring-error-message" class="hidden mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md" role="alert"></div>

                        <!-- File Upload Zone -->
                        <div id="file-drop-zone" class="app-file-drop-zone rounded-lg p-8 text-center cursor-pointer mb-6">
                            <input type="file" id="homework-file-input" class="hidden" accept="image/*,.pdf" multiple>
                            <div class="flex flex-col items-center justify-center">
                                <svg class="w-16 h-16 text-white/50 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
                                </svg>
                                <p class="font-semibold" data-translate-key="tutoring.dragDropText">é»æ“Šæˆ–æ‹–æ›³æª”æ¡ˆè‡³æ­¤</p>
                                <p id="file-name-display" class="text-sm text-indigo-200 mt-1" data-translate-key="tutoring.noFileSelected">å°šæœªé¸æ“‡æª”æ¡ˆ</p>
                            </div>
                        </div>
                        <p id="tutoring-file-summary" class="text-sm text-indigo-200 mb-6 hidden"></p>

                        <!-- Options -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div>
                                <label for="tutoring-level" class="block text-sm font-medium mb-1" data-translate-key="tutoring.levelLabel">ç¨‹åº¦</label>
                                <select id="tutoring-level" class="w-full p-2 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white">
                                </select>
                            </div>
                             <div>
                                <label for="tutoring-subject" class="block text-sm font-medium mb-1" data-translate-key="tutoring.subjectLabel">ç§‘ç›®</label>
                                <select id="tutoring-subject" class="w-full p-2 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white">
                                </select>
                            </div>
                             <div>
                                <label for="tutoring-language" class="block text-sm font-medium mb-1" data-translate-key="tutoring.languageLabel">èªè¨€</label>
                                <select id="tutoring-language" class="w-full p-2 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white">
                                </select>
                            </div>
                        </div>

                        <div id="tutoring-custom-subject-wrapper" class="hidden mb-8">
                             <label for="tutoring-custom-subject-input" class="block text-sm font-medium mb-1" data-translate-key="tutoring.customSubjectLabel">è‡ªå®šç¾©ç§‘ç›®</label>
                             <input type="text" id="tutoring-custom-subject-input" class="w-full p-2 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white placeholder-gray-300" placeholder="è«‹è¼¸å…¥ç§‘ç›®åç¨±" data-translate-key="tutoring.customSubjectPlaceholder">
                        </div>

                        <div class="text-center">
                            <button id="analyze-homework-btn" class="w-full md:w-1/2 bg-gradient-to-r from-emerald-400 to-cyan-500 text-white font-bold py-3 px-6 rounded-lg hover:from-emerald-500 hover:to-cyan-600 focus:outline-none focus:ring-4 focus:ring-cyan-300 transition-all transform hover:scale-105 shadow-lg flex items-center justify-center mx-auto disabled:opacity-50" disabled>
                                <span class="btn-text" data-translate-key="tutoring.analyzeBtn">é–‹å§‹åˆ†æ</span>
                                <div class="loader ml-2 hidden"></div>
                            </button>
                        </div>
                     </div>
                </div>

                <!-- Results State -->
                <div id="tutoring-results-view" class="hidden space-y-8">
                    <!-- Key Concepts -->
                     <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 border-2 border-white/20 text-white">
                        <h2 class="text-2xl font-bold mb-4" data-translate-key="tutoring.conceptsTitle">é‡é»å°å­¸</h2>
                        <div id="key-concepts-container" class="space-y-4">
                        </div>
                    </div>
                    <!-- Vocabulary Highlights -->
                    <div id="tutoring-vocab-card" class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 border-2 border-white/20 text-white hidden">
                        <h2 class="text-2xl font-bold mb-4" data-translate-key="tutoring.vocabTitle">é‡é»å­—å½™</h2>
                        <div id="tutoring-vocabulary-container" class="space-y-4"></div>
                    </div>
                    
                    <!-- Homework Analysis -->
                     <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 border-2 border-white/20 text-white">
                        <h2 class="text-2xl font-bold mb-4" data-translate-key="tutoring.analysisTitle">ä½œæ¥­è§£æ</h2>
                        <div id="problem-analysis-container" class="space-y-4">
                        </div>
                    </div>
                </div>
            </div>

            <!-- (3) Storybook Reading View -->
            <div id="storybook-view" class="view-content hidden">
                 <!-- Initial State -->
                <div id="storybook-initial-view">
                    <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-8 border-2 border-white/20 text-white text-center">
                        <h2 class="text-3xl font-bold mb-4" data-translate-key="storybook.title">å…’ç«¥ç¹ªæœ¬æœ—è®€</h2>
                        <p class="text-indigo-200 mb-8 max-w-2xl mx-auto" data-translate-key="storybook.subtitle">ä¸Šå‚³ä¸€å¼µåœ–ç‰‡ï¼Œè®“ AI ç‚ºæ‚¨å‰µä½œå‡ºç¨ä¸€ç„¡äºŒçš„æœ‰è²æ•…äº‹æ›¸ï¼æ‚¨å¯ä»¥é¸æ“‡èªè¨€ã€å¹´é½¡ã€é¢¨æ ¼ï¼Œä¸¦éš¨æ„ç·¨è¼¯ï¼Œèˆ‡å­©å­ä¸€åŒäº«å—é–±è®€çš„æ¨‚è¶£ã€‚</p>
                        <button id="start-storybook-upload-btn" class="bg-gradient-to-r from-rose-400 to-orange-300 text-white font-bold py-3 px-8 rounded-lg hover:from-rose-500 hover:to-orange-400 focus:outline-none focus:ring-4 focus:ring-orange-200 transition-all transform hover:scale-105 shadow-lg text-lg" data-translate-key="storybook.startUploadBtn">
                            ä¸Šå‚³ç¹ªæœ¬æ’åœ–
                        </button>
                    </div>
                </div>
                
                <!-- Main Creation View -->
                <div id="storybook-main-view" class="hidden">
                    <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white">
                        <div id="storybook-error-message" class="hidden mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md" role="alert"></div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Left Column: Image -->
                            <div>
                                <h3 class="font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="storybook.illustrationTitle">ç¹ªæœ¬æ’åœ–</h3>
                                <div id="storybook-image-container" class="w-full aspect-square bg-black/10 rounded-lg flex items-center justify-center">
                                     <div id="storybook-file-drop-zone" class="app-file-drop-zone rounded-lg p-8 text-center cursor-pointer w-full h-full flex flex-col justify-center items-center">
                                        <input type="file" id="storybook-file-input" class="hidden" accept="image/*" multiple>
                                        <img id="storybook-preview-img" class="hidden w-full h-full object-contain rounded-lg" />
                                        <div id="storybook-upload-placeholder" class="flex flex-col items-center justify-center">
                                            <svg class="w-16 h-16 text-white/50 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                                            </svg>
                                            <p class="font-semibold" data-translate-key="storybook.dragDropText">é»æ“Šæˆ–æ‹–æ›³åœ–ç‰‡</p>
                                        </div>
                                    </div>
                                    <p id="storybook-file-summary" class="mt-3 text-sm text-indigo-200 hidden"></p>
                                </div>
                            </div>
                            <!-- Right Column: Controls & Story -->
                            <div class="space-y-4">
                                <h3 class="font-semibold text-lg text-white opacity-90" data-translate-key="storybook.settingsTitle">æ•…äº‹è¨­å®š</h3>
                                <!-- Controls Grid -->
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="storybook-language" class="block text-sm font-medium mb-1" data-translate-key="storybook.languageLabel">èªè¨€</label>
                                        <select id="storybook-language" class="w-full p-2 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 text-white focus:outline-none">
                                        </select>
                                    </div>
                                    <div>
                                        <label for="storybook-age" class="block text-sm font-medium mb-1" data-translate-key="storybook.ageLabel">å¹´é½¡å±¤</label>
                                        <select id="storybook-age" class="w-full p-2 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 text-white focus:outline-none">
                                        </select>
                                    </div>
                                    <div class="col-span-2">
                                         <label class="block text-sm font-medium mb-1" data-translate-key="storybook.styleLabel">æ•…äº‹é¢¨æ ¼</label>
                                         <div id="storybook-style-group" class="radio-btn-group grid grid-cols-2 gap-2">
                                            <input type="radio" id="style-warm" name="style" value="æš–å¿ƒ" checked><label for="style-warm" class="block text-center rounded-lg p-2 text-sm" data-translate-key="storybook.styleWarm">æš–å¿ƒé¢¨æ ¼</label>
                                            <input type="radio" id="style-adventure" name="style" value="å†’éšª"><label for="style-adventure" class="block text-center rounded-lg p-2 text-sm" data-translate-key="storybook.styleAdventure">å†’éšªé¢¨æ ¼</label>
                                        </div>
                                    </div>
                                     <div class="col-span-2">
                                        <label for="storybook-char-name" class="block text-sm font-medium mb-1" data-translate-key="storybook.charNameLabel">ä¸»è¦è§’è‰²åç¨± (é¸å¡«)</label>
                                        <input type="text" id="storybook-char-name" class="w-full p-2 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 text-white placeholder-gray-300 focus:outline-none" placeholder="ä¾‹å¦‚: å°å…”å­é‚¦é‚¦" data-translate-key="storybook.charNamePlaceholder">
                                    </div>
                                </div>
                                <button id="generate-story-btn" class="w-full bg-gradient-to-r from-emerald-400 to-cyan-500 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center disabled:opacity-50" disabled>
                                    <span class="btn-text" data-translate-key="storybook.generateBtn">ç”Ÿæˆæ•…äº‹</span>
                                    <div class="loader ml-2 hidden"></div>
                                </button>
                                
                                <!-- Story Display and Controls -->
                                <div id="story-output-container" class="hidden pt-4 border-t border-white/20">
                                    <div class="flex justify-between items-center mb-2">
                                         <h3 class="font-semibold text-lg text-white opacity-90" data-translate-key="storybook.storyTitle">AI å‰µä½œçš„æ•…äº‹</h3>
                                         <div id="audio-controls" class="flex items-center space-x-2 hidden">
                                             <button id="play-story-btn" class="p-2 bg-pink-500 rounded-full hover:bg-pink-600 flex items-center justify-center disabled:opacity-50">
                                                 <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M6.3 2.841A1.5 1.5 0 0 0 4.5 4.11v11.78a1.5 1.5 0 0 0 2.277 1.28l9.086-5.89a1.5 1.5 0 0 0 0-2.56L6.777 2.857A1.5 1.5 0 0 0 6.3 2.841z" /></svg>
                                             </button>
                                             <button id="download-audio-btn" class="p-2 bg-sky-500 rounded-full hover:bg-sky-600 flex items-center justify-center">
                                                 <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z" /><path d="M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z" /></svg>
                                             </button>
                                         </div>
                                    </div>
                                    <div id="story-display-container" contenteditable="true" class="w-full h-48 bg-black/20 p-3 rounded-lg text-indigo-100 overflow-y-auto focus:ring-2 focus:ring-yellow-500 focus:outline-none" data-placeholder-key="storybook.storyPlaceholder">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- (4) AI Tutor View -->
            <div id="ai-tutor-view" class="view-content hidden">
                <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white">
                    <h2 class="text-3xl font-bold text-center mb-2" data-translate-key="aiTutor.title">ğŸ¤– AI åŠ©æ•™</h2>
                    <p class="text-center text-indigo-200 mb-8" data-translate-key="aiTutor.subtitle">å‘æˆ‘å€‘çš„ AI å°ˆå®¶åœ˜éšŠè«®è©¢æ‚¨å­©å­å­¸ç¿’èˆ‡è¡Œç‚ºä¸Šçš„å•é¡Œã€‚</p>
                    
                    <div id="ai-tutor-error-message" class="hidden mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md" role="alert"></div>

                    <!-- Input Area -->
                    <div class="mb-6">
                        <label for="ai-tutor-input" class="block font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="aiTutor.inputLabel">â‘  å•é¡Œè¼¸å…¥å€</label>
                        <textarea id="ai-tutor-input" rows="4" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white placeholder-gray-300" placeholder="è«‹è©³ç´°æè¿°æ‚¨è§€å¯Ÿåˆ°çš„å­©å­å­¸ç¿’æˆ–è¡Œç‚ºå•é¡Œ... (æ”¯æ´å¤šèªè¨€ï¼šä¸­æ–‡/è‹±æ–‡/è¶Šå—æ–‡)" data-translate-key="aiTutor.inputPlaceholder"></textarea>
                    </div>

                    <!-- Category Selection -->
                    <div class="mb-6">
                        <label class="block font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="aiTutor.categoryLabel">â‘¡ å•é¡Œåˆ†é¡é¸æ“‡</label>
                        <div id="ai-tutor-category-group" class="flex flex-wrap gap-3">
                        </div>
                    </div>
                    
                    <!-- Expert Personas -->
                    <div class="mb-8">
                        <label class="block font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="aiTutor.expertLabel">â‘¢ AI å°ˆå®¶é¢æ¿ (Expert Personas)</label>
                        <div id="ai-tutor-expert-group" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        </div>
                    </div>

                    <button id="get-advice-btn" class="w-full bg-gradient-to-r from-emerald-400 to-cyan-500 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center disabled:opacity-50" disabled>
                        <span class="btn-text" data-translate-key="aiTutor.getAdviceBtn">ç²å–å»ºè­°</span>
                        <div class="loader ml-2 hidden"></div>
                    </button>
                </div>
                <!-- Chat Response Area -->
                <div id="ai-tutor-response-container" class="mt-8 hidden">
                </div>
            </div>

             <!-- (5) AI Doctor View -->
            <div id="ai-doctor-view" class="view-content hidden">
                 <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white">
                    <h2 class="text-3xl font-bold text-center mb-2" data-translate-key="aiDoctor.title">ğŸ‘©â€âš•ï¸ AI å°é†«ç”Ÿ</h2>
                    <p class="text-center text-indigo-200 mb-8" data-translate-key="aiDoctor.subtitle">æè¿°ç—‡ç‹€ä¸¦ä¸Šå‚³ç…§ç‰‡(é¸å¡«)ï¼Œæˆ‘å€‘çš„å°ˆæ¥­ AI åœ˜éšŠå°‡æä¾›åˆæ­¥åˆ†æã€‚</p>
                    
                    <div id="ai-doctor-error-message" class="hidden mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md" role="alert"></div>

                    <!-- Symptom Input -->
                    <div class="mb-6">
                        <label for="ai-doctor-input" class="block font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="aiDoctor.symptomLabel">â‘  ç—‡ç‹€æè¿°</label>
                        <textarea id="ai-doctor-input" rows="4" class="w-full p-3 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white placeholder-gray-300" placeholder="è«‹è©³ç´°æè¿°æ‚¨çš„ç—‡ç‹€ï¼Œä¾‹å¦‚ï¼šé ­ç—›ã€èƒƒç—›ã€ç–²å€¦..." data-translate-key="aiDoctor.symptomPlaceholder"></textarea>
                    </div>

                    <!-- Image Upload -->
                    <div class="mb-6">
                        <label class="block font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="aiDoctor.uploadLabel">â‘¡ ä¸Šå‚³ç…§ç‰‡ (é¸å¡«)</label>
                        <div id="ai-doctor-file-drop-zone" class="app-file-drop-zone rounded-lg p-8 text-center cursor-pointer">
                            <input type="file" id="ai-doctor-file-input" class="hidden" accept="image/*" multiple>
                             <img id="ai-doctor-preview-img" class="hidden w-48 h-48 object-contain rounded-lg mx-auto mb-4" />
                            <div id="ai-doctor-upload-placeholder">
                                <svg class="w-16 h-16 text-white/50 mb-4 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
                                </svg>
                                <p class="font-semibold" data-translate-key="aiDoctor.uploadText">ä¸Šå‚³æ‚£éƒ¨æˆ–è—¥ç‰©ç…§ç‰‡</p>
                            </div>
                        </div>
                        <p id="ai-doctor-file-summary" class="text-sm text-indigo-200 mb-6 hidden"></p>
                    </div>
                    
                    <!-- Doctor Personas -->
                    <div class="mb-8">
                        <label class="block font-semibold text-lg mb-3 text-white opacity-90" data-translate-key="aiDoctor.expertLabel">â‘¢ é¸æ“‡ AI å°ˆå®¶</label>
                        <div id="ai-doctor-expert-group" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        </div>
                    </div>

                    <button id="get-diagnosis-btn" class="w-full bg-gradient-to-r from-emerald-400 to-cyan-500 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center disabled:opacity-50" disabled>
                        <span class="btn-text" data-translate-key="aiDoctor.getDiagnosisBtn">ç²å–åˆæ­¥è¨ºæ–·</span>
                        <div class="loader ml-2 hidden"></div>
                    </button>
                </div>
                 <!-- Chat Response Area for Doctor -->
                <div id="ai-doctor-response-container" class="mt-8 hidden">
                </div>
            </div>

            <!-- (6) AI Debate Coach View -->
            <div id="debate-coach-view" class="view-content hidden">
                <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white space-y-8">
                    <div class="text-center">
                        <h2 class="text-3xl font-bold mb-2" data-translate-key="debateCoach.title">AI è¾¯è«–æ•™ç·´</h2>
                        <p class="text-indigo-200" data-translate-key="debateCoach.subtitle">è®“å­©å­é€é AI ç·´ç¿’è¾¯è«–æ€ç¶­èˆ‡è‹±æ–‡è¡¨é”åŠ›ï¼</p>
                    </div>

                    <div class="bg-white/10 border border-white/20 rounded-xl p-6 space-y-4 overflow-visible">
                        <h3 class="text-2xl font-semibold" data-translate-key="debateCoach.settingsTitle">ç·´ç¿’è¨­å®š</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="relative z-10">
                                <label for="debate-motion" class="block font-semibold mb-2 text-white/90" data-translate-key="debateCoach.selectMotion">é¸æ“‡è¾¯è«–ä¸»é¡Œ</label>
                                <select id="debate-motion" class="w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"></select>
                            </div>
                            <div class="relative z-10">
                                <label for="debate-side" class="block font-semibold mb-2 text-white/90" data-translate-key="debateCoach.selectSide">é¸æ“‡ç«‹å ´</label>
                                <select id="debate-side" class="w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"></select>
                            </div>
                            <div class="relative z-10">
                                <label for="debate-level" class="block font-semibold mb-2 text-white/90" data-translate-key="debateCoach.selectLevel">é¸æ“‡ç­‰ç´š</label>
                                <select id="debate-level" class="w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"></select>
                            </div>
                            <div id="debate-custom-motion-wrapper" class="hidden md:col-span-3 space-y-2">
                                <label for="debate-custom-motion" class="block font-semibold text-white/90" data-translate-key="debateCoach.customMotion.label">è‡ªè¨‚è¾¯è«–ä¸»é¡Œ</label>
                                <input id="debate-custom-motion" type="text" class="w-full bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 placeholder:text-indigo-200/70" data-translate-key="debateCoach.customMotion.placeholder" placeholder="è«‹è¼¸å…¥æƒ³è¦è¾¯è«–çš„è­°é¡Œï¼Œä¾‹å¦‚ï¼šæœ¬é™¢æ”¯æŒå»¶é•·æš‘å‡ã€‚">
                                <p id="debate-custom-motion-note" class="text-sm text-indigo-200" data-translate-key="debateCoach.customMotion.note">è¼¸å…¥å¾Œï¼Œç·´ç¿’æ¨¡çµ„æœƒæä¾›ç©ºç™½æ¨¡æ¿ï¼Œè«‹è‡ªè¡Œå¡«å¯«é—œéµäº®é»ã€‚</p>
                            </div>
                        </div>
                        <div id="debate-motion-display" class="bg-white/5 border border-white/10 rounded-xl p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                            <div>
                                <p class="text-xs uppercase tracking-wide text-indigo-200 mb-1" data-translate-key="debateCoach.motionLabel">è¾¯è«–é¡Œå¹¹</p>
                                <p class="text-lg font-semibold text-white" data-motion-primary></p>
                                <p class="text-sm text-indigo-200 mt-1" data-motion-secondary></p>
                            </div>
                            <div class="flex flex-col items-start gap-2 md:items-end">
                                <button id="debate-toggle-bilingual" class="badge-chip cursor-pointer hover:bg-white/20 transition" type="button" data-translate-key="debateCoach.toggle_bilingual">é¡¯ç¤ºä¸­è‹±å°ç…§</button>
                                <p class="text-xs text-indigo-300 leading-relaxed max-w-xs" data-translate-key="debateCoach.hint_ai_en_eval">AI ä¸»è¦ä»¥è‹±æ–‡è©•ä¼°ã€‚è‹¥ä»¥ä¸­æ–‡è¼¸å…¥ï¼Œæˆ‘å€‘æœƒå…ˆè½‰ç‚ºè‹±æ–‡å†è©•ä¼°ã€‚</p>
                            </div>
                        </div>
                        <p class="text-sm text-indigo-200" data-translate-key="debateCoach.settingsHint">åˆ‡æ›è¨­å®šå¾Œï¼Œä¸‹æ–¹ç·´ç¿’æ¨¡çµ„æœƒè¼‰å…¥å°æ‡‰çš„å‡è³‡æ–™ã€‚</p>
                    </div>

                    <div class="bg-white/10 border border-white/20 rounded-xl p-6">
                        <div class="flex items-center justify-between flex-wrap gap-2 mb-4">
                            <h3 class="text-2xl font-semibold text-white" data-translate-key="debateCoach.practiceTitle">ç·´ç¿’æ¨¡çµ„</h3>
                            <p class="text-sm text-indigo-200" data-translate-key="debateCoach.practiceSubtitle">é»æ“Šæ¨¡çµ„æ¨™é¡Œå±•é–‹ç·´ç¿’å…§å®¹èˆ‡å·¥å…·</p>
                        </div>
                        <div id="debate-modules-container" class="space-y-4"></div>
                    </div>

                    <div class="bg-white/10 border border-white/20 rounded-xl p-6">
                        <h3 class="text-2xl font-semibold mb-4 text-white" data-translate-key="debateCoach.rubricTitle">è¾¯è«–è©•åˆ†è¦æº–</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full text-left text-sm text-white/90">
                                <tbody>
                                    <tr class="border-b border-white/10">
                                        <th class="py-3 pr-4 font-semibold" data-translate-key="debateCoach.rubric.content">å…§å®¹</th>
                                        <td class="py-3" data-translate-key="debateCoach.rubricDescriptions.content">è«–é»æ¸…æ™°ã€æœ‰é‚è¼¯ã€æœ‰è­‰æ“š</td>
                                    </tr>
                                    <tr class="border-b border-white/10">
                                        <th class="py-3 pr-4 font-semibold" data-translate-key="debateCoach.rubric.refutation">åé§</th>
                                        <td class="py-3" data-translate-key="debateCoach.rubricDescriptions.refutation">èƒ½æŒ‡å‡ºå°æ‰‹æ¼æ´ä¸¦æå‡ºåˆç†åé§</td>
                                    </tr>
                                    <tr class="border-b border-white/10">
                                        <th class="py-3 pr-4 font-semibold" data-translate-key="debateCoach.rubric.delivery">è¡¨é”</th>
                                        <td class="py-3" data-translate-key="debateCoach.rubricDescriptions.delivery">èªé€Ÿè‡ªç„¶ã€ç™¼éŸ³æ¸…æ™°ã€èªæ°£è‡ªä¿¡</td>
                                    </tr>
                                    <tr class="border-b border-white/10">
                                        <th class="py-3 pr-4 font-semibold" data-translate-key="debateCoach.rubric.strategy">ç­–ç•¥</th>
                                        <td class="py-3" data-translate-key="debateCoach.rubricDescriptions.strategy">çµæ§‹å®Œæ•´ã€æ™‚é–“æŒæ§è‰¯å¥½</td>
                                    </tr>
                                    <tr>
                                        <th class="py-3 pr-4 font-semibold" data-translate-key="debateCoach.rubric.total">ç¸½åˆ†</th>
                                        <td class="py-3" data-translate-key="debateCoach.rubricDescriptions.total">æ»¿åˆ† 40 åˆ†</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- (7) My Learning Dashboard View -->
            <div id="my-learning-view" class="view-content hidden">
                <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white">
                    <h2 class="text-3xl font-bold text-center mb-2" data-translate-key="myLearning.title">
                        <i class="fas fa-book-open mr-2"></i>æˆ‘çš„å­¸ç¿’
                    </h2>
                    <p class="text-center text-indigo-200 mb-8" data-translate-key="myLearning.subtitle">æŸ¥çœ‹æ‚¨çš„å­¸ç¿’é€²åº¦ã€æ­·å²è¨˜éŒ„å’Œæ”¶è—</p>
                    
                    <!-- Statistics Cards -->
                    <div id="learning-stats" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs text-indigo-200 mb-1" data-translate-key="myLearning.stats.lessons">èª²ç¨‹</p>
                                    <p class="text-2xl font-bold" id="stat-lessons">0</p>
                                </div>
                                <i class="fas fa-book text-3xl text-indigo-300 opacity-50"></i>
                            </div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs text-indigo-200 mb-1" data-translate-key="myLearning.stats.stories">æ•…äº‹</p>
                                    <p class="text-2xl font-bold" id="stat-stories">0</p>
                                </div>
                                <i class="fas fa-book-reader text-3xl text-purple-300 opacity-50"></i>
                            </div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs text-indigo-200 mb-1" data-translate-key="myLearning.stats.tutoring">ä½œæ¥­è¼”å°</p>
                                    <p class="text-2xl font-bold" id="stat-tutoring">0</p>
                                </div>
                                <i class="fas fa-graduation-cap text-3xl text-pink-300 opacity-50"></i>
                            </div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs text-indigo-200 mb-1" data-translate-key="myLearning.stats.favorites">æ”¶è—</p>
                                    <p class="text-2xl font-bold" id="stat-favorites">0</p>
                                </div>
                                <i class="fas fa-star text-3xl text-yellow-300 opacity-50"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Tabs -->
                    <div class="flex space-x-2 mb-6 border-b border-white/20 overflow-x-auto">
                        <button id="my-learning-tab-lessons" class="px-4 py-2 font-medium border-b-2 border-yellow-400 text-yellow-400 whitespace-nowrap" data-translate-key="myLearning.tab.lessons">
                            èª²ç¨‹è¨˜éŒ„
                        </button>
                        <button id="my-learning-tab-stories" class="px-4 py-2 font-medium border-b-2 border-transparent hover:text-yellow-400 whitespace-nowrap" data-translate-key="myLearning.tab.stories">
                            æ•…äº‹è¨˜éŒ„
                        </button>
                        <button id="my-learning-tab-tutoring" class="px-4 py-2 font-medium border-b-2 border-transparent hover:text-yellow-400 whitespace-nowrap" data-translate-key="myLearning.tab.tutoring">
                            ä½œæ¥­è¼”å°
                        </button>
                        <button id="my-learning-tab-favorites" class="px-4 py-2 font-medium border-b-2 border-transparent hover:text-yellow-400 whitespace-nowrap" data-translate-key="myLearning.tab.favorites">
                            æˆ‘çš„æ”¶è—
                        </button>
                    </div>

                    <!-- Lessons Tab -->
                    <div id="my-learning-lessons-tab" class="space-y-4">
                        <div id="lessons-container" class="space-y-3">
                            <div class="text-center text-indigo-200 py-8">
                                <div class="loader mx-auto mb-2"></div>
                                <p data-translate-key="myLearning.loading">è¼‰å…¥ä¸­...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Stories Tab -->
                    <div id="my-learning-stories-tab" class="space-y-4 hidden">
                        <div id="stories-container" class="space-y-3">
                            <div class="text-center text-indigo-200 py-8">
                                <div class="loader mx-auto mb-2"></div>
                                <p data-translate-key="myLearning.loading">è¼‰å…¥ä¸­...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Tutoring Tab -->
                    <div id="my-learning-tutoring-tab" class="space-y-4 hidden">
                        <div id="tutoring-container" class="space-y-3">
                            <div class="text-center text-indigo-200 py-8">
                                <div class="loader mx-auto mb-2"></div>
                                <p data-translate-key="myLearning.loading">è¼‰å…¥ä¸­...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Favorites Tab -->
                    <div id="my-learning-favorites-tab" class="space-y-4 hidden">
                        <div id="favorites-container" class="space-y-3">
                            <div class="text-center text-indigo-200 py-8">
                                <div class="loader mx-auto mb-2"></div>
                                <p data-translate-key="myLearning.loading">è¼‰å…¥ä¸­...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- (8) Admin Management View -->
            <div id="admin-view" class="view-content hidden">
                <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white">
                    <h2 class="text-3xl font-bold text-center mb-2">
                        <i class="fas fa-shield-alt mr-2"></i>ç®¡ç†å“¡æ§åˆ¶å°
                    </h2>
                    <p class="text-center text-indigo-200 mb-8">ç®¡ç†ç”¨æˆ¶æˆæ¬Šèˆ‡å¯©æ ¸æ–°è¨»å†Šè€…</p>
                    
                    <div id="admin-error-message" class="hidden mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md" role="alert"></div>
                    <div id="admin-success-message" class="hidden mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md" role="alert"></div>

                    <!-- Tabs -->
                    <div class="flex space-x-2 mb-6 border-b border-white/20">
                        <button id="admin-tab-pending" class="px-4 py-2 font-medium border-b-2 border-yellow-400 text-yellow-400">
                            å¾…å¯©æ ¸ç”¨æˆ¶
                        </button>
                        <button id="admin-tab-authorized" class="px-4 py-2 font-medium border-b-2 border-transparent hover:text-yellow-400">
                            å·²æˆæ¬Šç”¨æˆ¶
                        </button>
                    </div>

                    <!-- Pending Users Tab -->
                    <div id="admin-pending-tab" class="space-y-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold">å¾…å¯©æ ¸çš„è¨»å†Šç”¨æˆ¶</h3>
                            <button id="refresh-pending-btn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-sm">
                                <i class="fas fa-sync-alt mr-2"></i>åˆ·æ–°
                            </button>
                        </div>
                        <div id="pending-users-container" class="space-y-3">
                            <div class="text-center text-indigo-200 py-8">
                                <div class="loader mx-auto mb-2"></div>
                                <p>è¼‰å…¥ä¸­...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Authorized Users Tab -->
                    <div id="admin-authorized-tab" class="space-y-4 hidden">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold">å·²æˆæ¬Šç”¨æˆ¶åˆ—è¡¨</h3>
                            <button id="refresh-authorized-btn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-sm">
                                <i class="fas fa-sync-alt mr-2"></i>åˆ·æ–°
                            </button>
                        </div>
                        <div id="authorized-users-container" class="space-y-3">
                            <div class="text-center text-indigo-200 py-8">
                                <div class="loader mx-auto mb-2"></div>
                                <p>è¼‰å…¥ä¸­...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Image Modal -->
    <div id="image-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center p-4 z-50">
        <div class="relative max-w-4xl max-h-full">
            <button id="close-modal" class="absolute -top-4 -right-4 text-white bg-red-600 rounded-full h-10 w-10 flex items-center justify-center z-10">&times;</button>
            <img id="modal-image" src="" alt="Generated Image" class="w-auto h-auto max-w-full max-h-[90vh] rounded-lg shadow-2xl">
        </div>
    </div>

    <script>
    // --- Supabase Configuration ---
    // For Vercel/Netlify: Set environment variables in deployment platform
    // For local development: Values below are used as fallback
    // Note: Supabase Anon Key is safe to expose in frontend, but using env vars is recommended for flexibility
    const SUPABASE_URL = (typeof window !== 'undefined' && window.__SUPABASE_URL__) || 
                         'https://jlkgqaezgoajsnimogra.supabase.co';
    
    const SUPABASE_ANON_KEY = (typeof window !== 'undefined' && window.__SUPABASE_ANON_KEY__) || 
                              'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impsa2dxYWV6Z29hanNuaW1vZ3JhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMzM0MDAsImV4cCI6MjA4MDkwOTQwMH0.wqW8L4VmNIfeU2jLoFKmeA5ZisD_N-ILBfb_vUUxLtg';
    
    // Initialize Supabase client
    let supabase = null;
    
    // Wait for Supabase library to load, then initialize
    function initializeSupabase() {
        try {
            // Check if Supabase library is loaded (from CDN @supabase/supabase-js@2)
            if (typeof window !== 'undefined' && window.supabase) {
                if (typeof window.supabase.createClient === 'function') {
                    supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
                        auth: {
                            persistSession: true,
                            autoRefreshToken: true,
                            detectSessionInUrl: true,
                            storage: window.localStorage,
                            storageKey: 'sb-auth-token',
                            flowType: 'pkce'
                        }
                    });
                    console.log('âœ“ Supabase client initialized successfully');
                    console.log('Supabase URL:', SUPABASE_URL);
                    return true;
                } else {
                    console.error('âœ— window.supabase.createClient is not a function');
                    console.log('window.supabase type:', typeof window.supabase);
                    console.log('window.supabase keys:', Object.keys(window.supabase || {}));
                    return false;
                }
            } else {
                console.warn('âš  window.supabase not found, Supabase library may not be loaded yet');
                return false;
            }
        } catch (error) {
            console.error('âœ— Error initializing Supabase:', error);
            return false;
        }
    }
    
    // Try to initialize immediately (script may have loaded already)
    if (!initializeSupabase()) {
        // Wait for script to load, then try again
        let retryCount = 0;
        const maxRetries = 10;
        
        const retryInit = setInterval(() => {
            retryCount++;
            if (initializeSupabase()) {
                clearInterval(retryInit);
            } else if (retryCount >= maxRetries) {
                clearInterval(retryInit);
                console.error('âœ— Failed to initialize Supabase after', maxRetries, 'attempts');
                console.error('Please check if the Supabase script is loaded: https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2');
            }
        }, 200);
    }
    
    // Test Supabase connection
    async function testSupabaseConnection() {
        if (!supabase) {
            return { success: false, error: 'Supabase client not initialized' };
        }
        
        try {
            const startTime = Date.now();
            const { data, error } = await withTimeout(
                supabase.auth.getSession(),
                5000,
                'é€£æ¥æ¸¬è©¦è¶…æ™‚'
            );
            const duration = Date.now() - startTime;
            
            if (error && error.message !== 'Invalid Refresh Token: Refresh Token Not Found') {
                return { success: false, error: error.message, duration };
            }
            
            return { success: true, duration, hasSession: !!data?.session };
        } catch (error) {
            return { success: false, error: error.message || 'é€£æ¥æ¸¬è©¦å¤±æ•—' };
        }
    }
    
    // --- Authentication State ---
    let isAuthenticated = false;
    let currentUser = null;

    // --- Authentication Functions ---
    async function checkAuth() {
        // Wait for Supabase to be initialized
        let retries = 0;
        while (!supabase && retries < 20) {
            await new Promise(resolve => setTimeout(resolve, 100));
            retries++;
        }
        
        if (!supabase) {
            console.error('Supabase not initialized. Please configure SUPABASE_URL and SUPABASE_ANON_KEY.');
            return false;
        }
        
        try {
            console.log('Checking authentication state...');
            const { data: { session }, error } = await withTimeout(
                supabase.auth.getSession(),
                10000,
                'èªè­‰æª¢æŸ¥è¶…æ™‚'
            );
            
            if (error) {
                console.error('Auth check error:', error);
                // Don't throw for "Invalid Refresh Token" - it's normal when not logged in
                if (error.message && !error.message.includes('Invalid Refresh Token')) {
                    throw error;
                }
                return false;
            }
            
            if (session && session.user) {
                console.log('Session found, user:', session.user.email);
                isAuthenticated = true;
                currentUser = session.user;
                
                // Verify user is still authorized
                try {
                    const { data: authorizedUser, error: authCheckError } = await withTimeout(
                        supabase
                            .from('authorized_users')
                            .select('id, is_active')
                            .eq('user_id', session.user.id)
                            .eq('is_active', true)
                            .single(),
                        5000,
                        'æˆæ¬Šæª¢æŸ¥è¶…æ™‚'
                    );
                    
                    if (authCheckError || !authorizedUser) {
                        console.warn('User session exists but not authorized, signing out...');
                        await supabase.auth.signOut();
                        isAuthenticated = false;
                        currentUser = null;
                        return false;
                    }
                    
                    return true;
                } catch (authError) {
                    console.error('Authorization check failed:', authError);
                    // If authorization check fails, still allow session (might be network issue)
                    return true;
                }
            }
            
            console.log('No active session found');
            return false;
        } catch (error) {
            console.error('Auth check error:', error);
            return false;
        }
    }

    // Helper function to add timeout to promises
    function withTimeout(promise, timeoutMs, errorMessage) {
        let timeoutId;
        const timeoutPromise = new Promise((_, reject) => {
            timeoutId = setTimeout(() => reject(new Error(errorMessage || 'è«‹æ±‚è¶…æ™‚ï¼Œè«‹ç¨å¾Œå†è©¦')), timeoutMs);
        });
        
        return Promise.race([
            promise.finally(() => {
                if (timeoutId) clearTimeout(timeoutId);
            }),
            timeoutPromise
        ]).catch(error => {
            if (timeoutId) clearTimeout(timeoutId);
            throw error;
        });
    }

    async function handleLogin(email, password) {
        // Ensure Supabase is initialized
        if (!supabase) {
            console.error('Supabase not initialized, attempting to initialize...');
            if (!initializeSupabase()) {
                throw new Error('ç„¡æ³•é€£æ¥åˆ° Supabase æœå‹™å™¨ã€‚è«‹æª¢æŸ¥ç¶²çµ¡é€£æ¥æˆ–è¯ç¹«ç®¡ç†å“¡ã€‚');
            }
        }
        
        // Test connection first
        console.log('Testing Supabase connection...');
        const connectionTest = await testSupabaseConnection();
        if (!connectionTest.success) {
            console.error('Connection test failed:', connectionTest);
            throw new Error(`ç„¡æ³•é€£æ¥åˆ°æœå‹™å™¨ï¼š${connectionTest.error}ã€‚è«‹æª¢æŸ¥ç¶²çµ¡é€£æ¥ã€‚`);
        }
        console.log('Connection test passed:', connectionTest);
        
        console.log('Attempting login for:', email);
        const startTime = Date.now();
        
        const loginPromise = supabase.auth.signInWithPassword({
            email,
            password
        });
        
        const { data, error } = await withTimeout(loginPromise, 20000, 'ç™»å…¥è«‹æ±‚è¶…æ™‚ï¼Œè«‹æª¢æŸ¥ç¶²çµ¡é€£æ¥');
        const duration = Date.now() - startTime;
        
        console.log(`Login attempt completed in ${duration}ms`, { hasData: !!data, error });
        
        if (error) {
            console.error('Login error details:', {
                message: error.message,
                status: error.status,
                name: error.name
            });
            throw error;
        }
        
        if (!data || !data.user) {
            throw new Error('ç™»å…¥å¤±æ•—ï¼šæœªæ”¶åˆ°æœ‰æ•ˆçš„ç”¨æˆ¶æ•¸æ“š');
        }
        
        return data;
    }

    async function handleSignup(email, password) {
        if (!supabase) {
            throw new Error('Supabase not configured');
        }
        
        const { data, error } = await supabase.auth.signUp({
            email,
            password
        });
        
        if (error) throw error;
        return data;
    }

    async function handleLogout() {
        if (!supabase) return;
        await supabase.auth.signOut();
        isAuthenticated = false;
        currentUser = null;
        showLoginModal();
    }

    function showLoginModal() {
        document.getElementById('login-modal').classList.remove('hidden');
        document.getElementById('signup-modal').classList.add('hidden');
        document.getElementById('main-app').classList.add('hidden');
        // Sync language switcher
        const loginLangSwitcher = document.getElementById('login-language-switcher');
        if (loginLangSwitcher) {
            // Get current language from main switcher or default
            const mainLangSwitcher = document.getElementById('language-switcher');
            const currentLangValue = (typeof currentLang !== 'undefined' && currentLang) 
                || (mainLangSwitcher ? mainLangSwitcher.value : 'zh-Hant');
            loginLangSwitcher.value = currentLangValue;
        }
    }

    function showSignupModal() {
        document.getElementById('login-modal').classList.add('hidden');
        document.getElementById('signup-modal').classList.remove('hidden');
        document.getElementById('main-app').classList.add('hidden');
        // Sync language switcher
        const signupLangSwitcher = document.getElementById('signup-language-switcher');
        if (signupLangSwitcher) {
            // Get current language from main switcher or default
            const mainLangSwitcher = document.getElementById('language-switcher');
            const currentLangValue = (typeof currentLang !== 'undefined' && currentLang) 
                || (mainLangSwitcher ? mainLangSwitcher.value : 'zh-Hant');
            signupLangSwitcher.value = currentLangValue;
        }
    }

    function showMainApp() {
        document.getElementById('login-modal').classList.add('hidden');
        document.getElementById('signup-modal').classList.add('hidden');
        document.getElementById('main-app').classList.remove('hidden');
        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) logoutBtn.classList.remove('hidden');
        
        // Check if user is admin and show admin button
        checkAndShowAdminButton();
    }
    
    // Check if current user is admin (rofi90@hotmail.com)
    function checkAndShowAdminButton() {
        const adminNavBtn = document.getElementById('admin-nav-btn');
        if (adminNavBtn && currentUser && currentUser.email === 'rofi90@hotmail.com') {
            adminNavBtn.classList.remove('hidden');
        } else if (adminNavBtn) {
            adminNavBtn.classList.add('hidden');
        }
    }

    // --- Setup Authentication UI ---
    function setupAuthUI() {
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const showSignupLink = document.getElementById('show-signup');
        const showLoginLink = document.getElementById('show-login');
        const loginError = document.getElementById('login-error');
        const signupError = document.getElementById('signup-error');
        const signupSuccess = document.getElementById('signup-success');

        loginForm?.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // Get elements fresh to avoid stale references
            const loginError = document.getElementById('login-error');
            const loginEmail = document.getElementById('login-email');
            const loginPassword = document.getElementById('login-password');
            const loginSubmitBtn = loginForm.querySelector('button[type="submit"]');
            
            if (!loginError || !loginEmail || !loginPassword) {
                console.error('Login form elements not found');
                return;
            }
            
            loginError.classList.add('hidden');
            
            const email = loginEmail.value.trim();
            const password = loginPassword.value;
            
            if (!email || !password) {
                loginError.innerHTML = '<i class="fas fa-exclamation-circle mr-2"></i>è«‹è¼¸å…¥é›»å­éƒµä»¶å’Œå¯†ç¢¼';
                loginError.classList.remove('hidden');
                return;
            }
            
            // Disable button and show loading state
            if (loginSubmitBtn) {
                loginSubmitBtn.disabled = true;
                const originalText = loginSubmitBtn.innerHTML;
                loginSubmitBtn.innerHTML = '<div class="loader mx-auto"></div><span class="ml-2">ç™»å…¥ä¸­...</span>';
                
                // Function to restore button state
                const restoreButton = () => {
                    if (loginSubmitBtn) {
                        loginSubmitBtn.disabled = false;
                        loginSubmitBtn.innerHTML = originalText;
                    }
                };
                
                try {
                    console.log('Starting login process...');
                    const loginData = await handleLogin(email, password);
                    console.log('Login successful, checking authorization...');
                    isAuthenticated = true;
                    
                    // Check if user is authorized with timeout
                    const authCheckPromise = supabase
                        .from('authorized_users')
                        .select('id, is_active')
                        .eq('user_id', loginData.user.id)
                        .eq('is_active', true)
                        .single();
                    
                    const { data: authorizedUser, error: authCheckError } = await withTimeout(
                        authCheckPromise, 
                        10000, 
                        'æˆæ¬Šæª¢æŸ¥è¶…æ™‚ï¼Œè«‹ç¨å¾Œå†è©¦'
                    );
                    
                    console.log('Authorization check result:', { authorizedUser, authCheckError });
                    
                    if (authCheckError || !authorizedUser) {
                        console.warn('User not authorized:', authCheckError);
                        await handleLogout();
                        loginError.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>æ‚¨çš„å¸³è™Ÿå°šæœªç²å¾—ä½¿ç”¨æ¬Šé™ï¼Œè«‹è¯ç¹«ç®¡ç†å“¡ã€‚';
                        loginError.classList.remove('hidden');
                        restoreButton();
                        return;
                    }
                    
                    console.log('Login complete, showing main app...');
                    restoreButton();
                    showMainApp();
                } catch (error) {
                    console.error('Login error:', error);
                    let errorMessage = 'ç™»å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ‚¨çš„å¸³è™Ÿå¯†ç¢¼';
                    
                    if (error.message) {
                        if (error.message.includes('è¶…æ™‚')) {
                            errorMessage = error.message;
                        } else if (error.message.includes('Invalid login credentials')) {
                            errorMessage = 'å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤';
                        } else if (error.message.includes('Email not confirmed')) {
                            errorMessage = 'è«‹å…ˆé©—è­‰æ‚¨çš„é›»å­éƒµä»¶';
                        } else {
                            errorMessage = error.message;
                        }
                    }
                    
                    loginError.innerHTML = `<i class="fas fa-exclamation-circle mr-2"></i>${errorMessage}`;
                    loginError.classList.remove('hidden');
                    restoreButton();
                }
            } else {
                // Fallback if button not found
                try {
                    const loginData = await handleLogin(email, password);
                    isAuthenticated = true;
                    
                    const authCheckPromise = supabase
                        .from('authorized_users')
                        .select('id, is_active')
                        .eq('user_id', loginData.user.id)
                        .eq('is_active', true)
                        .single();
                    
                    const { data: authorizedUser, error: authCheckError } = await withTimeout(
                        authCheckPromise,
                        10000,
                        'æˆæ¬Šæª¢æŸ¥è¶…æ™‚ï¼Œè«‹ç¨å¾Œå†è©¦'
                    );
                    
                    if (authCheckError || !authorizedUser) {
                        await handleLogout();
                        loginError.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>æ‚¨çš„å¸³è™Ÿå°šæœªç²å¾—ä½¿ç”¨æ¬Šé™ï¼Œè«‹è¯ç¹«ç®¡ç†å“¡ã€‚';
                        loginError.classList.remove('hidden');
                        return;
                    }
                    
                    showMainApp();
                } catch (error) {
                    console.error('Login error:', error);
                    let errorMessage = 'ç™»å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ‚¨çš„å¸³è™Ÿå¯†ç¢¼';
                    if (error.message) {
                        if (error.message.includes('è¶…æ™‚')) {
                            errorMessage = error.message;
                        } else if (error.message.includes('Invalid login credentials')) {
                            errorMessage = 'å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤';
                        } else {
                            errorMessage = error.message;
                        }
                    }
                    loginError.innerHTML = `<i class="fas fa-exclamation-circle mr-2"></i>${errorMessage}`;
                    loginError.classList.remove('hidden');
                }
            }
        });

        signupForm?.addEventListener('submit', async (e) => {
            e.preventDefault();
            signupError.classList.add('hidden');
            signupSuccess.classList.add('hidden');
            
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            try {
                await handleSignup(email, password);
                signupSuccess.innerHTML = '<i class="fas fa-check-circle mr-2"></i>è¨»å†ŠæˆåŠŸï¼è«‹æª¢æŸ¥æ‚¨çš„é›»å­éƒµä»¶ä»¥é©—è­‰å¸³è™Ÿï¼ˆå¦‚æœå•Ÿç”¨äº†éƒµä»¶é©—è­‰ï¼‰ã€‚';
                signupSuccess.classList.remove('hidden');
                signupError.classList.add('hidden');
                setTimeout(() => {
                    showLoginModal();
                }, 2000);
            } catch (error) {
                signupError.innerHTML = `<i class="fas fa-exclamation-circle mr-2"></i>${error.message || 'è¨»å†Šå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦'}`;
                signupError.classList.remove('hidden');
                signupSuccess.classList.add('hidden');
            }
        });

        showSignupLink?.addEventListener('click', (e) => {
            e.preventDefault();
            showSignupModal();
        });

        showLoginLink?.addEventListener('click', (e) => {
            e.preventDefault();
            showLoginModal();
        });

        // Language switchers for login/signup modals
        const loginLanguageSwitcher = document.getElementById('login-language-switcher');
        const signupLanguageSwitcher = document.getElementById('signup-language-switcher');
        
        loginLanguageSwitcher?.addEventListener('change', (e) => {
            const lang = e.target.value;
            // Update currentLang immediately
            if (typeof currentLang !== 'undefined') {
                currentLang = lang;
            }
            // Try to call setLanguage, with fallback
            setTimeout(() => {
                if (typeof setLanguage === 'function') {
                    setLanguage(lang);
                } else {
                    // Manual translation update for login page
                    updateLoginPageTranslations(lang);
                }
            }, 0);
            // Sync with main language switcher
            const mainLangSwitcher = document.getElementById('language-switcher');
            if (mainLangSwitcher) {
                mainLangSwitcher.value = lang;
            }
        });
        
        signupLanguageSwitcher?.addEventListener('change', (e) => {
            const lang = e.target.value;
            // Update currentLang immediately
            if (typeof currentLang !== 'undefined') {
                currentLang = lang;
            }
            // Try to call setLanguage, with fallback
            setTimeout(() => {
                if (typeof setLanguage === 'function') {
                    setLanguage(lang);
                } else {
                    // Manual translation update for signup page
                    updateSignupPageTranslations(lang);
                }
            }, 0);
            // Sync with main language switcher
            const mainLangSwitcher = document.getElementById('language-switcher');
            if (mainLangSwitcher) {
                mainLangSwitcher.value = lang;
            }
        });
        
        // Helper function to update login page translations
        function updateLoginPageTranslations(lang) {
            // Wait for translations to be available
            if (typeof translations === 'undefined' || !translations[lang] || !translations[lang].login) {
                // Retry after a short delay if translations not ready
                setTimeout(() => updateLoginPageTranslations(lang), 100);
                return;
            }
            const t = translations[lang].login;
            document.querySelectorAll('[data-translate-key^="login."]').forEach(el => {
                const key = el.dataset.translateKey.replace('login.', '');
                if (t[key]) {
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                        el.placeholder = t[key];
                    } else if (el.tagName === 'SPAN' || el.tagName === 'P' || el.tagName === 'LABEL' || el.tagName === 'H1' || el.tagName === 'H2') {
                        el.textContent = t[key];
                    } else {
                        el.textContent = t[key];
                    }
                }
            });
        }
        
        // Helper function to update signup page translations
        function updateSignupPageTranslations(lang) {
            // Wait for translations to be available
            if (typeof translations === 'undefined' || !translations[lang] || !translations[lang].signup) {
                // Retry after a short delay if translations not ready
                setTimeout(() => updateSignupPageTranslations(lang), 100);
                return;
            }
            const t = translations[lang].signup;
            document.querySelectorAll('[data-translate-key^="signup."]').forEach(el => {
                const key = el.dataset.translateKey.replace('signup.', '');
                if (t[key]) {
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                        el.placeholder = t[key];
                    } else if (el.tagName === 'SPAN' || el.tagName === 'P' || el.tagName === 'LABEL' || el.tagName === 'H1' || el.tagName === 'H2') {
                        el.textContent = t[key];
                    } else {
                        el.textContent = t[key];
                    }
                }
            });
        }

        // Logout button
        const logoutBtn = document.getElementById('logout-btn');
        logoutBtn?.addEventListener('click', async () => {
            await handleLogout();
        });

        // Listen for auth state changes
        if (supabase) {
            supabase.auth.onAuthStateChange(async (event, session) => {
                console.log('Auth state changed:', event, session ? 'has session' : 'no session');
                
                if (event === 'SIGNED_IN' && session) {
                    try {
                        // Check if user is authorized
                        const { data: authorizedUser, error: authCheckError } = await withTimeout(
                            supabase
                                .from('authorized_users')
                                .select('id, is_active')
                                .eq('user_id', session.user.id)
                                .eq('is_active', true)
                                .single(),
                            5000,
                            'æˆæ¬Šæª¢æŸ¥è¶…æ™‚'
                        );
                        
                        if (authCheckError || !authorizedUser) {
                            // User not authorized, sign them out
                            console.warn('User not authorized, signing out...');
                            await supabase.auth.signOut();
                            const loginError = document.getElementById('login-error');
                            if (loginError) {
                                loginError.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>æ‚¨çš„å¸³è™Ÿå°šæœªç²å¾—ä½¿ç”¨æ¬Šé™ï¼Œè«‹è¯ç¹«ç®¡ç†å“¡ã€‚';
                                loginError.classList.remove('hidden');
                            }
                            showLoginModal();
                            return;
                        }
                        
                        isAuthenticated = true;
                        currentUser = session.user;
                        console.log('User signed in successfully:', session.user.email);
                        showMainApp();
                        logoutBtn?.classList.remove('hidden');
                        checkAndShowAdminButton();
                    } catch (error) {
                        console.error('Error during sign in:', error);
                        // Don't sign out on network errors, just show login
                        showLoginModal();
                    }
                } else if (event === 'SIGNED_OUT') {
                    console.log('User signed out');
                    isAuthenticated = false;
                    currentUser = null;
                    showLoginModal();
                    logoutBtn?.classList.add('hidden');
                } else if (event === 'TOKEN_REFRESHED' && session) {
                    // Token refreshed, update session
                    console.log('Token refreshed');
                    isAuthenticated = true;
                    currentUser = session.user;
                } else if (event === 'USER_UPDATED' && session) {
                    // User updated, refresh user data
                    console.log('User updated');
                    currentUser = session.user;
                }
            });
        }
    }

    document.addEventListener('DOMContentLoaded', async () => {
        // Setup authentication UI first
        setupAuthUI();
        
        // Wait a bit for Supabase to fully initialize
        await new Promise(resolve => setTimeout(resolve, 500));
        
        // Check if user is already authenticated
        try {
            const authenticated = await checkAuth();
            if (authenticated) {
                console.log('User is authenticated, showing main app...');
                showMainApp();
            } else {
                console.log('User is not authenticated, showing login modal...');
                showLoginModal();
            }
        } catch (error) {
            console.error('Error checking auth on page load:', error);
            showLoginModal();
        }

        // --- State Management ---
        let currentLang = 'zh-Hant';
        let currentLesson = null;
        let storyAudioBlob = null;
        let storyAudioUrl = null;
        let aiTutorChatHistory = [];
        let aiDoctorChatHistory = [];
        let storybookFiles = [];
        let tutoringFiles = [];
        let aiDoctorFiles = [];
        let explanationAudioBlobs = {};
        let currentLessonType = 'æ•™å­¸èª²ç¨‹';
        let audioButtonCounter = 0;
        const generatedAudioCache = new Map();
        let debateState = {
            motionId: 'ban-homework',
            side: 'pro',
            level: 'beginner',
            customMotionTitle: '',
            timers: {},
            recording: {
                case: { status: 'idle' },
                rebuttal: { status: 'idle' },
                crossfire: { status: 'idle' },
                feedback: { status: 'idle' },
                oral: { status: 'idle' }
            },
            moduleResults: {
                case: null,
                rebuttal: null,
                crossfire: null,
                feedback: null,
                oral: null
            },
            showBilingualMotion: true
        };
        const lessonAudioLanguages = new Set(['en', 'zh-Hant', 'vi', 'ja']);
        const lessonSpeechProfiles = {
            'Under 5': { apiRate: 0.6, playbackRate: 0.8 },
            '6-10 years': { apiRate: 0.85, playbackRate: 0.9 }
        };
        const voiceProfiles = {
            default: 'Kore', // Neutral/female-friendly voice
            female: 'Kore',
            male: 'Puck' // Distinct male voice provided by Gemini TTS
        };

        function getSelectedLessonAgeGroup() {
            return document.querySelector('input[name="age"]:checked')?.value || '';
        }

        function getActiveLessonLanguage() {
            return document.querySelector('#lesson-lang-tabs .lesson-lang-btn.active')?.dataset.lang || null;
        }

        function getLessonSpeechProfile(languageHint) {
            const ageGroup = getSelectedLessonAgeGroup();
            const profile = lessonSpeechProfiles[ageGroup];
            if (!profile) return null;

            const lang = languageHint || getActiveLessonLanguage();
            if (lang && !lessonAudioLanguages.has(lang)) return null;

            return { ...profile };
        }
        
        function applyPlaybackRate(mediaEl, speechProfile) {
            if (!speechProfile?.playbackRate || !mediaEl) return;
            if (typeof mediaEl.playbackRate === 'number') {
                mediaEl.playbackRate = speechProfile.playbackRate;
                mediaEl.defaultPlaybackRate = speechProfile.playbackRate;
            }
            if ('preservesPitch' in mediaEl) mediaEl.preservesPitch = true;
            if ('mozPreservesPitch' in mediaEl) mediaEl.mozPreservesPitch = true;
            if ('webkitPreservesPitch' in mediaEl) mediaEl.webkitPreservesPitch = true;
        }
        
        function playAudioBlob(blob, speechProfile = null, onPlaybackError = null) {
            if (!blob) {
                if (typeof onPlaybackError === 'function') {
                    onPlaybackError(new Error('No audio data was generated.'));
                }
                return;
            }
            const audioUrl = URL.createObjectURL(blob);
            const audio = new Audio(audioUrl);
            let revoked = false;
            const cleanup = () => {
                if (!revoked) {
                    URL.revokeObjectURL(audioUrl);
                    revoked = true;
                }
            };
            audio.addEventListener('ended', cleanup, { once: true });
            audio.addEventListener('error', () => {
                cleanup();
                if (typeof onPlaybackError === 'function') {
                    onPlaybackError(new Error('Audio element was unable to decode the generated file.'));
                }
            }, { once: true });
            applyPlaybackRate(audio, speechProfile);
            const playPromise = audio.play();
            if (playPromise && typeof playPromise.catch === 'function') {
                playPromise.catch(error => {
                    cleanup();
                    if (typeof onPlaybackError === 'function') {
                        onPlaybackError(error);
                    } else {
                        console.error('Audio playback error:', error);
                    }
                });
            }
        }
        
        function splitTextIntoDialogueSentences(text) {
            if (!text) return [];
            const normalized = text.replace(/\r/g, '\n').trim();
            if (!normalized) return [];
            let sentences = normalized.match(/[^ã€‚ï¼ï¼Ÿ!?â€¦]+[ã€‚ï¼ï¼Ÿ!?â€¦]?/gu) || [];
            sentences = sentences.map(s => s.trim()).filter(Boolean);
            if (sentences.length < 2) {
                const byLine = normalized.split(/\n+/).map(s => s.trim()).filter(Boolean);
                if (byLine.length > sentences.length) sentences = byLine;
            }
            if (sentences.length < 2 && normalized.length > 40) {
                const mid = Math.floor(normalized.length / 2);
                const firstHalf = normalized.slice(0, mid).trim();
                const secondHalf = normalized.slice(mid).trim();
                sentences = [firstHalf, secondHalf].filter(Boolean);
            }
            return sentences.length ? sentences : [normalized];
        }
        
        async function concatWavBlobs(blobs) {
            if (!blobs.length) throw new Error('No audio segments to merge.');
            if (blobs.length === 1) return blobs[0];
            const buffers = await Promise.all(blobs.map(blob => blob.arrayBuffer()));
            const headerBytes = new Uint8Array(buffers[0].slice(0, 44));
            const totalDataLength = buffers.reduce((sum, buffer) => sum + Math.max(0, buffer.byteLength - 44), 0);
            const outputBuffer = new ArrayBuffer(44 + totalDataLength);
            const outputBytes = new Uint8Array(outputBuffer);
            outputBytes.set(headerBytes, 0);
            const view = new DataView(outputBuffer);
            view.setUint32(4, 36 + totalDataLength, true);
            view.setUint32(40, totalDataLength, true);
            let offset = 44;
            for (const buffer of buffers) {
                const dataBytes = new Uint8Array(buffer, 44);
                outputBytes.set(dataBytes, offset);
                offset += dataBytes.byteLength;
            }
            return new Blob([outputBuffer], { type: 'audio/wav' });
        }
        
        async function generateDialogueAudio(text, lang) {
            const sentences = splitTextIntoDialogueSentences(text);
            const voiceOrder = ['female', 'male'];
            const speechProfile = getLessonSpeechProfile(lang);
            const localeVoiceLabels = translations[currentLang]?.voiceLabels || {};
            const segments = sentences.map((sentence, idx) => {
                const voiceKey = voiceOrder[idx % voiceOrder.length];
                const voiceName = voiceProfiles[voiceKey] || voiceProfiles.default;
                const labelPrefix = localeVoiceLabels[voiceKey] ? `${localeVoiceLabels[voiceKey]}ï¼š` : '';
                return {
                    text: `${labelPrefix}${sentence}`,
                    voiceName
                };
            });
            const blobs = [];
            for (const segment of segments) {
                const segmentBlob = await callTTSAPI(segment.text, null, { speechProfile, voiceName: segment.voiceName });
                blobs.push(segmentBlob);
            }
            return concatWavBlobs(blobs);
        }

        // --- Translation Data ---
        const translations = {
            'zh-Hant': {
                main_title: 'LingoVerse AI', main_subtitle: 'æ‚¨çš„ AI å­¸ç¿’å®‡å®™',
                nav: { learningPlatform: 'å¤šèªè¨€å­¸ç¿’å¹³å°', studentTutoring: 'å­¸ç”Ÿèª²ç¨‹è¼”å°', storybookReading: 'å…’ç«¥ç¹ªæœ¬æœ—è®€', aiTutor: 'AI åŠ©æ•™', aiDoctor: 'AI å°é†«ç”Ÿ', debateCoach: 'AI è¾¯è«–æ•™ç·´' },
                pageTitle: 'å¤šèªè¨€å­¸ç¿’å¹³å°', pageSubtitle: 'é–‹å§‹ä»Šå¤©çš„å­¸ç¿’å†’éšªå§ï¼', ageTitle: '1. é¸æ“‡å¹´é½¡',
                age_under_5: '5æ­²ä»¥ä¸‹', age_6_10: '6-10æ­²', age_10_15: '10-15æ­²', age_15_20: '15-20æ­²', age_over_20: '20æ­²ä»¥ä¸Š',
                subjectTitle: '2. é¸æ“‡èª²ç¨‹é¡å‹', subjectKidsEn: 'å…’ç«¥è‹±æ–‡', subjectAdultEn: 'æˆäººè‹±æ–‡', subjectSci: 'ç§‘å­¸', subjectMath: 'æ•¸å­¸', subjectHist: 'æ­·å²', subjectGeo: 'åœ°ç†',
                lessonTypeTitle: '3. é¸æ“‡é¡å‹',
                lessonType: { course: 'æ•™å­¸èª²ç¨‹', story: 'å•Ÿç™¼æ•…äº‹', vocab: '5å€‹å­—å½™èˆ‡ä¾‹å¥', qa: 'AIæå•', dialogue: 'é›™äººåšå®¢' },
                topicTitle: '4. é¸æ“‡ä¸»é¡Œ', generateBtn: 'ç”Ÿæˆå­¸ç¿’è¨ˆç•«', imageTitle: 'AI ç”Ÿæˆåœ–ç‰‡', vocabTitle: 'æ ¸å¿ƒå–®å­—', phraseTitle: 'å¯¦ç”¨çŸ­å¥', 
                topicCustomLabel: 'è‡ªè¨‚ä¸»é¡Œ', topicCustomPlaceholder: 'è«‹è¼¸å…¥æƒ³å­¸ç¿’çš„ä¸»é¡Œ', topicCustomOption: 'è‡ªè¨‚ä¸»é¡Œ', topicCustomError: 'è«‹å…ˆè¼¸å…¥è‡ªè¨‚ä¸»é¡Œå…§å®¹ã€‚',
                lessonLangTabs: { en: 'English', 'zh-Hant': 'ç¹é«”ä¸­æ–‡', vi: 'Tiáº¿ng Viá»‡t', ja: 'æ—¥æœ¬èª' },
                genAudio: 'ç”Ÿæˆ{lang}èªéŸ³',
                genAudioVariant: 'ç”Ÿæˆ{lang}{voice}èªéŸ³',
                genDialogueAudio: 'ç”Ÿæˆ{lang}å°è©±èªéŸ³',
                downloadDialogueAudio: 'ä¸‹è¼‰{lang}å°è©±èªéŸ³',
                voiceLabels: { female: 'å¥³è²', male: 'ç”·è²' },
                dialogueBadge: 'å°è©±',
                downloadAudio: 'ä¸‹è¼‰{lang}èªéŸ³',
                phoneticLabel: 'éŸ³æ¨™', exampleLabel: 'ä¾‹å¥',
                downloadAudioBtn: 'ä¸‹è¼‰èªéŸ³ (WAV)', imageError: 'åœ–ç‰‡ç”Ÿæˆå¤±æ•—', audioError: 'èªéŸ³ç”Ÿæˆå¤±æ•—', lessonError: 'èª²ç¨‹ç”Ÿæˆå¤±æ•—: {message}',
                topics: {
                    'KidsEnglish': ['å‹•ç‰©', 'å®¶åº­', 'é¡è‰²', 'æ•¸å­—', 'é£Ÿç‰©', 'è¡£æœ', 'èº«é«”éƒ¨ä½', 'å¤©æ°£', 'æƒ…ç·’', 'å­¸æ ¡'],
                    'AdultEnglish': ['å•†å‹™æœƒè­°', 'æ—…è¡Œèˆ‡è§€å…‰', 'é¤å»³é»é¤', 'å·¥ä½œé¢è©¦', 'ç¤¾äº¤æ´»å‹•', 'å¥åº·èˆ‡å¥èº«', 'ç§‘æŠ€èˆ‡ç¶²è·¯', 'è³¼ç‰©', 'æ–°èèˆ‡æ™‚äº‹', 'é›»å½±èˆ‡éŸ³æ¨‚'],
                    'Science': ['å¤ªé™½ç³»', 'å…‰åˆä½œç”¨', 'æ°´å¾ªç’°', 'äººé«”éª¨éª¼', 'ç‰©è³ªä¸‰æ…‹', 'é›»è·¯åŸºç¤', 'é£Ÿç‰©éˆ', 'ç«å±±èˆ‡åœ°éœ‡', 'å¤©æ°£èˆ‡æ°£å€™', 'ç´°èƒçµæ§‹'],
                    'Math': ['åŠ æ³•èˆ‡æ¸›æ³•', 'ä¹˜æ³•èˆ‡é™¤æ³•', 'åˆ†æ•¸', 'å¹¾ä½•å½¢ç‹€', 'æ™‚é–“', 'é‡‘éŒ¢è¨ˆç®—', 'æ¸¬é‡é•·åº¦èˆ‡é‡é‡', 'åœ–è¡¨èˆ‡æ•¸æ“š', 'åŸºç¤ä»£æ•¸', 'æ©Ÿç‡'],
                    'History': ['ä¸­åœ‹æ­·å²', 'è¶Šå—æ­·å²', 'å¤åŸƒåŠæ–‡æ˜', 'å¤ç¾…é¦¬', 'æ–‡è—å¾©èˆˆ', 'å¤§èˆªæµ·æ™‚ä»£', 'å·¥æ¥­é©å‘½', 'ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ°', 'ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ°', 'ç¾ä»£ç§‘æŠ€å²'],
                    'Geography': ['ä¸–ç•Œé¦–éƒ½', 'è‘—ååœ°æ¨™', 'æµ·æ´‹èˆ‡å¤§é™¸', 'ä¸»è¦å±±è„ˆ', 'ä¸–ç•Œä¸»è¦æ²³æµ', 'ä¸–ç•Œæ²™æ¼ ', 'ç†±å¸¶é›¨æ—', 'æ¿å¡Šæ§‹é€ ', 'æ°£å€™å¸¶', 'äººé¡é·å¾™']
                },
                tutoring: {
                    title: 'å­¸ç”Ÿèª²ç¨‹è¼”å°', subtitle: 'æ‹ç…§ä¸Šå‚³ä½œæ¥­ï¼ŒAIåŠ©æ•™ç«‹å³ç‚ºæ‚¨åˆ†æèˆ‡æŒ‡å°ï¼å¾æ­¤å‘Šåˆ¥æª¢æŸ¥ä½œæ¥­çš„ç…©æƒ±ï¼Œè®“AIæä¾›å°ˆæ¥­çš„è§£é¡Œæ­¥é©Ÿã€æ¦‚å¿µèªªæ˜èˆ‡å€‹äººåŒ–ç·´ç¿’ã€‚', startUploadBtn: 'ç«‹å³ä¸Šå‚³ä½œæ¥­',
                    uploadTitle: 'ä¸Šå‚³ä½œæ¥­', dragDropText: 'é»æ“Šæˆ–æ‹–æ›³æª”æ¡ˆè‡³æ­¤ï¼ˆå¯ä¸€æ¬¡ä¸Šå‚³ 1-10 å€‹æª”æ¡ˆï¼‰', noFileSelected: 'å°šæœªé¸æ“‡æª”æ¡ˆ',
                    levelLabel: 'ç¨‹åº¦', subjectLabel: 'ç§‘ç›®', languageLabel: 'èªè¨€', customSubjectLabel: 'è‡ªå®šç¾©ç§‘ç›®', customSubjectPlaceholder: 'è«‹è¼¸å…¥ç§‘ç›®åç¨±',
                    analyzeBtn: 'é–‹å§‹åˆ†æ', conceptsTitle: 'é‡é»å°å­¸', vocabTitle: 'é‡é»å­—å½™', analysisTitle: 'ä½œæ¥­è§£æ',
                    selectedCount: 'å·²é¸æ“‡ {count} å€‹æª”æ¡ˆï¼ˆæœ€å¤š 10 å€‹ï¼‰',
                    noFileError: 'è«‹å…ˆä¸Šå‚³è‡³å°‘ä¸€å€‹æª”æ¡ˆã€‚'
                },
                storybook: {
                    title: 'å…’ç«¥ç¹ªæœ¬æœ—è®€', subtitle: 'ä¸Šå‚³ä¸€å¼µåœ–ç‰‡ï¼Œè®“ AI ç‚ºæ‚¨å‰µä½œå‡ºç¨ä¸€ç„¡äºŒçš„æœ‰è²æ•…äº‹æ›¸ï¼æ‚¨å¯ä»¥é¸æ“‡èªè¨€ã€å¹´é½¡ã€é¢¨æ ¼ï¼Œä¸¦éš¨æ„ç·¨è¼¯ï¼Œèˆ‡å­©å­ä¸€åŒäº«å—é–±è®€çš„æ¨‚è¶£ã€‚', startUploadBtn: 'ä¸Šå‚³ç¹ªæœ¬æ’åœ–',
                    illustrationTitle: 'ç¹ªæœ¬æ’åœ–', dragDropText: 'é»æ“Šæˆ–æ‹–æ›³ 1-10 å¼µåœ–ç‰‡', settingsTitle: 'æ•…äº‹è¨­å®š',
                    languageLabel: 'èªè¨€', ageLabel: 'å¹´é½¡å±¤', styleLabel: 'æ•…äº‹é¢¨æ ¼', styleWarm: 'æš–å¿ƒé¢¨æ ¼', styleAdventure: 'å†’éšªé¢¨æ ¼',
                    charNameLabel: 'ä¸»è¦è§’è‰²åç¨± (é¸å¡«)', charNamePlaceholder: 'ä¾‹å¦‚: å°å…”å­é‚¦é‚¦', generateBtn: 'ç”Ÿæˆæ•…äº‹',
                    storyTitle: 'AI å‰µä½œçš„æ•…äº‹', storyPlaceholder: 'é»æ“Šã€Œç”Ÿæˆæ•…äº‹ã€é–‹å§‹å‰µä½œ...',
                    selectedCount: 'å·²é¸æ“‡ {count} å¼µæ’åœ–ï¼ˆæœ€å¤š 10 å¼µï¼‰',
                    noImageError: 'è«‹å…ˆä¸Šå‚³è‡³å°‘ä¸€å¼µæ’åœ–ã€‚'
                },
                aiTutor: {
                    title: 'ğŸ¤– AI åŠ©æ•™', subtitle: 'å‘æˆ‘å€‘çš„ AI å°ˆå®¶åœ˜éšŠè«®è©¢æ‚¨å­©å­å­¸ç¿’èˆ‡è¡Œç‚ºä¸Šçš„å•é¡Œã€‚', inputLabel: 'â‘  å•é¡Œè¼¸å…¥å€',
                    inputPlaceholder: 'è«‹è©³ç´°æè¿°æ‚¨è§€å¯Ÿåˆ°çš„å­©å­å­¸ç¿’æˆ–è¡Œç‚ºå•é¡Œ... (æ”¯æ´å¤šèªè¨€ï¼šä¸­æ–‡/è‹±æ–‡/è¶Šå—æ–‡)',
                    categoryLabel: 'â‘¡ å•é¡Œåˆ†é¡é¸æ“‡', categories: { 'learning': 'å­¸ç¿’æ–¹æ³•', 'behavior': 'è¡Œç‚ºå¿ƒç†', 'language': 'èªè¨€ç™¼å±•', 'emotion': 'æƒ…ç·’ç®¡ç†', 'social': 'ç¤¾äº¤é—œä¿‚', 'other': 'å…¶ä»–' },
                    expertLabel: 'â‘¢ AI å°ˆå®¶é¢æ¿ (Expert Personas)', getAdviceBtn: 'ç²å–å»ºè­°',
                    summaryTitle: '{expertName} ç¸½çµèˆ‡æå•', followupLabel: 'ğŸ¤” ç¹¼çºŒè¿½å•', followupPlaceholder: 'æˆ–è€…åœ¨é€™è£¡è¼¸å…¥æ‚¨çš„ä¸‹ä¸€å€‹å•é¡Œ...', sendBtn: 'å‚³é€'
                },
                aiDoctor: {
                    title: 'ğŸ‘©â€âš•ï¸ AI å°é†«ç”Ÿ', subtitle: 'æè¿°ç—‡ç‹€ä¸¦ä¸Šå‚³ç…§ç‰‡(é¸å¡«)ï¼Œæˆ‘å€‘çš„å°ˆæ¥­ AI åœ˜éšŠå°‡æä¾›åˆæ­¥åˆ†æã€‚', 
                    symptomLabel: 'â‘  ç—‡ç‹€æè¿°', symptomPlaceholder: 'è«‹è©³ç´°æè¿°æ‚¨çš„ç—‡ç‹€ï¼Œä¾‹å¦‚ï¼šé ­ç—›ã€èƒƒç—›ã€ç–²å€¦...',
                    uploadLabel: 'â‘¡ ä¸Šå‚³ç…§ç‰‡ (é¸å¡«)', uploadText: 'ä¸Šå‚³æ‚£éƒ¨æˆ–è—¥ç‰©ç…§ç‰‡ï¼ˆå¯ä¸€æ¬¡ä¸Šå‚³ 1-10 å¼µï¼‰',
                    expertLabel: 'â‘¢ é¸æ“‡ AI å°ˆå®¶', getDiagnosisBtn: 'ç²å–åˆæ­¥è¨ºæ–·',
                    selectedCount: 'å·²é¸æ“‡ {count} å¼µç…§ç‰‡ï¼ˆæœ€å¤š 10 å¼µï¼‰',
                    noFileError: 'è«‹å…ˆä¸Šå‚³è‡³å°‘ä¸€å¼µç…§ç‰‡ã€‚'
                },
                debateCoach: {
                    title: 'AI è¾¯è«–æ•™ç·´',
                    subtitle: 'è®“å­©å­é€é AI ç·´ç¿’è¾¯è«–æ€ç¶­èˆ‡è‹±æ–‡è¡¨é”åŠ›ï¼',
                    settingsTitle: 'ç·´ç¿’è¨­å®š',
                    selectMotion: 'é¸æ“‡è¾¯è«–ä¸»é¡Œ',
                    selectSide: 'é¸æ“‡ç«‹å ´',
                    selectLevel: 'é¸æ“‡ç­‰ç´š',
                    settingsHint: 'åˆ‡æ›è¨­å®šå¾Œï¼Œä¸‹æ–¹ç·´ç¿’æ¨¡çµ„æœƒè¼‰å…¥å°æ‡‰çš„å‡è³‡æ–™ã€‚',
                    sidePro: 'æ­£æ–¹',
                    sideCon: 'åæ–¹',
                    levelBeginner: 'åˆéš',
                    levelAdvanced: 'é€²éš',
                    practiceTitle: 'ç·´ç¿’æ¨¡çµ„',
                    practiceSubtitle: 'é»æ“Šæ¨¡çµ„æ¨™é¡Œå±•é–‹ç·´ç¿’å…§å®¹èˆ‡å·¥å…·',
                    motionLabel: 'è¾¯è«–é¡Œå¹¹',
                    hint_ai_en_eval: 'AI ä¸»è¦ä»¥è‹±æ–‡è©•ä¼°ã€‚è‹¥ä»¥ä¸­æ–‡è¼¸å…¥ï¼Œæˆ‘å€‘æœƒå…ˆè½‰ç‚ºè‹±æ–‡å†è©•ä¼°ã€‚',
                    toggle_bilingual: 'é¡¯ç¤ºä¸­è‹±å°ç…§',
                    badges: { timer: 'åªè¨ˆæ™‚', record: 'éŒ„éŸ³+AIè©•ä¼°' },
                    buttons: {
                        startTimer: 'é–‹å§‹ï¼ˆåªè¨ˆæ™‚ï¼‰',
                        recordStart: 'éŒ„éŸ³ä¸¦é–‹å§‹',
                        stopRecording: 'åœæ­¢éŒ„éŸ³',
                        recordRebuttal: 'éŒ„éŸ³åé§',
                        recordCrossfire: 'éŒ„éŸ³ä½œç­”',
                        recordFeedback: 'éŒ„éŸ³å–å¾—è©•åˆ†',
                        recordOral: 'éŒ„éŸ³è·Ÿè®€',
                        feedbackEvaluate: 'AI æ•™ç·´è©•åˆ†',
                        showReference: 'é¡¯ç¤ºåƒè€ƒç¨¿'
                    },
                    statuses: {
                        uploading: 'ä¸Šå‚³ä¸­â€¦',
                        transcribing: 'èªéŸ³è½‰å¯«ä¸­â€¦',
                        evaluating: 'AI è©•ä¼°ä¸­â€¦'
                    },
                    panels: {
                        logic: 'é‚è¼¯çµæ§‹',
                        delivery: 'å£èªªè¡¨ç¾',
                        rewrite: 'æ”¹å¯«å»ºè­°'
                    },
                    metrics: {
                        wpm: 'æ¯åˆ†é˜å­—æ•¸',
                        fillers: 'å¡«å……è©',
                        pauses: 'éé•·åœé “æ¬¡æ•¸'
                    },
                    caseNotesLabel: 'å£è¿°é‡é»ç­†è¨˜',
                    caseNotesPlaceholder: 'åˆ—å‡ºä½ æƒ³å¼·èª¿çš„ä¸»å¼µã€ä¾‹å­èˆ‡çµè«–å¥ã€‚',
                    progressLabel: 'éŒ„éŸ³ç‹€æ…‹',
                    resultPlaceholder: 'å®ŒæˆéŒ„éŸ³å¾Œï¼ŒAI æœƒåœ¨æ­¤é¡¯ç¤ºè©•ä¼°çµæœã€‚',
                    rebuttalResult: {
                        effectiveness: 'åé§æœ‰æ•ˆåº¦',
                        directness: 'ç›´æ¥å›ç­”ç‡',
                        weighing: 'å»ºè­° Weighing å¥å‹'
                    },
                    crossfireResult: {
                        directness: 'æ˜¯å¦ç›´æ¥å›ç­”',
                        followup: 'å»ºè­°è¿½å•å¥',
                        language: 'èªç—…æé†’'
                    },
                    feedbackExtras: {
                        audioLabel: 'èªéŸ³ä¸Šå‚³/éŒ„éŸ³',
                        scoresLabel: 'è©•åˆ†é¢å‘',
                        referenceToggle: 'é¡¯ç¤ºåƒè€ƒç¨¿',
                        referenceHint: 'ä»¥ä¸‹ç‚º AI ç”Ÿæˆçš„ 30â€“60 ç§’åƒè€ƒç¨¿ï¼Œå¯ç”¨æ–¼è·Ÿè®€ã€‚'
                    },
                    oral: {
                        title: 'å£è¿°/æœ—è®€è¨“ç·´ï¼ˆBetaï¼‰',
                        desc: 'è²¼ä¸Šä½ çš„ç¨¿å­ï¼ŒæŒ‰ä¸‹éŒ„éŸ³è·Ÿè®€ï¼ŒAI æœƒæ¨™ç¤ºå¡è©èˆ‡ç¯€å¥å»ºè­°ã€‚',
                        placeholder: 'è«‹è²¼ä¸Šè¦ç·´ç¿’çš„æ®µè½æˆ–ç«‹è«–ç¨¿...',
                        btnRecord: 'éŒ„éŸ³è·Ÿè®€',
                        btnStop: 'åœæ­¢éŒ„éŸ³',
                        resultPronunciation: 'ç™¼éŸ³/å¡è©',
                        resultPacing: 'ç¯€å¥/åœé “'
                    },
                    tooltips: {
                        case: 'ä¾æ“š PEEL çµæ§‹ç·´ 60 ç§’ç«‹è«–ï¼Œå¯é¸æ“‡å–®ç´”å€’æ•¸æˆ–éŒ„éŸ³ä¸¦ç²å¾— AI è©•ä¼°ã€‚',
                        rebuttal: 'é–±è®€æ¨¡æ“¬å°æ‰‹è«–é»å¾Œï¼ŒéŒ„éŸ³æå‡ºåé§ï¼ŒAI æœƒæ¨™è¨»åŠ›åº¦èˆ‡ç›´æ¥æ€§ã€‚',
                        crossfire: 'å‹¾é¸ä¸‰é¡Œå¾ŒéŒ„éŸ³å›ç­”ï¼ŒAI æª¢æŸ¥æ˜¯å¦ç›´æ¥ä½œç­”ä¸¦æä¾›è¿½å•å»ºè­°ã€‚',
                        feedback: 'è²¼ä¸Šæ–‡å­—æˆ–éŒ„éŸ³ï¼ŒAI ä¾å…§å®¹/åé§/è¡¨é”/ç­–ç•¥çµ¦ 40 åˆ†é‡è¡¨èˆ‡æŒ‡æ¨™ã€‚',
                        oral: 'æœ—è®€è²¼ä¸Šçš„æ–‡å­—ï¼ŒAI æ¨™ç¤ºå¡è©ã€ç™¼éŸ³èˆ‡ç¯€å¥å•é¡Œï¼Œæä¾›ç·´ç¿’å»ºè­°ã€‚'
                    },
                    modules: {
                        case60s: 'ä¸€åˆ†é˜ç«‹è«–ï¼ˆ60 ç§’ Caseï¼‰',
                        rebuttal: 'åé§è¡åˆºï¼ˆRebuttal Sprintï¼‰',
                        crossfire: 'äº¤äº’è³ªè©¢ï¼ˆCrossfire Builderï¼‰',
                        feedback: 'AI æ•™ç·´å›é¥‹ï¼ˆAI Coach Feedbackï¼‰'
                    },
                    timerLabel: 'å€’æ•¸è¨ˆæ™‚',
                    startTimer: 'é–‹å§‹',
                    resetTimer: 'é‡è¨­',
                    structureHeading: 'ç«‹è«–çµæ§‹',
                    structure: { claim: 'ä¸»å¼µ', reason: 'ç†ç”±', evidence: 'è­‰æ“š', closing: 'çµèª' },
                    practiceNote: 'è«‹åœ¨ 60 ç§’å…§å®Œæˆå£èªªæ¼”ç·´ï¼Œä¸¦åœ¨ä¸‹æ–¹è¼¸å…¥æ¡†è¨˜éŒ„é‡é»ã€‚',
                    notesPlaceholder: 'åœ¨æ­¤è¨˜éŒ„ä½ çš„å£èªªæç¶±æˆ–é‡é»...',
                    opponentHeading: 'æ¨¡æ“¬å°æ‰‹è«–é»',
                    yourResponse: 'ä½ çš„åé§',
                    evaluateBtn: 'AI è©•ä¼°',
                    evaluationHeading: 'AI è©•ä¼°å›é¥‹',
                    questionsHeading: 'è³ªè©¢é¡Œåº«',
                    questionsNote: 'è«‹å‹¾é¸æœ€å¤šä¸‰é¡Œé€²è¡Œå›ç­”ç·´ç¿’ã€‚',
                    responseHeading: 'å›ç­”è‰ç¨¿',
                    responsePlaceholder: 'æ’°å¯«ä½ çš„å›ç­”ç­–ç•¥æˆ–é‡é»...',
                    feedbackPrompt: 'è²¼ä¸Šæˆ–æ’°å¯«ä½ çš„è¾¯è«–ç¨¿',
                    feedbackPlaceholder: 'å°‡ç¨¿å­è²¼åœ¨é€™è£¡ï¼ŒAI å°‡æä¾›åˆ†æ•¸èˆ‡æ”¹é€²å»ºè­°...',
                    feedbackBtn: 'AI æ•™ç·´è©•åˆ†',
                    feedbackResultHeading: 'AI æ•™ç·´å›é¥‹',
                    rubricTitle: 'è¾¯è«–è©•åˆ†è¦æº–',
                    rubric: {
                        content: 'å…§å®¹',
                        refutation: 'åé§',
                        delivery: 'è¡¨é”',
                        strategy: 'ç­–ç•¥',
                        total: 'ç¸½åˆ†'
                    },
                    rubricDescriptions: {
                        content: 'å…§å®¹ï¼šè«–é»æ¸…æ™°ã€æœ‰é‚è¼¯ã€æœ‰è­‰æ“š',
                        refutation: 'åé§ï¼šèƒ½æŒ‡å‡ºå°æ‰‹æ¼æ´ä¸¦æå‡ºåˆç†åé§',
                        delivery: 'è¡¨é”ï¼šèªé€Ÿè‡ªç„¶ã€ç™¼éŸ³æ¸…æ™°ã€èªæ°£è‡ªä¿¡',
                        strategy: 'ç­–ç•¥ï¼šçµæ§‹å®Œæ•´ã€æ™‚é–“æŒæ§è‰¯å¥½',
                        total: 'ç¸½åˆ†ï¼ˆæ»¿åˆ† 40 åˆ†ï¼‰'
                    },
                    customMotion: {
                        option: 'è‡ªè¨‚ä¸»é¡Œ',
                        label: 'è‡ªè¨‚è¾¯è«–ä¸»é¡Œ',
                        placeholder: 'è«‹è¼¸å…¥æƒ³è¦è¾¯è«–çš„è­°é¡Œï¼Œä¾‹å¦‚ï¼šæœ¬é™¢æ”¯æŒå»¶é•·æš‘å‡ã€‚',
                        note: 'è¼¸å…¥å¾Œï¼Œç·´ç¿’æ¨¡çµ„æœƒæä¾›ç©ºç™½æ¨¡æ¿ï¼Œè«‹è‡ªè¡Œå¡«å¯«é—œéµäº®é»ã€‚',
                        moduleNote: 'ä¸‹æ–¹å„æ¨¡çµ„ç‚ºç©ºç™½æ¨¡æ¿ï¼Œè«‹åœ¨æ­¤æ•´ç†ä½ çš„è«–é»ã€åé§èˆ‡äº¤äº’å•é¡Œã€‚',
                        fallbackTitle: 'è‡ªè¨‚è¾¯è«–è­°é¡Œ',
                        structure: {
                            claim: 'åœ¨æ­¤è‰æ“¬ä½ çš„ä¸»å¼µï¼šä½ æƒ³è¦æˆç«‹çš„å‘½é¡Œæ˜¯ä»€éº¼ï¼Ÿ',
                            reason: 'åˆ—å‡ºèƒ½æ”¯æŒä¸»å¼µçš„æ ¸å¿ƒç†ç”±æˆ–åŸå‰‡ã€‚',
                            evidence: 'ç´€éŒ„ä½ æ‰“ç®—å¼•ç”¨çš„è­‰æ“šã€æ•¸æ“šæˆ–çœŸå¯¦æ¡ˆä¾‹ã€‚',
                            closing: 'å¯«ä¸‹ç¸½çµå¥ï¼Œé‡ç”³å°æ–¹è‹¥ä¸æ¥å—å°‡ä»˜å‡ºçš„ä»£åƒ¹ã€‚'
                        },
                        opponentPoints: [
                            'é å…ˆå¯«ä¸‹å°æ‰‹å¯èƒ½æå‡ºçš„åå°ç†ç”±æˆ–æ”»æ“Šç·šã€‚',
                            'æ¨™è¨˜ä½ éœ€è¦è£œå¼·çš„è³‡è¨Šæˆ–è³‡æ–™ä¾†æºã€‚',
                            'è¨˜éŒ„æº–å‚™åœ¨äº¤äº’è©°å•æ™‚è¿½å•çš„å•é¡Œã€‚'
                        ],
                        questions: [
                            'å°æ–¹æœ€å¯èƒ½è¿½å•çš„æ ¸å¿ƒç„¦é»æ˜¯ä»€éº¼ï¼Ÿ',
                            'æœ¬é¡Œé—œéµå­—å¦‚ä½•å®šç¾©æ‰æœ‰åˆ©æ–¼æˆ‘æ–¹ï¼Ÿ',
                            'è‹¥è¢«è³ªç–‘å½±éŸ¿åŠ›ï¼Œä½ æœƒæ€éº¼å›æ‡‰ï¼Ÿ',
                            'è‹¥è¢«è³ªç–‘å¯è¡Œæ€§ï¼Œä½ æœƒæ€éº¼å›æ‡‰ï¼Ÿ',
                            'æœ‰å“ªäº›åƒ¹å€¼è¡çªéœ€è¦å„ªå…ˆæ¾„æ¸…ï¼Ÿ',
                            'è‹¥å°æ–¹è¦æ±‚è­‰æ“šä¾†æºï¼Œä½ æœƒå¼•ç”¨ä»€éº¼è³‡æ–™ï¼Ÿ',
                            'ç•¶è¢«è¦æ±‚åšæ¬Šè¡¡æ™‚ï¼Œä½ çš„å„ªå…ˆé †åºæ˜¯ï¼Ÿ',
                            'å°æ–¹è‹¥æå‡ºæ›¿ä»£æ–¹æ¡ˆï¼Œä½ å¦‚ä½•æ¯”è¼ƒä¸¦å‹å‡ºï¼Ÿ'
                        ],
                        rebuttal: {
                            summary: 'å…ˆè‚¯å®šå°æ–¹äº®é» -> æŒ‡å‡ºæ¼æ´æˆ–ç›²é» -> æ‹‰å›æˆ‘æ–¹æ¡†æ¶æˆ–åƒ¹å€¼ã€‚',
                            tips: [
                                'è¨˜éŒ„æº–å‚™å¼•ç”¨çš„é—œéµå­—æˆ–é€å­—å¥ï¼Œæ–¹ä¾¿å£èªªæ™‚æèµ·ã€‚',
                                'å¯«ä¸‹å…©å€‹ä½ æœ€æƒ³åæ“Šçš„é‡é»ï¼Œä¸¦ç·´ç¿’ä¸€å¥è©±åˆ‡å…¥ã€‚'
                            ]
                        },
                        coach: {
                            score: 'å®Œæˆç·´ç¿’å¾Œï¼Œè«‹ç‚ºå…§å®¹ / åé§ / è¡¨é” / ç­–ç•¥å››å€‹é¢å‘æ‰“åˆ†ä¸¦å¯«ä¸‹ç†ç”±ã€‚',
                            tips: [
                                'ç°¡è¿°æœ¬æ¬¡äº®é»èˆ‡æƒ³æ”¹é€²ä¹‹è™•ï¼Œæ–¹ä¾¿ä¸‹ä¸€è¼ªèª¿æ•´ã€‚',
                                'è¨­å®šä¸‹ä¸€æ¬¡ç·´ç¿’çš„å…·é«”è¡Œå‹•ï¼Œä¾‹å¦‚è£œè³‡æ–™æˆ–é‡æ’æ¶æ§‹ã€‚'
                            ]
                        }
                    }
                },
                login: {
                    welcomeBack: 'æ­¡è¿å›ä¾†ï¼',
                    email: 'é›»å­éƒµä»¶',
                    emailPlaceholder: 'your@email.com',
                    password: 'å¯†ç¢¼',
                    passwordPlaceholder: 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢',
                    loginBtn: 'ç™»å…¥',
                    noAccount: 'é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ',
                    registerNow: 'ç«‹å³è¨»å†Š',
                    featureMultilingual: 'å¤šèªè¨€',
                    featureAI: 'AI é©…å‹•',
                    featurePersonalized: 'å€‹äººåŒ–'
                },
                signup: {
                    joinUs: 'åŠ å…¥æˆ‘å€‘',
                    startJourney: 'é–‹å§‹æ‚¨çš„ AI å­¸ç¿’ä¹‹æ—…',
                    signupDesc: 'è¨»å†Šå¸³è™Ÿï¼Œç«‹å³é«”é©—å¤šæ¨£åŒ–çš„ AI å­¸ç¿’åŠŸèƒ½',
                    email: 'é›»å­éƒµä»¶',
                    emailPlaceholder: 'your@email.com',
                    password: 'å¯†ç¢¼',
                    passwordPlaceholder: 'è‡³å°‘6å€‹å­—å…ƒ',
                    passwordHint: 'å¯†ç¢¼é•·åº¦è‡³å°‘éœ€è¦ 6 å€‹å­—å…ƒ',
                    signupBtn: 'å»ºç«‹å¸³è™Ÿ',
                    haveAccount: 'å·²æœ‰å¸³è™Ÿï¼Ÿ',
                    backToLogin: 'è¿”å›ç™»å…¥',
                    benefitsTitle: 'è¨»å†Šå³å¯äº«å—ï¼š',
                    benefitMultilingual: 'å¤šèªè¨€å­¸ç¿’',
                    benefitAITutor: 'AI åŠ©æ•™',
                    benefitTutoring: 'ä½œæ¥­è¼”å°',
                    benefitStorybook: 'ç¹ªæœ¬æœ—è®€'
                },
                myLearning: {
                    title: 'æˆ‘çš„å­¸ç¿’',
                    subtitle: 'æŸ¥çœ‹æ‚¨çš„å­¸ç¿’é€²åº¦ã€æ­·å²è¨˜éŒ„å’Œæ”¶è—',
                    loading: 'è¼‰å…¥ä¸­...',
                    stats: {
                        lessons: 'èª²ç¨‹',
                        stories: 'æ•…äº‹',
                        tutoring: 'ä½œæ¥­è¼”å°',
                        favorites: 'æ”¶è—'
                    },
                    tab: {
                        lessons: 'èª²ç¨‹è¨˜éŒ„',
                        stories: 'æ•…äº‹è¨˜éŒ„',
                        tutoring: 'ä½œæ¥­è¼”å°',
                        favorites: 'æˆ‘çš„æ”¶è—'
                    },
                    noLessons: 'é‚„æ²’æœ‰èª²ç¨‹è¨˜éŒ„',
                    noStories: 'é‚„æ²’æœ‰æ•…äº‹è¨˜éŒ„',
                    noTutoring: 'é‚„æ²’æœ‰ä½œæ¥­è¼”å°è¨˜éŒ„',
                    noFavorites: 'é‚„æ²’æœ‰æ”¶è—',
                    viewDetails: 'æŸ¥çœ‹è©³æƒ…',
                    delete: 'åˆªé™¤',
                    favorite: 'æ”¶è—',
                    unfavorite: 'å–æ¶ˆæ”¶è—',
                    createdOn: 'å‰µå»ºæ–¼',
                    subject: 'ç§‘ç›®',
                    topic: 'ä¸»é¡Œ',
                    ageGroup: 'å¹´é½¡çµ„',
                    lessonType: 'é¡å‹'
                }
            },
            'en': {
                main_title: 'LingoVerse AI', main_subtitle: 'Your AI Learning Universe',
                nav: { learningPlatform: 'Learning Platform', studentTutoring: 'Student Tutoring', storybookReading: 'Storybook Reading', aiTutor: 'AI Tutor', aiDoctor: 'AI Doctor', debateCoach: 'AI Debate Coach' },
                pageTitle: 'Multilingual Learning Platform', pageSubtitle: "Let's start today's learning adventure!", ageTitle: '1. Select Age',
                age_under_5: 'Under 5', age_6_10: '6-10 years', age_10_15: '10-15 years', age_15_20: '15-20 years', age_over_20: 'Over 20',
                subjectTitle: '2. Select Course Type', subjectKidsEn: "Kids' English", subjectAdultEn: "Adult English", subjectSci: 'Science', subjectMath: 'Math', subjectHist: 'History', subjectGeo: 'Geography',
                lessonTypeTitle: '3. Select Type',
                lessonType: { course: 'Course', story: 'Story', vocab: '5 Vocab & Sentences', qa: 'AI Q&A', dialogue: 'Dialogue' },
                topicTitle: '4. Select Topic', generateBtn: 'Generate Learning Plan', imageTitle: 'AI Generated Image', vocabTitle: 'Core Vocabulary', phraseTitle: 'Useful Phrases',
                topicCustomLabel: 'Custom Topic', topicCustomPlaceholder: 'Type a topic you want to learn', topicCustomOption: 'Custom topic', topicCustomError: 'Please enter your custom topic first.',
                lessonLangTabs: { en: 'English', 'zh-Hant': 'Chinese', vi: 'Vietnamese', ja: 'Japanese' },
                genAudio: 'Generate {lang} Audio',
                genAudioVariant: 'Generate {lang} Audio ({voice})',
                genDialogueAudio: 'Generate {lang} Dialogue Audio',
                downloadDialogueAudio: 'Download {lang} Dialogue Audio',
                voiceLabels: { female: 'Female Voice', male: 'Male Voice' },
                dialogueBadge: 'Dialogue',
                downloadAudio: 'Download {lang} Audio',
                phoneticLabel: 'Phonetic', exampleLabel: 'Example',
                downloadAudioBtn: 'Download Audio (WAV)', imageError: 'Image generation failed', audioError: 'Audio generation failed', lessonError: 'Lesson Generation Error: {message}',
                topics: {
                    'KidsEnglish': ['Animals', 'Family', 'Colors', 'Numbers', 'Food', 'Clothes', 'Body Parts', 'Weather', 'Emotions', 'School'],
                    'AdultEnglish': ['Business Meetings', 'Travel & Tourism', 'Ordering at a Restaurant', 'Job Interviews', 'Social Events', 'Health & Fitness', 'Technology & Internet', 'Shopping', 'News & Current Events', 'Movies & Music'],
                    'Science': ['Solar System', 'Photosynthesis', 'Water Cycle', 'Human Skeleton', 'States of Matter', 'Basic Circuits', 'Food Chain', 'Volcanoes & Earthquakes', 'Weather & Climate', 'Cell Structure'],
                    'Math': ['Addition & Subtraction', 'Multiplication & Division', 'Fractions', 'Geometric Shapes', 'Time', 'Money', 'Measurement', 'Charts & Data', 'Basic Algebra', 'Probability'],
                    'History': ['Chinese History', 'Vietnamese History', 'Ancient Egypt', 'Ancient Rome', 'The Renaissance', 'Age of Discovery', 'Industrial Revolution', 'World War I', 'World War II', 'Modern Tech History'],
                    'Geography': ['World Capitals', 'Famous Landmarks', 'Oceans & Continents', 'Mountain Ranges', 'Major Rivers', 'Deserts', 'Rainforests', 'Tectonic Plates', 'Climate Zones', 'Human Migration']
                },
                tutoring: {
                    title: 'Student Tutoring', subtitle: 'Upload a photo of homework, and the AI tutor will immediately analyze and guide you! Say goodbye to the hassle of checking homework.', startUploadBtn: 'Upload Homework Now',
                    uploadTitle: 'Upload Homework', dragDropText: 'Click or drag files here (upload 1-10 items at a time)', noFileSelected: 'No file selected',
                    levelLabel: 'Level', subjectLabel: 'Subject', languageLabel: 'Language', customSubjectLabel: 'Custom Subject', customSubjectPlaceholder: 'Enter subject name',
                    analyzeBtn: 'Start Analysis', conceptsTitle: 'Key Concepts', vocabTitle: 'Key Vocabulary', analysisTitle: 'Homework Analysis',
                    selectedCount: 'Selected {count} file(s) (max 10)',
                    noFileError: 'Please upload at least one file first.'
                },
                storybook: {
                    title: 'Storybook Reading', subtitle: 'Upload an image and let AI create a unique audio storybook for you! You can choose the language, age, style, and edit it freely.', startUploadBtn: 'Upload Illustration',
                    illustrationTitle: 'Illustration', dragDropText: 'Click or drag 1-10 images', settingsTitle: 'Story Settings',
                    languageLabel: 'Language', ageLabel: 'Age Group', styleLabel: 'Story Style', styleWarm: 'Heartwarming', styleAdventure: 'Adventure',
                    charNameLabel: 'Main Character Name (Optional)', charNamePlaceholder: 'e.g., Bonny the Bunny', generateBtn: 'Generate Story',
                    storyTitle: "AI's Creative Story", storyPlaceholder: 'Click "Generate Story" to begin...',
                    selectedCount: 'Selected {count} illustration(s) (max 10)',
                    noImageError: 'Please upload at least one illustration first.'
                },
                aiTutor: {
                    title: 'ğŸ¤– AI Tutor', subtitle: 'Ask our AI expert team about your childâ€™s learning & behavior.', inputLabel: 'â‘  Problem Input Area',
                    inputPlaceholder: 'Describe the learning or behavioral problems you observe in your child... (Supports multiple languages: Chinese/English/Vietnamese)',
                    categoryLabel: 'â‘¡ Select Problem Category', categories: { 'learning': 'Learning Methods', 'behavior': 'Behavioral Psychology', 'language': 'Language Development', 'emotion': 'Emotion Management', 'social': 'Social Skills', 'other': 'Other' },
                    expertLabel: 'â‘¢ Expert Personas Panel', getAdviceBtn: 'Get Advice',
                    summaryTitle: "{expertName}'s Summary & Questions", followupLabel: 'ğŸ¤” Follow-up Questions', followupPlaceholder: 'Or enter your next question here...', sendBtn: 'Send'
                },
                aiDoctor: {
                    title: 'ğŸ‘©â€âš•ï¸ AI Doctor', subtitle: "Describe symptoms and upload a photo (optional). Our professional AI team will provide a preliminary analysis.", 
                    symptomLabel: 'â‘  Symptom Description', symptomPlaceholder: "Please describe your symptoms in detail, e.g., headache, stomachache, fatigue...",
                    uploadLabel: 'â‘¡ Upload Photo (Optional)', uploadText: 'Upload photo of the affected area or medication (upload 1-10 images)',
                    expertLabel: 'â‘¢ Select AI Expert', getDiagnosisBtn: 'Get Preliminary Analysis',
                    selectedCount: 'Selected {count} photo(s) (max 10)',
                    noFileError: 'Please upload at least one photo first.'
                },
                debateCoach: {
                    title: 'AI Debate Coach',
                    subtitle: 'Help kids practise debate thinking and English expression with AI!',
                    settingsTitle: 'Practice Settings',
                    selectMotion: 'Choose a motion',
                    selectSide: 'Choose a side',
                    selectLevel: 'Choose a level',
                    settingsHint: 'Adjust the settings to load fresh mock content in the practice modules.',
                    sidePro: 'Pro',
                    sideCon: 'Con',
                    levelBeginner: 'Beginner',
                    levelAdvanced: 'Advanced',
                    practiceTitle: 'Practice Modules',
                    practiceSubtitle: 'Tap a module title to open the activities and tools',
                    motionLabel: 'Debate Motion',
                    hint_ai_en_eval: 'AI evaluates in English. If you respond in Chinese or another language, we will translate it into English before scoring.',
                    toggle_bilingual: 'Show bilingual motion',
                    badges: { timer: 'Timer only', record: 'Record + AI review' },
                    buttons: {
                        startTimer: 'Start (timer only)',
                        recordStart: 'Record & start',
                        stopRecording: 'Stop recording',
                        recordRebuttal: 'Record rebuttal',
                        recordCrossfire: 'Record answer',
                        recordFeedback: 'Record for scoring',
                        recordOral: 'Record & read aloud',
                        feedbackEvaluate: 'AI Coach Feedback',
                        showReference: 'Show reference script'
                    },
                    statuses: {
                        uploading: 'Uploadingâ€¦',
                        transcribing: 'Transcribing audioâ€¦',
                        evaluating: 'AI scoringâ€¦'
                    },
                    panels: {
                        logic: 'Logic & PEEL',
                        delivery: 'Delivery',
                        rewrite: 'Rewrite tip'
                    },
                    metrics: {
                        wpm: 'Words per minute',
                        fillers: 'Filler words',
                        pauses: 'Long pauses'
                    },
                    caseNotesLabel: 'Speech notes',
                    caseNotesPlaceholder: 'Capture your claim, examples, transitions, or reminders.',
                    progressLabel: 'Recording status',
                    resultPlaceholder: 'Run a recording to see AI feedback here.',
                    rebuttalResult: {
                        effectiveness: 'Rebuttal strength',
                        directness: 'Directness',
                        weighing: 'Suggested weighing sentence'
                    },
                    crossfireResult: {
                        directness: 'Direct answer?',
                        followup: 'Follow-up prompts',
                        language: 'Language issues'
                    },
                    feedbackExtras: {
                        audioLabel: 'Audio upload / recording',
                        scoresLabel: 'Score breakdown',
                        referenceToggle: 'Show reference script',
                        referenceHint: 'Here is a 30â€“60 second sample you can shadow.'
                    },
                    oral: {
                        title: 'Oral / Reading Lab (Beta)',
                        desc: 'Paste a script, record yourself reading, and let AI flag pacing or pronunciation issues.',
                        placeholder: 'Paste the speech or paragraph you want to practiseâ€¦',
                        btnRecord: 'Record & shadow',
                        btnStop: 'Stop recording',
                        resultPronunciation: 'Pronunciation / stumbles',
                        resultPacing: 'Pacing / pauses'
                    },
                    tooltips: {
                        case: 'Practise a 60-second case with PEEL guidance. Choose timer-only or record for AI scoring.',
                        rebuttal: 'Review opponent lines, record a rebuttal, and see where AI says you hit or miss.',
                        crossfire: 'Select up to three questions, record your crossfire replies, and get directness + follow-up tips.',
                        feedback: 'Paste or record a speech for Content / Refutation / Delivery / Strategy scores plus speaking metrics.',
                        oral: 'Read any script aloud; AI marks mispronunciations, fillers, and pacing so you can adjust.'
                    },
                    modules: {
                        case60s: '60-Second Case',
                        rebuttal: 'Rebuttal Sprint',
                        crossfire: 'Crossfire Builder',
                        feedback: 'AI Coach Feedback'
                    },
                    timerLabel: 'Countdown',
                    startTimer: 'Start',
                    resetTimer: 'Reset',
                    structureHeading: 'Case Structure',
                    structure: { claim: 'Claim', reason: 'Reason', evidence: 'Evidence', closing: 'Closing' },
                    practiceNote: 'Use the full minute to speak aloud and jot key points below.',
                    notesPlaceholder: 'Capture your outline or speaking notes here...',
                    opponentHeading: 'Simulated opponent points',
                    yourResponse: 'Your rebuttal',
                    evaluateBtn: 'AI Evaluation',
                    evaluationHeading: 'AI Feedback',
                    questionsHeading: 'Crossfire Question Bank',
                    questionsNote: 'Select up to three questions to practise answering.',
                    responseHeading: 'Response Draft',
                    responsePlaceholder: 'Write your answer strategy or bullet points...',
                    feedbackPrompt: 'Paste or draft your debate script',
                    feedbackPlaceholder: 'Drop your script here to receive a score and coaching tips...',
                    feedbackBtn: 'Score with AI Coach',
                    feedbackResultHeading: 'AI Coach Feedback',
                    rubricTitle: 'Debate Rubric',
                    rubric: {
                        content: 'Content',
                        refutation: 'Refutation',
                        delivery: 'Delivery',
                        strategy: 'Strategy',
                        total: 'Total'
                    },
                    rubricDescriptions: {
                        content: 'Content: Clear arguments supported by logic and evidence',
                        refutation: 'Refutation: Identify gaps in the opponentâ€™s case and answer persuasively',
                        delivery: 'Delivery: Natural pace, clear pronunciation, confident tone',
                        strategy: 'Strategy: Structured flow with solid time management',
                        total: 'Total (40 points possible)'
                    },
                    customMotion: {
                        option: 'Custom motion',
                        label: 'Set your own debate motion',
                        placeholder: 'Type the motion you want to practise, e.g., "This house supports extending the summer vacation."',
                        note: 'Once entered, the practice modules switch to blank templates so you can craft your own content.',
                        moduleNote: 'The modules below are blank templates - map out your case, rebuttals, and crossfire questions.',
                        fallbackTitle: 'Custom debate motion',
                        structure: {
                            claim: 'Draft your claim: What exactly do you want the judges to adopt?',
                            reason: 'List the core reasons or principles that make your claim compelling.',
                            evidence: 'Note the evidence, data, or case studies you plan to cite.',
                            closing: 'Write a closing that restates impact and the risk of rejecting your proposal.'
                        },
                        opponentPoints: [
                            'Brainstorm likely opponent pushes or counter-claims you expect to hear.',
                            'Flag facts or sources you still need to verify or strengthen.',
                            'Capture questions you want to ask during crossfire.'
                        ],
                        questions: [
                            'What is the single biggest issue the other side will press you on?',
                            'How can you define the key terms to keep the debate in your favour?',
                            'If impact is challenged, how will you defend its importance?',
                            'If feasibility is challenged, what proof will you provide?',
                            'Which value conflicts must you clarify first?',
                            'If pressed for sources, which reports or experts will you cite?',
                            'When forced to weigh harms and benefits, what is your priority order?',
                            'If an alternative plan appears, how will you compare and still win?'
                        ],
                        rebuttal: {
                            summary: 'Acknowledge what sounds strong -> expose the hole -> pull the debate back to your framing or value.',
                            tips: [
                                'Jot keywords or verbatim lines you plan to deliver so you can rehearse them aloud.',
                                'Write the two rebuttal punches you most want to land, then practise saying them in one sentence.'
                            ]
                        },
                        coach: {
                            score: 'After each run, score Content / Refutation / Delivery / Strategy and jot why.',
                            tips: [
                                'Summarise the highlights and the tweaks you want next time.',
                                'Set a concrete next step - e.g., gather data, rewrite structure, or refine timing.'
                            ]
                        }
                    }
                },
                login: {
                    welcomeBack: 'Welcome back!',
                    email: 'Email',
                    emailPlaceholder: 'your@email.com',
                    password: 'Password',
                    passwordPlaceholder: 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢',
                    loginBtn: 'Login',
                    noAccount: "Don't have an account?",
                    registerNow: 'Register now',
                    featureMultilingual: 'Multilingual',
                    featureAI: 'AI Powered',
                    featurePersonalized: 'Personalized'
                },
                signup: {
                    joinUs: 'Join Us',
                    startJourney: 'Start Your AI Learning Journey',
                    signupDesc: 'Register an account and experience diverse AI learning features',
                    email: 'Email',
                    emailPlaceholder: 'your@email.com',
                    password: 'Password',
                    passwordPlaceholder: 'At least 6 characters',
                    passwordHint: 'Password must be at least 6 characters long',
                    signupBtn: 'Create Account',
                    haveAccount: 'Already have an account?',
                    backToLogin: 'Back to Login',
                    benefitsTitle: 'Register to enjoy:',
                    benefitMultilingual: 'Multilingual Learning',
                    benefitAITutor: 'AI Tutor',
                    benefitTutoring: 'Homework Tutoring',
                    benefitStorybook: 'Storybook Reading'
                },
                myLearning: {
                    title: 'My Learning',
                    subtitle: 'View your learning progress, history, and favorites',
                    loading: 'Loading...',
                    stats: {
                        lessons: 'Lessons',
                        stories: 'Stories',
                        tutoring: 'Tutoring',
                        favorites: 'Favorites'
                    },
                    tab: {
                        lessons: 'Lesson History',
                        stories: 'Story History',
                        tutoring: 'Tutoring Sessions',
                        favorites: 'My Favorites'
                    },
                    noLessons: 'No lesson history yet',
                    noStories: 'No story history yet',
                    noTutoring: 'No tutoring sessions yet',
                    noFavorites: 'No favorites yet',
                    viewDetails: 'View Details',
                    delete: 'Delete',
                    favorite: 'Favorite',
                    unfavorite: 'Unfavorite',
                    createdOn: 'Created on',
                    subject: 'Subject',
                    topic: 'Topic',
                    ageGroup: 'Age Group',
                    lessonType: 'Type'
                }
            },
            'vi': {
                main_title: 'LingoVerse AI', main_subtitle: 'VÅ© trá»¥ há»c táº­p AI cá»§a báº¡n',
                nav: { learningPlatform: 'Ná»n táº£ng há»c táº­p', studentTutoring: 'Gia sÆ° há»c sinh', storybookReading: 'Äá»c truyá»‡n', aiTutor: 'Trá»£ lÃ½ AI', aiDoctor: 'BÃ¡c sÄ© AI', debateCoach: 'Huáº¥n luyá»‡n viÃªn tranh biá»‡n AI' },
                pageTitle: 'Ná»n táº£ng há»c táº­p Ä‘a ngÃ´n ngá»¯', pageSubtitle: 'HÃ£y báº¯t Ä‘áº§u cuá»™c phiÃªu lÆ°u há»c táº­p hÃ´m nay!', ageTitle: '1. Chá»n Ä‘á»™ tuá»•i',
                age_under_5: 'DÆ°á»›i 5 tuá»•i', age_6_10: '6-10 tuá»•i', age_10_15: '10-15 tuá»•i', age_15_20: '15-20 tuá»•i', age_over_20: 'TrÃªn 20 tuá»•i',
                subjectTitle: '2. Chá»n loáº¡i khÃ³a há»c', subjectKidsEn: 'Tiáº¿ng Anh tráº» em', subjectAdultEn: 'Tiáº¿ng Anh ngÆ°á»i lá»›n', subjectSci: 'Khoa há»c', subjectMath: 'ToÃ¡n há»c', subjectHist: 'Lá»‹ch sá»­', subjectGeo: 'Äá»‹a lÃ½',
                lessonTypeTitle: '3. Chá»n loáº¡i',
                lessonType: { course: 'KhÃ³a há»c', story: 'CÃ¢u chuyá»‡n', vocab: '5 tá»« vá»±ng & cÃ¢u', qa: 'Há»i Ä‘Ã¡p AI', dialogue: 'Äá»‘i thoáº¡i' },
                topicTitle: '4. Chá»n chá»§ Ä‘á»', generateBtn: 'Táº¡o káº¿ hoáº¡ch há»c táº­p', imageTitle: 'HÃ¬nh áº£nh do AI táº¡o', vocabTitle: 'Tá»« vá»±ng cá»‘t lÃµi', phraseTitle: 'Cá»¥m tá»« há»¯u Ã­ch',
                topicCustomLabel: 'Chá»§ Ä‘á» tá»± chá»n', topicCustomPlaceholder: 'Nháº­p chá»§ Ä‘á» báº¡n muá»‘n há»c', topicCustomOption: 'Tá»± Ä‘áº·t chá»§ Ä‘á»', topicCustomError: 'Vui lÃ²ng nháº­p chá»§ Ä‘á» tá»± chá»n trÆ°á»›c.',
                lessonLangTabs: { en: 'Tiáº¿ng Anh', 'zh-Hant': 'Tiáº¿ng Trung', vi: 'Tiáº¿ng Viá»‡t', ja: 'Tiáº¿ng Nháº­t' },
                genAudio: 'Táº¡o Ã¢m thanh {lang}',
                genAudioVariant: 'Táº¡o Ã¢m thanh {lang} ({voice})',
                genDialogueAudio: 'Táº¡o Ã¢m thanh há»™i thoáº¡i {lang}',
                downloadDialogueAudio: 'Táº£i Ã¢m thanh há»™i thoáº¡i {lang}',
                voiceLabels: { female: 'Giá»ng ná»¯', male: 'Giá»ng nam' },
                dialogueBadge: 'Há»™i thoáº¡i',
                downloadAudio: 'Táº£i xuá»‘ng Ã¢m thanh {lang}',
                phoneticLabel: 'PhiÃªn Ã¢m', exampleLabel: 'VÃ­ dá»¥',
                downloadAudioBtn: 'Táº£i xuá»‘ng Ã¢m thanh (WAV)', imageError: 'Táº¡o áº£nh tháº¥t báº¡i', audioError: 'Táº¡o Ã¢m thanh tháº¥t báº¡i', lessonError: 'Lá»—i táº¡o bÃ i há»c: {message}',
                topics: {
                    'KidsEnglish': ['Äá»™ng váº­t', 'Gia Ä‘Ã¬nh', 'MÃ u sáº¯c', 'Sá»‘', 'Thá»©c Äƒn', 'Quáº§n Ã¡o', 'CÃ¡c bá»™ pháº­n cÆ¡ thá»ƒ', 'Thá»i tiáº¿t', 'Cáº£m xÃºc', 'TrÆ°á»ng há»c'],
                    'AdultEnglish': ['Há»p kinh doanh', 'Du lá»‹ch', 'Äáº·t mÃ³n Äƒn', 'Phá»ng váº¥n xin viá»‡c', 'Sá»± kiá»‡n xÃ£ há»™i', 'Sá»©c khá»e', 'CÃ´ng nghá»‡', 'Mua sáº¯m', 'Tin tá»©c', 'Phim & Ã‚m nháº¡c'],
                    'Science': ['Há»‡ máº·t trá»i', 'Quang há»£p', 'VÃ²ng tuáº§n hoÃ n nÆ°á»›c', 'Bá»™ xÆ°Æ¡ng ngÆ°á»i', 'CÃ¡c tráº¡ng thÃ¡i váº­t cháº¥t', 'Máº¡ch Ä‘iá»‡n', 'Chuá»—i thá»©c Äƒn', 'NÃºi lá»­a', 'Thá»i tiáº¿t & KhÃ­ háº­u', 'Cáº¥u trÃºc táº¿ bÃ o'],
                    'Math': ['PhÃ©p cá»™ng vÃ  trá»«', 'PhÃ©p nhÃ¢n vÃ  chia', 'PhÃ¢n sá»‘', 'HÃ¬nh há»c', 'Thá»i gian', 'Tiá»n', 'Äo lÆ°á»ng', 'Biá»ƒu Ä‘á»“', 'Äáº¡i sá»‘', 'XÃ¡c suáº¥t'],
                    'History': ['Lá»‹ch sá»­ Trung Quá»‘c', 'Lá»‹ch sá»­ Viá»‡t Nam', 'Ai Cáº­p cá»• Ä‘áº¡i', 'La MÃ£ cá»• Ä‘áº¡i', 'Phá»¥c hÆ°ng', 'Thá»i Ä‘áº¡i khÃ¡m phÃ¡', 'CÃ¡ch máº¡ng cÃ´ng nghiá»‡p', 'Tháº¿ chiáº¿n I', 'Tháº¿ chiáº¿n II', 'Lá»‹ch sá»­ cÃ´ng nghá»‡'],
                    'Geography': ['Thá»§ Ä‘Ã´ tháº¿ giá»›i', 'Äá»‹a danh', 'Äáº¡i dÆ°Æ¡ng', 'DÃ£y nÃºi', 'SÃ´ng lá»›n', 'Sa máº¡c', 'Rá»«ng nhiá»‡t Ä‘á»›i', 'Máº£ng kiáº¿n táº¡o', 'VÃ¹ng khÃ­ háº­u', 'Di cÆ°']
                },
                tutoring: {
                    title: 'Gia sÆ° cho há»c sinh', subtitle: 'Táº£i áº£nh bÃ i táº­p lÃªn, trá»£ lÃ½ AI sáº½ phÃ¢n tÃ­ch vÃ  hÆ°á»›ng dáº«n báº¡n ngay láº­p tá»©c! Táº¡m biá»‡t ná»—i phiá»n toÃ¡i khi kiá»ƒm tra bÃ i táº­p.', startUploadBtn: 'Táº£i bÃ i táº­p lÃªn ngay',
                    uploadTitle: 'Táº£i bÃ i táº­p lÃªn', dragDropText: 'Nháº¥p hoáº·c kÃ©o tá»‡p vÃ o Ä‘Ã¢y (tá»‘i Ä‘a 1-10 tá»‡p má»—i láº§n)', noFileSelected: 'ChÆ°a chá»n tá»‡p',
                    levelLabel: 'Cáº¥p Ä‘á»™', subjectLabel: 'MÃ´n há»c', languageLabel: 'NgÃ´n ngá»¯', customSubjectLabel: 'MÃ´n há»c tÃ¹y chá»‰nh', customSubjectPlaceholder: 'Nháº­p tÃªn mÃ´n há»c',
                    analyzeBtn: 'Báº¯t Ä‘áº§u phÃ¢n tÃ­ch', conceptsTitle: 'KhÃ¡i niá»‡m chÃ­nh', vocabTitle: 'Tá»« vá»±ng trá»ng tÃ¢m', analysisTitle: 'PhÃ¢n tÃ­ch bÃ i táº­p',
                    selectedCount: 'ÄÃ£ chá»n {count} tá»‡p (tá»‘i Ä‘a 10)',
                    noFileError: 'Vui lÃ²ng táº£i lÃªn Ã­t nháº¥t má»™t tá»‡p trÆ°á»›c.'
                },
                storybook: {
                    title: 'Äá»c truyá»‡n', subtitle: 'Táº£i lÃªn má»™t hÃ¬nh áº£nh vÃ  Ä‘á»ƒ AI táº¡o ra má»™t cuá»‘n truyá»‡n cÃ³ Ã¢m thanh Ä‘á»™c Ä‘Ã¡o cho báº¡n! Báº¡n cÃ³ thá»ƒ chá»n ngÃ´n ngá»¯, Ä‘á»™ tuá»•i, phong cÃ¡ch vÃ  chá»‰nh sá»­a thoáº£i mÃ¡i.', startUploadBtn: 'Táº£i lÃªn hÃ¬nh minh há»a',
                    illustrationTitle: 'HÃ¬nh minh há»a', dragDropText: 'Nháº¥p hoáº·c kÃ©o 1-10 hÃ¬nh áº£nh', settingsTitle: 'CÃ i Ä‘áº·t truyá»‡n',
                    languageLabel: 'NgÃ´n ngá»¯', ageLabel: 'NhÃ³m tuá»•i', styleLabel: 'Phong cÃ¡ch truyá»‡n', styleWarm: 'áº¤m Ã¡p', styleAdventure: 'PhiÃªu lÆ°u',
                    charNameLabel: 'TÃªn nhÃ¢n váº­t chÃ­nh (TÃ¹y chá»n)', charNamePlaceholder: 'VÃ­ dá»¥: Thá» Bonny', generateBtn: 'Táº¡o truyá»‡n',
                    storyTitle: 'CÃ¢u chuyá»‡n sÃ¡ng táº¡o cá»§a AI', storyPlaceholder: 'Nháº¥p vÃ o "Táº¡o truyá»‡n" Ä‘á»ƒ báº¯t Ä‘áº§u...',
                    selectedCount: 'ÄÃ£ chá»n {count} hÃ¬nh minh há»a (tá»‘i Ä‘a 10)',
                    noImageError: 'Vui lÃ²ng táº£i lÃªn Ã­t nháº¥t má»™t hÃ¬nh minh há»a trÆ°á»›c.'
                },
                aiTutor: {
                    title: 'ğŸ¤– Trá»£ lÃ½ AI', subtitle: 'Há»i nhÃ³m chuyÃªn gia AI cá»§a chÃºng tÃ´i vá» cÃ¡c váº¥n Ä‘á» há»c táº­p vÃ  hÃ nh vi cá»§a con báº¡n.', inputLabel: 'â‘  Khu vá»±c nháº­p váº¥n Ä‘á»',
                    inputPlaceholder: 'MÃ´ táº£ cÃ¡c váº¥n Ä‘á» há»c táº­p hoáº·c hÃ nh vi báº¡n quan sÃ¡t Ä‘Æ°á»£c á»Ÿ con mÃ¬nh... (Há»— trá»£ nhiá»u ngÃ´n ngá»¯: Trung/Anh/Viá»‡t)',
                    categoryLabel: 'â‘¡ Chá»n loáº¡i váº¥n Ä‘á»', categories: { 'learning': 'PhÆ°Æ¡ng phÃ¡p há»c táº­p', 'behavior': 'TÃ¢m lÃ½ hÃ nh vi', 'language': 'PhÃ¡t triá»ƒn ngÃ´n ngá»¯', 'emotion': 'Quáº£n lÃ½ cáº£m xÃºc', 'social': 'Quan há»‡ xÃ£ há»™i', 'other': 'KhÃ¡c' },
                    expertLabel: 'â‘¢ Báº£ng Ä‘iá»u khiá»ƒn chuyÃªn gia AI', getAdviceBtn: 'Nháº­n lá»i khuyÃªn',
                    summaryTitle: 'TÃ³m táº¯t & cÃ¢u há»i cá»§a {expertName}', followupLabel: 'ğŸ¤” Há»i thÃªm', followupPlaceholder: 'Hoáº·c nháº­p cÃ¢u há»i tiáº¿p theo cá»§a báº¡n á»Ÿ Ä‘Ã¢y...', sendBtn: 'Gá»­i'
                },
                aiDoctor: {
                    title: 'ğŸ‘©â€âš•ï¸ BÃ¡c sÄ© AI', subtitle: 'MÃ´ táº£ cÃ¡c triá»‡u chá»©ng vÃ  táº£i áº£nh lÃªn (tÃ¹y chá»n). Äá»™i ngÅ© AI chuyÃªn nghiá»‡p cá»§a chÃºng tÃ´i sáº½ cung cáº¥p phÃ¢n tÃ­ch sÆ¡ bá»™.', 
                    symptomLabel: 'â‘  MÃ´ táº£ triá»‡u chá»©ng', symptomPlaceholder: 'Vui lÃ²ng mÃ´ táº£ chi tiáº¿t cÃ¡c triá»‡u chá»©ng cá»§a báº¡n, vÃ­ dá»¥: Ä‘au Ä‘áº§u, Ä‘au dáº¡ dÃ y, má»‡t má»i...',
                    uploadLabel: 'â‘¡ Táº£i áº£nh lÃªn (tÃ¹y chá»n)', uploadText: 'Táº£i lÃªn áº£nh vÃ¹ng bá»‹ áº£nh hÆ°á»Ÿng hoáº·c thuá»‘c (1-10 áº£nh má»—i láº§n)',
                    expertLabel: 'â‘¢ Chá»n chuyÃªn gia AI', getDiagnosisBtn: 'Nháº­n phÃ¢n tÃ­ch sÆ¡ bá»™',
                    selectedCount: 'ÄÃ£ chá»n {count} áº£nh (tá»‘i Ä‘a 10)',
                    noFileError: 'Vui lÃ²ng táº£i lÃªn Ã­t nháº¥t má»™t áº£nh.'
                },
                debateCoach: {
                    title: 'Huáº¥n luyá»‡n viÃªn tranh biá»‡n AI',
                    subtitle: 'GiÃºp tráº» luyá»‡n tÆ° duy tranh biá»‡n vÃ  diá»…n Ä‘áº¡t tiáº¿ng Anh cÃ¹ng AI!',
                    settingsTitle: 'Thiáº¿t láº­p luyá»‡n táº­p',
                    selectMotion: 'Chá»n Ä‘á» tÃ i tranh biá»‡n',
                    selectSide: 'Chá»n láº­p trÆ°á»ng',
                    selectLevel: 'Chá»n trÃ¬nh Ä‘á»™',
                    settingsHint: 'Thay Ä‘á»•i thiáº¿t láº­p Ä‘á»ƒ táº£i dá»¯ liá»‡u máº«u má»›i cho cÃ¡c mÃ´-Ä‘un luyá»‡n táº­p.',
                    sidePro: 'Phe á»§ng há»™',
                    sideCon: 'Phe pháº£n Ä‘á»‘i',
                    levelBeginner: 'CÆ¡ báº£n',
                    levelAdvanced: 'NÃ¢ng cao',
                    practiceTitle: 'CÃ¡c mÃ´-Ä‘un luyá»‡n táº­p',
                    practiceSubtitle: 'Nháº¥p tiÃªu Ä‘á» Ä‘á»ƒ má»Ÿ hoáº¡t Ä‘á»™ng vÃ  cÃ´ng cá»¥',
                    motionLabel: 'Äá» tÃ i tranh biá»‡n',
                    hint_ai_en_eval: 'AI sáº½ cháº¥m Ä‘iá»ƒm báº±ng tiáº¿ng Anh. Náº¿u báº¡n nháº­p tiáº¿ng Viá»‡t/Trung, há»‡ thá»‘ng sáº½ dá»‹ch sang tiáº¿ng Anh trÆ°á»›c khi cháº¥m.',
                    toggle_bilingual: 'Hiá»ƒn thá»‹ song ngá»¯ Trung/Anh',
                    badges: { timer: 'Chá»‰ Ä‘áº¿m giá»', record: 'Ghi Ã¢m + AI cháº¥m' },
                    buttons: {
                        startTimer: 'Báº¯t Ä‘áº§u (chá»‰ Ä‘áº¿m giá»)',
                        recordStart: 'Ghi Ã¢m & báº¯t Ä‘áº§u',
                        stopRecording: 'Dá»«ng ghi Ã¢m',
                        recordRebuttal: 'Ghi Ã¢m pháº£n biá»‡n',
                        recordCrossfire: 'Ghi Ã¢m tráº£ lá»i',
                        recordFeedback: 'Ghi Ã¢m Ä‘á»ƒ cháº¥m Ä‘iá»ƒm',
                        recordOral: 'Ghi Ã¢m luyá»‡n Ä‘á»c',
                        feedbackEvaluate: 'AI Coach cháº¥m Ä‘iá»ƒm',
                        showReference: 'Hiá»ƒn thá»‹ báº£n máº«u'
                    },
                    statuses: {
                        uploading: 'Äang táº£i lÃªnâ€¦',
                        transcribing: 'Äang chuyá»ƒn giá»ng nÃ³iâ€¦',
                        evaluating: 'AI Ä‘ang cháº¥mâ€¦'
                    },
                    panels: {
                        logic: 'Cáº¥u trÃºc láº­p luáº­n',
                        delivery: 'TrÃ¬nh bÃ y',
                        rewrite: 'Gá»£i Ã½ viáº¿t láº¡i'
                    },
                    metrics: {
                        wpm: 'Tá»« / phÃºt',
                        fillers: 'Tá»« Ä‘á»‡m',
                        pauses: 'Ngáº¯t quÃ¡ dÃ i'
                    },
                    caseNotesLabel: 'Ghi chÃº nÃ³i',
                    caseNotesPlaceholder: 'Liá»‡t kÃª luáº­n Ä‘iá»ƒm, vÃ­ dá»¥ vÃ  cÃ¢u káº¿t báº¡n muá»‘n nháº¥n máº¡nh.',
                    progressLabel: 'Tráº¡ng thÃ¡i ghi Ã¢m',
                    resultPlaceholder: 'Ghi Ã¢m Ä‘á»ƒ xem pháº£n há»“i AI táº¡i Ä‘Ã¢y.',
                    rebuttalResult: {
                        effectiveness: 'Hiá»‡u quáº£ pháº£n biá»‡n',
                        directness: 'Äá»™ trá»±c tiáº¿p',
                        weighing: 'CÃ¢u weighing gá»£i Ã½'
                    },
                    crossfireResult: {
                        directness: 'Tráº£ lá»i trá»±c tiáº¿p?',
                        followup: 'CÃ¢u há»i gá»£i Ã½ tiáº¿p theo',
                        language: 'Lá»—i diá»…n Ä‘áº¡t'
                    },
                    feedbackExtras: {
                        audioLabel: 'Táº£i / ghi Ã¢m',
                        scoresLabel: 'Thang Ä‘iá»ƒm',
                        referenceToggle: 'Hiá»ƒn thá»‹ báº£n Ä‘á»c máº«u',
                        referenceHint: 'Äoáº¡n máº«u 30â€“60 giÃ¢y Ä‘á»ƒ báº¡n Ä‘á»c theo.'
                    },
                    oral: {
                        title: 'Luyá»‡n Ä‘á»c / nÃ³i to (Beta)',
                        desc: 'DÃ¡n Ä‘oáº¡n vÄƒn, ghi Ã¢m Ä‘á»c to vÃ  Ä‘á»ƒ AI Ä‘Ã¡nh dáº¥u phÃ¡t Ã¢m, nhá»‹p Ä‘iá»‡u.',
                        placeholder: 'DÃ¡n Ä‘oáº¡n báº¡n muá»‘n luyá»‡n...',
                        btnRecord: 'Ghi Ã¢m luyá»‡n Ä‘á»c',
                        btnStop: 'Dá»«ng ghi Ã¢m',
                        resultPronunciation: 'PhÃ¡t Ã¢m / váº¥p',
                        resultPacing: 'Nhá»‹p / ngáº¯t'
                    },
                    tooltips: {
                        case: 'Luyá»‡n case 60 giÃ¢y vá»›i PEEL, cÃ³ thá»ƒ chá»‰ Ä‘áº¿m giá» hoáº·c ghi Ã¢m Ä‘á»ƒ AI cháº¥m.',
                        rebuttal: 'Xem luáº­n Ä‘iá»ƒm Ä‘á»‘i thá»§, ghi Ã¢m pháº£n biá»‡n vÃ  nháº­n Ä‘Ã¡nh giÃ¡ sá»©c náº·ng.',
                        crossfire: 'Chá»n tá»‘i Ä‘a 3 cÃ¢u há»i, ghi Ã¢m tráº£ lá»i Ä‘á»ƒ AI kiá»ƒm tra tÃ­nh trá»±c tiáº¿p vÃ  gá»£i Ã½ truy váº¥n.',
                        feedback: 'DÃ¡n hoáº·c ghi Ã¢m bÃ i nÃ³i Ä‘á»ƒ nháº­n Ä‘iá»ƒm Ná»™i dung/Pháº£n biá»‡n/TrÃ¬nh bÃ y/Chiáº¿n lÆ°á»£c cÃ¹ng chá»‰ sá»‘ nÃ³i.',
                        oral: 'Äá»c to Ä‘oáº¡n vÄƒn; AI Ä‘Ã¡nh dáº¥u lá»—i phÃ¡t Ã¢m, tá»« Ä‘á»‡m vÃ  nhá»‹p Ä‘á»ƒ báº¡n Ä‘iá»u chá»‰nh.'
                    },
                    modules: {
                        case60s: 'Case 60 giÃ¢y',
                        rebuttal: 'Pháº£n biá»‡n nhanh',
                        crossfire: 'XÃ¢y dá»±ng cháº¥t váº¥n',
                        feedback: 'Pháº£n há»“i tá»« AI Coach'
                    },
                    timerLabel: 'Äá»“ng há»“ Ä‘áº¿m ngÆ°á»£c',
                    startTimer: 'Báº¯t Ä‘áº§u',
                    resetTimer: 'Äáº·t láº¡i',
                    structureHeading: 'Cáº¥u trÃºc láº­p luáº­n',
                    structure: { claim: 'Luáº­n Ä‘á»', reason: 'LÃ½ do', evidence: 'Báº±ng chá»©ng', closing: 'Káº¿t luáº­n' },
                    practiceNote: 'HÃ£y nÃ³i to trong 60 giÃ¢y vÃ  ghi chÃº Ã½ chÃ­nh bÃªn dÆ°á»›i.',
                    notesPlaceholder: 'Ghi láº¡i dÃ n Ã½ hoáº·c Ã½ chÃ­nh táº¡i Ä‘Ã¢y...',
                    opponentHeading: 'Luáº­n Ä‘iá»ƒm Ä‘á»‘i thá»§ mÃ´ phá»ng',
                    yourResponse: 'Pháº£n biá»‡n cá»§a báº¡n',
                    evaluateBtn: 'AI Ä‘Ã¡nh giÃ¡',
                    evaluationHeading: 'Nháº­n xÃ©t cá»§a AI',
                    questionsHeading: 'NgÃ¢n hÃ ng cÃ¢u há»i cháº¥t váº¥n',
                    questionsNote: 'Chá»n tá»‘i Ä‘a ba cÃ¢u Ä‘á»ƒ luyá»‡n tráº£ lá»i.',
                    responseHeading: 'Báº£n nhÃ¡p tráº£ lá»i',
                    responsePlaceholder: 'Viáº¿t chiáº¿n lÆ°á»£c hoáº·c gáº¡ch Ä‘áº§u dÃ²ng tráº£ lá»i...',
                    feedbackPrompt: 'DÃ¡n hoáº·c soáº¡n bÃ i phÃ¡t biá»ƒu cá»§a báº¡n',
                    feedbackPlaceholder: 'Äáº·t bÃ i viáº¿t vÃ o Ä‘Ã¢y Ä‘á»ƒ AI cháº¥m Ä‘iá»ƒm vÃ  gá»£i Ã½ cáº£i thiá»‡n...',
                    feedbackBtn: 'AI cháº¥m Ä‘iá»ƒm',
                    feedbackResultHeading: 'Pháº£n há»“i tá»« AI Coach',
                    rubricTitle: 'Thang Ä‘Ã¡nh giÃ¡ tranh biá»‡n',
                    rubric: {
                        content: 'Ná»™i dung',
                        refutation: 'Pháº£n biá»‡n',
                        delivery: 'TrÃ¬nh bÃ y',
                        strategy: 'Chiáº¿n lÆ°á»£c',
                        total: 'Tá»•ng Ä‘iá»ƒm'
                    },
                    rubricDescriptions: {
                        content: 'Ná»™i dung: Luáº­n Ä‘iá»ƒm rÃµ rÃ ng, logic vÃ  cÃ³ báº±ng chá»©ng',
                        refutation: 'Pháº£n biá»‡n: Chá»‰ ra Ä‘iá»ƒm yáº¿u cá»§a Ä‘á»‘i thá»§ vÃ  pháº£n bÃ¡c thuyáº¿t phá»¥c',
                        delivery: 'TrÃ¬nh bÃ y: Tá»‘c Ä‘á»™ tá»± nhiÃªn, phÃ¡t Ã¢m rÃµ, tá»± tin',
                        strategy: 'Chiáº¿n lÆ°á»£c: Cáº¥u trÃºc máº¡ch láº¡c, quáº£n lÃ½ thá»i gian tá»‘t',
                        total: 'Tá»•ng Ä‘iá»ƒm (tá»‘i Ä‘a 40 Ä‘iá»ƒm)'
                    },
                    customMotion: {
                        option: 'Tá»± Ä‘áº·t chá»§ Ä‘á»',
                        label: 'Tá»± nháº­p Ä‘á» tÃ i tranh biá»‡n',
                        placeholder: 'Nháº­p Ä‘á» tÃ i báº¡n muá»‘n luyá»‡n, vÃ­ dá»¥: "Quá»‘c há»™i á»§ng há»™ kÃ©o dÃ i ká»³ nghá»‰ hÃ¨."',
                        note: 'Sau khi nháº­p, cÃ¡c mÃ´-Ä‘un luyá»‡n táº­p sáº½ chuyá»ƒn sang khung trá»‘ng Ä‘á»ƒ báº¡n tá»± xÃ¢y dá»±ng ná»™i dung.',
                        moduleNote: 'CÃ¡c mÃ´-Ä‘un bÃªn dÆ°á»›i lÃ  khung trá»‘ng, hÃ£y tá»± ghi láº¡i luáº­n Ä‘iá»ƒm, pháº£n biá»‡n vÃ  cÃ¢u há»i cháº¥t váº¥n.',
                        fallbackTitle: 'Äá» tÃ i tranh biá»‡n tá»± chá»n',
                        structure: {
                            claim: 'Viáº¿t luáº­n Ä‘á»: báº¡n muá»‘n thuyáº¿t phá»¥c ban giÃ¡m kháº£o Ä‘iá»u gÃ¬?',
                            reason: 'Liá»‡t kÃª nhá»¯ng lÃ½ do hoáº·c nguyÃªn táº¯c cá»‘t lÃµi giÃºp luáº­n Ä‘á» thuyáº¿t phá»¥c.',
                            evidence: 'Ghi chÃº sá»‘ liá»‡u, báº±ng chá»©ng hoáº·c vÃ­ dá»¥ thá»±c táº¿ sáº½ trÃ­ch dáº«n.',
                            closing: 'Soáº¡n cÃ¢u káº¿t nháº¥n máº¡nh tÃ¡c Ä‘á»™ng vÃ  rá»§i ro náº¿u Ä‘á» xuáº¥t bá»‹ bÃ¡c bá».'
                        },
                        opponentPoints: [
                            'Dá»± Ä‘oÃ¡n cÃ¡c láº­p luáº­n hoáº·c pháº£n cÃ´ng mÃ  Ä‘á»‘i thá»§ cÃ³ thá»ƒ sá»­ dá»¥ng.',
                            'ÄÃ¡nh dáº¥u nhá»¯ng thÃ´ng tin cáº§n kiá»ƒm chá»©ng hoáº·c bá»• sung nguá»“n.',
                            'Ghi láº¡i cÃ¡c cÃ¢u há»i muá»‘n dÃ¹ng trong pháº§n cháº¥t váº¥n.'
                        ],
                        questions: [
                            'Äá»‘i thá»§ sáº½ xoÃ¡y sÃ¢u vÃ o váº¥n Ä‘á» trá»ng tÃ¢m nÃ o nháº¥t?',
                            'Báº¡n sáº½ Ä‘á»‹nh nghÄ©a cÃ¡c tá»« khÃ³a tháº¿ nÃ o Ä‘á»ƒ cuá»™c tranh luáº­n cÃ³ lá»£i cho mÃ¬nh?',
                            'Náº¿u bá»‹ cháº¥t váº¥n vá» tÃ¡c Ä‘á»™ng, báº¡n sáº½ báº£o vá»‡ táº§m quan trá»ng ra sao?',
                            'Náº¿u bá»‹ há»i vá» tÃ­nh kháº£ thi, báº¡n Ä‘Æ°a báº±ng chá»©ng nÃ o?',
                            'Nhá»¯ng xung Ä‘á»™t giÃ¡ trá»‹ nÃ o cáº§n lÃ m rÃµ trÆ°á»›c?',
                            'Náº¿u bá»‹ Ä‘Ã²i nguá»“n, báº¡n sáº½ trÃ­ch dáº«n bÃ¡o cÃ¡o hay chuyÃªn gia nÃ o?',
                            'Khi pháº£i cÃ¢n Ä‘o lá»£i háº¡i, thá»© tá»± Æ°u tiÃªn cá»§a báº¡n lÃ  gÃ¬?',
                            'Náº¿u xuáº¥t hiá»‡n phÆ°Æ¡ng Ã¡n thay tháº¿, báº¡n sáº½ so sÃ¡nh Ä‘á»ƒ váº«n chiáº¿n tháº¯ng nhÆ° tháº¿ nÃ o?'
                        ],
                        rebuttal: {
                            summary: 'CÃ´ng nháº­n Ä‘iá»ƒm máº¡nh -> chá»‰ ra lá»— há»•ng -> kÃ©o cuá»™c tranh luáº­n vá» khung giÃ¡ trá»‹ cá»§a báº¡n.',
                            tips: [
                                'Ghi láº¡i tá»« khÃ³a hoáº·c cÃ¢u then chá»‘t Ä‘á»ƒ luyá»‡n nÃ³i to nhiá»u láº§n.',
                                'Viáº¿t hai Ä‘Ã²n pháº£n cÃ´ng quan trá»ng vÃ  táº­p nÃ³i gá»n trong má»™t cÃ¢u.'
                            ]
                        },
                        coach: {
                            score: 'Sau má»—i lÆ°á»£t, hÃ£y tá»± cháº¥m Ná»™i dung / Pháº£n biá»‡n / TrÃ¬nh bÃ y / Chiáº¿n lÆ°á»£c vÃ  ghi lÃ½ do.',
                            tips: [
                                'TÃ³m táº¯t Ä‘iá»ƒm máº¡nh vÃ  Ä‘iá»u muá»‘n cáº£i thiá»‡n cho láº§n káº¿ tiáº¿p.',
                                'Äáº·t má»¥c tiÃªu cá»¥ thá»ƒ cho láº§n luyá»‡n sau, vÃ­ dá»¥ bá»• sung dá»¯ liá»‡u hoáº·c Ä‘iá»u chá»‰nh cáº¥u trÃºc.'
                            ]
                        }
                    }
                },
                login: {
                    welcomeBack: 'ChÃ o má»«ng trá»Ÿ láº¡i!',
                    email: 'Email',
                    emailPlaceholder: 'your@email.com',
                    password: 'Máº­t kháº©u',
                    passwordPlaceholder: 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢',
                    loginBtn: 'ÄÄƒng nháº­p',
                    noAccount: 'ChÆ°a cÃ³ tÃ i khoáº£n?',
                    registerNow: 'ÄÄƒng kÃ½ ngay',
                    featureMultilingual: 'Äa ngÃ´n ngá»¯',
                    featureAI: 'AI Äiá»u khiá»ƒn',
                    featurePersonalized: 'CÃ¡ nhÃ¢n hÃ³a'
                },
                signup: {
                    joinUs: 'Tham gia cÃ¹ng chÃºng tÃ´i',
                    startJourney: 'Báº¯t Ä‘áº§u hÃ nh trÃ¬nh há»c AI cá»§a báº¡n',
                    signupDesc: 'ÄÄƒng kÃ½ tÃ i khoáº£n vÃ  tráº£i nghiá»‡m cÃ¡c tÃ­nh nÄƒng há»c AI Ä‘a dáº¡ng',
                    email: 'Email',
                    emailPlaceholder: 'your@email.com',
                    password: 'Máº­t kháº©u',
                    passwordPlaceholder: 'Ãt nháº¥t 6 kÃ½ tá»±',
                    passwordHint: 'Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±',
                    signupBtn: 'Táº¡o tÃ i khoáº£n',
                    haveAccount: 'ÄÃ£ cÃ³ tÃ i khoáº£n?',
                    backToLogin: 'Quay láº¡i Ä‘Äƒng nháº­p',
                    benefitsTitle: 'ÄÄƒng kÃ½ Ä‘á»ƒ táº­n hÆ°á»Ÿng:',
                    benefitMultilingual: 'Há»c Ä‘a ngÃ´n ngá»¯',
                    benefitAITutor: 'Gia sÆ° AI',
                    benefitTutoring: 'Gia sÆ° bÃ i táº­p',
                    benefitStorybook: 'Äá»c truyá»‡n tranh'
                },
                myLearning: {
                    title: 'Há»c táº­p cá»§a tÃ´i',
                    subtitle: 'Xem tiáº¿n Ä‘á»™ há»c táº­p, lá»‹ch sá»­ vÃ  má»¥c yÃªu thÃ­ch',
                    loading: 'Äang táº£i...',
                    stats: {
                        lessons: 'BÃ i há»c',
                        stories: 'CÃ¢u chuyá»‡n',
                        tutoring: 'Gia sÆ°',
                        favorites: 'YÃªu thÃ­ch'
                    },
                    tab: {
                        lessons: 'Lá»‹ch sá»­ bÃ i há»c',
                        stories: 'Lá»‹ch sá»­ cÃ¢u chuyá»‡n',
                        tutoring: 'PhiÃªn gia sÆ°',
                        favorites: 'Má»¥c yÃªu thÃ­ch'
                    },
                    noLessons: 'ChÆ°a cÃ³ lá»‹ch sá»­ bÃ i há»c',
                    noStories: 'ChÆ°a cÃ³ lá»‹ch sá»­ cÃ¢u chuyá»‡n',
                    noTutoring: 'ChÆ°a cÃ³ phiÃªn gia sÆ°',
                    noFavorites: 'ChÆ°a cÃ³ má»¥c yÃªu thÃ­ch',
                    viewDetails: 'Xem chi tiáº¿t',
                    delete: 'XÃ³a',
                    favorite: 'YÃªu thÃ­ch',
                    unfavorite: 'Bá» yÃªu thÃ­ch',
                    createdOn: 'Táº¡o vÃ o',
                    subject: 'MÃ´n há»c',
                    topic: 'Chá»§ Ä‘á»',
                    ageGroup: 'NhÃ³m tuá»•i',
                    lessonType: 'Loáº¡i'
                }
            },
            'ja': {
                main_title: 'LingoVerse AI', main_subtitle: 'ã‚ãªãŸã®AIå­¦ç¿’ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹',
                nav: { learningPlatform: 'å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ', studentTutoring: 'å­¦ç”ŸæŒ‡å°', storybookReading: 'çµµæœ¬æœ—èª­', aiTutor: 'AIãƒãƒ¥ãƒ¼ã‚¿ãƒ¼', aiDoctor: 'AIãƒ‰ã‚¯ã‚¿ãƒ¼', debateCoach: 'AIãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆã‚³ãƒ¼ãƒ' },
                pageTitle: 'å¤šè¨€èªå­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ', pageSubtitle: 'ä»Šæ—¥ã®å­¦ç¿’å†’é™ºã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼', ageTitle: '1. å¹´é½¢ã‚’é¸æŠ',
                age_under_5: '5æ­³ä»¥ä¸‹', age_6_10: '6-10æ­³', age_10_15: '10-15æ­³', age_15_20: '15-20æ­³', age_over_20: '20æ­³ä»¥ä¸Š',
                subjectTitle: '2. ã‚³ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ', subjectKidsEn: 'å­ä¾›å‘ã‘è‹±èª', subjectAdultEn: 'å¤§äººå‘ã‘è‹±èª', subjectSci: 'ç§‘å­¦', subjectMath: 'æ•°å­¦', subjectHist: 'æ­´å²', subjectGeo: 'åœ°ç†',
                lessonTypeTitle: '3. ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ',
                lessonType: { course: 'ã‚³ãƒ¼ã‚¹', story: 'ç‰©èª', vocab: '5ã¤ã®èªå½™ã¨ä¾‹æ–‡', qa: 'AIè³ªç–‘å¿œç­”', dialogue: 'å¯¾è©±' },
                topicTitle: '4. ãƒˆãƒ”ãƒƒã‚¯ã‚’é¸æŠ', generateBtn: 'å­¦ç¿’ãƒ—ãƒ©ãƒ³ã‚’ç”Ÿæˆ', imageTitle: 'AIç”Ÿæˆç”»åƒ', vocabTitle: 'ã‚³ã‚¢èªå½™', phraseTitle: 'ä¾¿åˆ©ãªãƒ•ãƒ¬ãƒ¼ã‚º',
                topicCustomLabel: 'ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ”ãƒƒã‚¯', topicCustomPlaceholder: 'å­¦ã³ãŸã„ãƒˆãƒ”ãƒƒã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', topicCustomOption: 'ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ”ãƒƒã‚¯', topicCustomError: 'ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ”ãƒƒã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
                lessonLangTabs: { en: 'è‹±èª', 'zh-Hant': 'ä¸­å›½èª', vi: 'ãƒ™ãƒˆãƒŠãƒ èª', ja: 'æ—¥æœ¬èª' },
                genAudio: '{lang}éŸ³å£°ã‚’ç”Ÿæˆ',
                genAudioVariant: '{lang}{voice}éŸ³å£°ã‚’ç”Ÿæˆ',
                genDialogueAudio: '{lang}å¯¾è©±éŸ³å£°ã‚’ç”Ÿæˆ',
                downloadDialogueAudio: '{lang}å¯¾è©±éŸ³å£°ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰',
                voiceLabels: { female: 'å¥³æ€§', male: 'ç”·æ€§' },
                dialogueBadge: 'å¯¾è©±',
                downloadAudio: '{lang}éŸ³å£°ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰',
                phoneticLabel: 'ç™ºéŸ³è¨˜å·', exampleLabel: 'ä¾‹æ–‡',
                downloadAudioBtn: 'éŸ³å£°ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ (WAV)', imageError: 'ç”»åƒç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ', audioError: 'éŸ³å£°ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ', lessonError: 'ãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {message}',
                topics: {
                    'KidsEnglish': ['å‹•ç‰©', 'å®¶æ—', 'è‰²', 'æ•°å­—', 'é£Ÿã¹ç‰©', 'æœ', 'ä½“ã®éƒ¨ä½', 'å¤©æ°—', 'æ„Ÿæƒ…', 'å­¦æ ¡'],
                    'AdultEnglish': ['ãƒ“ã‚¸ãƒã‚¹ä¼šè­°', 'æ—…è¡Œ', 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§ã®æ³¨æ–‡', 'é¢æ¥', 'ã‚¤ãƒ™ãƒ³ãƒˆ', 'å¥åº·', 'ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼', 'è²·ã„ç‰©', 'ãƒ‹ãƒ¥ãƒ¼ã‚¹', 'æ˜ ç”»ã¨éŸ³æ¥½'],
                    'Science': ['å¤ªé™½ç³»', 'å…‰åˆæˆ', 'æ°´ã®å¾ªç’°', 'äººä½“ã®éª¨æ ¼', 'ç‰©è³ªã®çŠ¶æ…‹', 'åŸºæœ¬å›è·¯', 'é£Ÿç‰©é€£é–', 'ç«å±±ã¨åœ°éœ‡', 'å¤©æ°—ã¨æ°—å€™', 'ç´°èƒã®æ§‹é€ '],
                    'Math': ['è¶³ã—ç®—ã¨å¼•ãç®—', 'æ›ã‘ç®—ã¨å‰²ã‚Šç®—', 'åˆ†æ•°', 'å¹¾ä½•å­¦', 'æ™‚é–“', 'ãŠé‡‘', 'æ¸¬å®š', 'ã‚°ãƒ©ãƒ•', 'ä»£æ•°', 'ç¢ºç‡'],
                    'History': ['ä¸­å›½ã®æ­´å²', 'ãƒ™ãƒˆãƒŠãƒ ã®æ­´å²', 'å¤ä»£ã‚¨ã‚¸ãƒ—ãƒˆ', 'å¤ä»£ãƒ­ãƒ¼ãƒ', 'ãƒ«ãƒã‚µãƒ³ã‚¹', 'å¤§èˆªæµ·æ™‚ä»£', 'ç”£æ¥­é©å‘½', 'ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ¦', 'ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ¦', 'ç¾ä»£æŠ€è¡“å²'],
                    'Geography': ['ä¸–ç•Œã®é¦–éƒ½', 'æœ‰åãªå ´æ‰€', 'æµ·æ´‹ã¨å¤§é™¸', 'å±±è„ˆ', 'ä¸»è¦ãªå·', 'ç ‚æ¼ ', 'ç†±å¸¯é›¨æ—', 'ãƒ—ãƒ¬ãƒ¼ãƒˆ', 'æ°—å€™å¸¯', 'äººé¡ã®ç§»å‹•']
                },
                tutoring: {
                    title: 'å­¦ç”ŸæŒ‡å°', subtitle: 'å®¿é¡Œã®å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€AIãƒãƒ¥ãƒ¼ã‚¿ãƒ¼ãŒã™ãã«åˆ†æã—ã¦æŒ‡å°ã—ã¾ã™ï¼å®¿é¡Œãƒã‚§ãƒƒã‚¯ã®ç…©ã‚ã—ã•ã‹ã‚‰è§£æ”¾ã•ã‚Œã¾ã—ã‚‡ã†ã€‚', startUploadBtn: 'å®¿é¡Œã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
                    uploadTitle: 'å®¿é¡Œã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰', dragDropText: 'ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã“ã“ã«ãƒ‰ãƒ©ãƒƒã‚°ï¼ˆ1ã€œ10ä»¶ã¾ã§ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½ï¼‰', noFileSelected: 'ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“',
                    levelLabel: 'ãƒ¬ãƒ™ãƒ«', subjectLabel: 'ç§‘ç›®', languageLabel: 'è¨€èª', customSubjectLabel: 'ã‚«ã‚¹ã‚¿ãƒ ç§‘ç›®', customSubjectPlaceholder: 'ç§‘ç›®åã‚’å…¥åŠ›',
                    analyzeBtn: 'åˆ†æã‚’é–‹å§‹', conceptsTitle: 'ä¸»è¦æ¦‚å¿µ', vocabTitle: 'é‡è¦èªå½™', analysisTitle: 'å®¿é¡Œã®åˆ†æ',
                    selectedCount: 'é¸æŠä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«æ•°: {count}ï¼ˆæœ€å¤§10ä»¶ï¼‰',
                    noFileError: 'å°‘ãªãã¨ã‚‚1ä»¶ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚'
                },
                storybook: {
                    title: 'çµµæœ¬æœ—èª­', subtitle: 'ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€AIã«ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚ªãƒ¼ãƒ‡ã‚£ã‚ªçµµæœ¬ã‚’ä½œæˆã•ã›ã¾ã—ã‚‡ã†ï¼è¨€èªã€å¹´é½¢ã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸æŠã—ã€è‡ªç”±ã«ç·¨é›†ã§ãã¾ã™ã€‚', startUploadBtn: 'ã‚¤ãƒ©ã‚¹ãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
                    illustrationTitle: 'ã‚¤ãƒ©ã‚¹ãƒˆ', dragDropText: '1ã€œ10æšã®ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°', settingsTitle: 'ç‰©èªã®è¨­å®š',
                    languageLabel: 'è¨€èª', ageLabel: 'å¹´é½¢å±¤', styleLabel: 'ç‰©èªã®ã‚¹ã‚¿ã‚¤ãƒ«', styleWarm: 'å¿ƒæ¸©ã¾ã‚‹', styleAdventure: 'å†’é™º',
                    charNameLabel: 'ä¸»äººå…¬ã®åå‰ï¼ˆä»»æ„ï¼‰', charNamePlaceholder: 'ä¾‹ï¼šã†ã•ãã®ãƒœãƒ‹ãƒ¼', generateBtn: 'ç‰©èªã‚’ç”Ÿæˆ',
                    storyTitle: 'AIã®å‰µä½œç‰©èª', storyPlaceholder: 'ã€Œç‰©èªã‚’ç”Ÿæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é–‹å§‹...',
                    selectedCount: 'é¸æŠä¸­ã®æŒ¿çµµ: {count} æš (æœ€å¤§10æš)',
                    noImageError: 'å°‘ãªãã¨ã‚‚1æšã®æŒ¿çµµã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚'
                },
                aiTutor: {
                    title: 'ğŸ¤– AIãƒãƒ¥ãƒ¼ã‚¿ãƒ¼', subtitle: 'ãŠå­æ§˜ã®å­¦ç¿’ã¨è¡Œå‹•ã«é–¢ã™ã‚‹å•é¡Œã‚’AIå°‚é–€å®¶ãƒãƒ¼ãƒ ã«ã”ç›¸è«‡ãã ã•ã„ã€‚', inputLabel: 'â‘  å•é¡Œå…¥åŠ›ã‚¨ãƒªã‚¢',
                    inputPlaceholder: 'ãŠå­æ§˜ã®å­¦ç¿’ã‚„è¡Œå‹•ã®å•é¡Œã‚’è©³ã—ãèª¬æ˜ã—ã¦ãã ã•ã„... (å¤šè¨€èªå¯¾å¿œï¼šä¸­å›½èª/è‹±èª/ãƒ™ãƒˆãƒŠãƒ èª)',
                    categoryLabel: 'â‘¡ å•é¡Œã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ', categories: { 'learning': 'å­¦ç¿’æ–¹æ³•', 'behavior': 'è¡Œå‹•å¿ƒç†', 'language': 'è¨€èªç™ºé”', 'emotion': 'æ„Ÿæƒ…ç®¡ç†', 'social': 'ç¤¾ä¼šçš„é–¢ä¿‚', 'other': 'ãã®ä»–' },
                    expertLabel: 'â‘¢ AIå°‚é–€å®¶ãƒ‘ãƒãƒ«', getAdviceBtn: 'ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å¾—ã‚‹',
                    summaryTitle: '{expertName}ã®ã¾ã¨ã‚ã¨è³ªå•', followupLabel: 'ğŸ¤” è¿½åŠ è³ªå•', followupPlaceholder: 'ã¾ãŸã¯ã€æ¬¡ã®è³ªå•ã‚’ã“ã“ã«å…¥åŠ›ã—ã¦ãã ã•ã„...', sendBtn: 'é€ä¿¡'
                },
                aiDoctor: {
                    title: 'ğŸ‘©â€âš•ï¸ AIãƒ‰ã‚¯ã‚¿ãƒ¼', subtitle: 'ç—‡çŠ¶ã‚’èª¬æ˜ã—ã€å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰ã€‚å°‚é–€ã®AIãƒãƒ¼ãƒ ãŒä¸€æ¬¡åˆ†æã‚’æä¾›ã—ã¾ã™ã€‚', 
                    symptomLabel: 'â‘  ç—‡çŠ¶ã®èª¬æ˜', symptomPlaceholder: 'ç—‡çŠ¶ã‚’è©³ã—ãèª¬æ˜ã—ã¦ãã ã•ã„ã€‚ä¾‹ï¼šé ­ç—›ã€èƒƒç—›ã€ç–²åŠ´...',
                    uploadLabel: 'â‘¡ å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆä»»æ„ï¼‰', uploadText: 'æ‚£éƒ¨ã‚„è–¬ã®å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆ1ã€œ10æšã¾ã§ï¼‰',
                    expertLabel: 'â‘¢ AIå°‚é–€å®¶ã‚’é¸æŠ', getDiagnosisBtn: 'ä¸€æ¬¡åˆ†æã‚’å—ã‘ã‚‹',
                    selectedCount: 'é¸æŠä¸­ã®å†™çœŸ: {count} æš (æœ€å¤§10æš)',
                    noFileError: 'å°‘ãªãã¨ã‚‚1æšã®å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚'
                },
                debateCoach: {
                    title: 'AIãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆã‚³ãƒ¼ãƒ',
                    subtitle: 'AIã¨ä¸€ç·’ã«ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆæ€è€ƒã¨è‹±èªè¡¨ç¾åŠ›ã‚’é›ãˆã¾ã—ã‚‡ã†ï¼',
                    settingsTitle: 'ç·´ç¿’è¨­å®š',
                    selectMotion: 'è«–é¡Œã‚’é¸æŠ',
                    selectSide: 'ç«‹å ´ã‚’é¸æŠ',
                    selectLevel: 'ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠ',
                    settingsHint: 'è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã¨ã€ä¸‹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå¯¾å¿œã™ã‚‹ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°ã•ã‚Œã¾ã™ã€‚',
                    sidePro: 'è‚¯å®šå´',
                    sideCon: 'å¦å®šå´',
                    levelBeginner: 'åˆç´š',
                    levelAdvanced: 'ä¸Šç´š',
                    practiceTitle: 'ç·´ç¿’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«',
                    practiceSubtitle: 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å†…å®¹ã¨ãƒ„ãƒ¼ãƒ«ã‚’è¡¨ç¤º',
                    motionLabel: 'è«–é¡Œè¡¨ç¤º',
                    hint_ai_en_eval: 'AIã¯è‹±èªã§è©•ä¾¡ã—ã¾ã™ã€‚æ—¥æœ¬èªã‚„ä¸­å›½èªã§å…¥åŠ›ã—ãŸå ´åˆã¯è‹±è¨³ã—ã¦ã‹ã‚‰æ¡ç‚¹ã—ã¾ã™ã€‚',
                    toggle_bilingual: 'ä¸­è‹±å¯¾ç…§ã‚’è¡¨ç¤º',
                    badges: { timer: 'ã‚¿ã‚¤ãƒãƒ¼ã®ã¿', record: 'éŒ²éŸ³+AIè©•ä¾¡' },
                    buttons: {
                        startTimer: 'é–‹å§‹ï¼ˆã‚¿ã‚¤ãƒãƒ¼ã®ã¿ï¼‰',
                        recordStart: 'éŒ²éŸ³ã—ã¦é–‹å§‹',
                        stopRecording: 'éŒ²éŸ³ã‚’åœæ­¢',
                        recordRebuttal: 'åè«–ã‚’éŒ²éŸ³',
                        recordCrossfire: 'å›ç­”ã‚’éŒ²éŸ³',
                        recordFeedback: 'éŒ²éŸ³ã—ã¦æ¡ç‚¹',
                        recordOral: 'éŒ²éŸ³ã—ã¦æœ—èª­',
                        feedbackEvaluate: 'AIã‚³ãƒ¼ãƒæ¡ç‚¹',
                        showReference: 'å‚è€ƒåŸç¨¿ã‚’è¡¨ç¤º'
                    },
                    statuses: {
                        uploading: 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­â€¦',
                        transcribing: 'æ–‡å­—èµ·ã“ã—ä¸­â€¦',
                        evaluating: 'AIè©•ä¾¡ä¸­â€¦'
                    },
                    panels: {
                        logic: 'è«–ç†æ§‹æˆ',
                        delivery: 'ã‚¹ãƒ”ãƒ¼ãƒ',
                        rewrite: 'æ›¸ãæ›ãˆææ¡ˆ'
                    },
                    metrics: {
                        wpm: 'èª/åˆ†',
                        fillers: 'ãƒ•ã‚£ãƒ©ãƒ¼ãƒ¯ãƒ¼ãƒ‰',
                        pauses: 'é•·ã„ãƒãƒ¼ã‚º'
                    },
                    caseNotesLabel: 'ã‚¹ãƒ”ãƒ¼ãƒãƒ¡ãƒ¢',
                    caseNotesPlaceholder: 'ä¸»å¼µãƒ»ä¾‹ãƒ»ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ã®ãƒ¡ãƒ¢ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚',
                    progressLabel: 'éŒ²éŸ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹',
                    resultPlaceholder: 'éŒ²éŸ³ã™ã‚‹ã¨ã“ã“ã«AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚',
                    rebuttalResult: {
                        effectiveness: 'åè«–ã®å¼·åº¦',
                        directness: 'ç›´æ¥æ€§',
                        weighing: 'æ¨å¥¨ã‚¦ã‚§ã‚¤ã‚¤ãƒ³ã‚°æ–‡'
                    },
                    crossfireResult: {
                        directness: 'ç›´æ¥å›ç­”ï¼Ÿ',
                        followup: 'è¿½è³ªå•ã®ææ¡ˆ',
                        language: 'è¨€ã„å›ã—ã®å•é¡Œ'
                    },
                    feedbackExtras: {
                        audioLabel: 'éŸ³å£°ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰/éŒ²éŸ³',
                        scoresLabel: 'ã‚¹ã‚³ã‚¢å†…è¨³',
                        referenceToggle: 'å‚è€ƒåŸç¨¿ã‚’è¡¨ç¤º',
                        referenceHint: '30ã€œ60ç§’ã®ã‚µãƒ³ãƒ—ãƒ«åŸç¨¿ã§ã™ã€‚ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã«ä½¿ãˆã¾ã™ã€‚'
                    },
                    oral: {
                        title: 'éŸ³èª­ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆãƒ™ãƒ¼ã‚¿ï¼‰',
                        desc: 'åŸç¨¿ã‚’è²¼ã‚Šä»˜ã‘ã¦éŒ²éŸ³ã™ã‚‹ã¨ã€AIãŒç™ºéŸ³ã‚„é–“ã®å•é¡Œã‚’æŒ‡æ‘˜ã—ã¾ã™ã€‚',
                        placeholder: 'ç·´ç¿’ã—ãŸã„åŸç¨¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„...',
                        btnRecord: 'éŒ²éŸ³ã—ã¦æœ—èª­',
                        btnStop: 'éŒ²éŸ³ã‚’åœæ­¢',
                        resultPronunciation: 'ç™ºéŸ³ / ã¤ã‹ãˆ',
                        resultPacing: 'ãƒªã‚ºãƒ  / é–“'
                    },
                    tooltips: {
                        case: 'PEELæ§‹é€ ã§60ç§’ã®ã‚±ãƒ¼ã‚¹ã‚’ç·´ç¿’ã€‚ã‚¿ã‚¤ãƒãƒ¼ã®ã¿ã‹éŒ²éŸ³+AIè©•ä¾¡ã‚’é¸ã¹ã¾ã™ã€‚',
                        rebuttal: 'ç›¸æ‰‹ã®è«–ç‚¹ã‚’èª­ã¿ã€éŒ²éŸ³ã—ã¦åè«–ã€‚AIãŒå¼·ã¿ã¨ä¸è¶³ã‚’ç¤ºã—ã¾ã™ã€‚',
                        crossfire: 'æœ€å¤§3å•ã‚’é¸ã‚“ã§å›ç­”ã‚’éŒ²éŸ³ã—ã€ç›´æ¥æ€§ã‚„è¿½è³ªå•ã®ãƒ’ãƒ³ãƒˆã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚',
                        feedback: 'åŸç¨¿ã‚’è²¼ã‚‹ã‹éŒ²éŸ³ã™ã‚‹ã¨ã€å†…å®¹/åè«–/è¡¨ç¾/æˆ¦ç•¥ã¨è©±é€ŸæŒ‡æ¨™ã®è©•ä¾¡ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚',
                        oral: 'ã©ã‚“ãªåŸç¨¿ã§ã‚‚éŸ³èª­ã—ã€AIãŒç™ºéŸ³ãƒ»ãƒ•ã‚£ãƒ©ãƒ¼ãƒ»é–“ã®èª²é¡Œã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¾ã™ã€‚'
                    },
                    modules: {
                        case60s: '60ç§’ã‚¹ãƒ”ãƒ¼ãƒ',
                        rebuttal: 'ãƒªãƒãƒƒã‚¿ãƒ«ã‚¹ãƒ—ãƒªãƒ³ãƒˆ',
                        crossfire: 'ã‚¯ãƒ­ã‚¹ãƒ•ã‚¡ã‚¤ã‚¢ãƒ“ãƒ«ãƒ€ãƒ¼',
                        feedback: 'AIã‚³ãƒ¼ãƒãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯'
                    },
                    timerLabel: 'ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³',
                    startTimer: 'ã‚¹ã‚¿ãƒ¼ãƒˆ',
                    resetTimer: 'ãƒªã‚»ãƒƒãƒˆ',
                    structureHeading: 'ç«‹è«–æ§‹æˆ',
                    structure: { claim: 'ä¸»å¼µ', reason: 'ç†ç”±', evidence: 'æ ¹æ‹ ', closing: 'ã¾ã¨ã‚' },
                    practiceNote: '60ç§’é–“ã—ã£ã‹ã‚Šå£°ã«å‡ºã—ã¦ç·´ç¿’ã—ã€ä¸‹ã«é‡è¦ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ¡ãƒ¢ã—ã¾ã—ã‚‡ã†ã€‚',
                    notesPlaceholder: 'ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚„é‡è¦ãƒã‚¤ãƒ³ãƒˆã‚’ã“ã“ã«è¨˜éŒ²...',
                    opponentHeading: 'æƒ³å®šã•ã‚Œã‚‹ç›¸æ‰‹ã®è«–ç‚¹',
                    yourResponse: 'è‡ªåˆ†ã®åè«–',
                    evaluateBtn: 'AIè©•ä¾¡',
                    evaluationHeading: 'AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯',
                    questionsHeading: 'ã‚¯ãƒ­ã‚¹ãƒ•ã‚¡ã‚¤ã‚¢è³ªå•é›†',
                    questionsNote: 'æœ€å¤§3å•ã¾ã§é¸ã‚“ã§å›ç­”ç·´ç¿’ãŒã§ãã¾ã™ã€‚',
                    responseHeading: 'å›ç­”ãƒ¡ãƒ¢',
                    responsePlaceholder: 'å›ç­”ã®æˆ¦ç•¥ã‚„è¦ç‚¹ã‚’æ›¸ãã¾ã—ã‚‡ã†...',
                    feedbackPrompt: 'åŸç¨¿ã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã‹å…¥åŠ›ã—ã¦ãã ã•ã„',
                    feedbackPlaceholder: 'ã“ã“ã«åŸç¨¿ã‚’å…¥åŠ›ã™ã‚‹ã¨AIãŒå¾—ç‚¹ã¨æ”¹å–„ææ¡ˆã‚’è¿”ã—ã¾ã™...',
                    feedbackBtn: 'AIæ¡ç‚¹',
                    feedbackResultHeading: 'AIã‚³ãƒ¼ãƒã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯',
                    rubricTitle: 'ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆè©•ä¾¡åŸºæº–',
                    rubric: {
                        content: 'å†…å®¹',
                        refutation: 'åè«–',
                        delivery: 'è¡¨ç¾',
                        strategy: 'æˆ¦ç•¥',
                        total: 'åˆè¨ˆ'
                    },
                    rubricDescriptions: {
                        content: 'å†…å®¹ï¼šä¸»å¼µãŒæ˜ç¢ºã§ã€è«–ç†ã¨æ ¹æ‹ ãŒæƒã£ã¦ã„ã‚‹',
                        refutation: 'åè«–ï¼šç›¸æ‰‹ã®å¼±ç‚¹ã‚’æŒ‡æ‘˜ã—ã€èª¬å¾—åŠ›ã‚ã‚‹åè«–ã‚’ç¤ºã™',
                        delivery: 'è¡¨ç¾ï¼šè‡ªç„¶ãªè©±é€Ÿã§ã€ç™ºéŸ³ãŒæ˜ç­ã§ã€è‡ªä¿¡ã®ã‚ã‚‹å£°',
                        strategy: 'æˆ¦ç•¥ï¼šæ§‹æˆãŒæ•´ã£ã¦ãŠã‚Šã€æ™‚é–“é…åˆ†ãŒè‰¯ã„',
                        total: 'åˆè¨ˆï¼ˆ40ç‚¹æº€ç‚¹ï¼‰'
                    },
                    customMotion: {
                        option: 'ã‚«ã‚¹ã‚¿ãƒ è«–é¡Œ',
                        label: 'ç‹¬è‡ªã®ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆè«–é¡Œã‚’å…¥åŠ›',
                        placeholder: 'ç·´ç¿’ã—ãŸã„è«–é¡Œã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šã€Œæœ¬é™¢ã¯å¤ä¼‘ã¿ã®å»¶é•·ã‚’æ”¯æŒã™ã‚‹ã€ï¼‰ã€‚',
                        note: 'å…¥åŠ›ã™ã‚‹ã¨ä¸‹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒç©ºã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ãªã‚Šã€è‡ªç”±ã«å†…å®¹ã‚’ä½œã‚Šè¾¼ã‚ã¾ã™ã€‚',
                        moduleNote: 'ä»¥ä¸‹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ç©ºã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚ä¸»å¼µãƒ»åè«–ãƒ»ã‚¯ãƒ­ã‚¹ãƒ•ã‚¡ã‚¤ã‚¢ã®è³ªå•ã‚’è‡ªç”±ã«æ›¸ãè¾¼ã¿ã¾ã—ã‚‡ã†ã€‚',
                        fallbackTitle: 'ã‚«ã‚¹ã‚¿ãƒ è«–é¡Œ',
                        structure: {
                            claim: 'ã‚ãªãŸã®ä¸»å¼µã‚’ã¾ã¨ã‚ã¾ã—ã‚‡ã†ã€‚å¯©æŸ»å“¡ã«ä½•ã‚’èªã‚ã¦ã»ã—ã„ã§ã™ã‹ï¼Ÿ',
                            reason: 'ä¸»å¼µã‚’æ”¯ãˆã‚‹é‡è¦ãªç†ç”±ã‚„åŸå‰‡ã‚’æ›¸ãå‡ºã—ã¦ãã ã•ã„ã€‚',
                            evidence: 'å¼•ç”¨ã—ãŸã„è¨¼æ‹ ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ»äº‹ä¾‹ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚',
                            closing: 'çµè«–ã§å¼·èª¿ã—ãŸã„å½±éŸ¿ã‚„ã€æ¡æŠã—ãªã„å ´åˆã®ãƒªã‚¹ã‚¯ã‚’æ›¸ãç•™ã‚ã¦ãã ã•ã„ã€‚'
                        },
                        opponentPoints: [
                            'ç›¸æ‰‹ãŒè¨€ã„ãã†ãªåè«–ã‚„è¿½åŠãƒã‚¤ãƒ³ãƒˆã‚’äº‹å‰ã«æ´—ã„å‡ºã—ã¾ã—ã‚‡ã†ã€‚',
                            'è£ä»˜ã‘ãŒå¼±ã„éƒ¨åˆ†ã‚„è¿½åŠ ã§èª¿ã¹ãŸã„æƒ…å ±ã«å°ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚',
                            'ã‚¯ãƒ­ã‚¹ãƒ•ã‚¡ã‚¤ã‚¢ã§æŠ•ã’ã‹ã‘ãŸã„è³ªå•ã‚’æ§ãˆã¦ãŠãã¾ã—ã‚‡ã†ã€‚'
                        ],
                        questions: [
                            'ç›¸æ‰‹ãŒæœ€ã‚‚æ”»ã‚ã¦ããã†ãªè«–ç‚¹ã¯ä½•ã§ã™ã‹ï¼Ÿ',
                            'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã©ã†å®šç¾©ã™ã‚Œã°è­°è«–ã®ä¸»å°æ¨©ã‚’æ¡ã‚Œã¾ã™ã‹ï¼Ÿ',
                            'å½±éŸ¿ã‚’ç–‘ã‚ã‚ŒãŸã¨ãã€ã©ã®ã‚ˆã†ã«é‡è¦æ€§ã‚’å®ˆã‚Šã¾ã™ã‹ï¼Ÿ',
                            'å®Ÿç¾æ€§ã‚’å•ã‚ã‚ŒãŸã¨ãã€ã©ã®ã‚ˆã†ãªè¨¼æ‹ ã‚’ç¤ºã—ã¾ã™ã‹ï¼Ÿ',
                            'ä¾¡å€¤è¦³ã®è¡çªãŒã‚ã‚‹ãªã‚‰ã€ä½•ã‹ã‚‰å…ˆã«æ•´ç†ã—ã¾ã™ã‹ï¼Ÿ',
                            'æ ¹æ‹ ã‚’è¦æ±‚ã•ã‚ŒãŸå ´åˆã€ã©ã®è³‡æ–™ã‚„å°‚é–€å®¶ã‚’å¼•ç”¨ã—ã¾ã™ã‹ï¼Ÿ',
                            'åˆ©ç›Šã¨ä¸åˆ©ç›Šã‚’æ¯”è¼ƒã™ã‚‹ã¨ãã€å„ªå…ˆé †ä½ã¯ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ',
                            'ä»£æ›¿æ¡ˆã‚’æç¤ºã•ã‚ŒãŸã‚‰ã€ã©ã†æ¯”è¼ƒã—ã¦å„ªä½æ€§ã‚’ä¿ã¡ã¾ã™ã‹ï¼Ÿ'
                        ],
                        rebuttal: {
                            summary: 'å¼·ã¿ã‚’èªã‚ã‚‹ -> ç©´ã‚„çŸ›ç›¾ã‚’ç¤ºã™ -> è­°è«–ã‚’è‡ªåˆ†ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ»ä¾¡å€¤ã¸å¼•ãæˆ»ã™ã€‚',
                            tips: [
                                'å£é ­ã§ä½¿ã„ãŸã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„ã‚»ãƒªãƒ•ã‚’ãƒ¡ãƒ¢ã—ã€ç¹°ã‚Šè¿”ã—å£°ã«å‡ºã—ã¦ç·´ç¿’ã—ã¾ã—ã‚‡ã†ã€‚',
                                'ç‰¹ã«å©ããŸã„è«–ç‚¹ã‚’äºŒã¤æ±ºã‚ã€ä¸€æ–‡ã§ç´ æ—©ãåˆ‡ã‚Šè¾¼ã‚€ç·´ç¿’ã‚’ã—ã¾ã—ã‚‡ã†ã€‚'
                            ]
                        },
                        coach: {
                            score: 'æ¯å›ã®ç·´ç¿’å¾Œã«ã€Œå†…å®¹ãƒ»åè«–ãƒ»è¡¨ç¾ãƒ»æˆ¦ç•¥ã€ã‚’è‡ªå·±æ¡ç‚¹ã—ã€ãã®ç†ç”±ã‚’æ›¸ãæ®‹ã—ã¾ã—ã‚‡ã†ã€‚',
                            tips: [
                                'ä»Šå›ã®è‰¯ã‹ã£ãŸç‚¹ã¨ã€æ¬¡å›æ”¹å–„ã—ãŸã„ç‚¹ã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã¾ã—ã‚‡ã†ã€‚',
                                'æ¬¡å›ã®å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆè³‡æ–™åé›†ãƒ»æ§‹æˆã®è¦‹ç›´ã—ãƒ»ã‚¿ã‚¤ãƒ ç®¡ç†ã®èª¿æ•´ãªã©ï¼‰ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚'
                            ]
                        }
                    }
                },
                login: {
                    welcomeBack: 'ãŠã‹ãˆã‚Šãªã•ã„ï¼',
                    email: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
                    emailPlaceholder: 'your@email.com',
                    password: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
                    passwordPlaceholder: 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢',
                    loginBtn: 'ãƒ­ã‚°ã‚¤ãƒ³',
                    noAccount: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„ã§ã™ã‹ï¼Ÿ',
                    registerNow: 'ä»Šã™ãç™»éŒ²',
                    featureMultilingual: 'å¤šè¨€èª',
                    featureAI: 'AIé§†å‹•',
                    featurePersonalized: 'ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚º'
                },
                signup: {
                    joinUs: 'å‚åŠ ã™ã‚‹',
                    startJourney: 'AIå­¦ç¿’ã®æ—…ã‚’å§‹ã‚ã¾ã—ã‚‡ã†',
                    signupDesc: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¦ã€å¤šæ§˜ãªAIå­¦ç¿’æ©Ÿèƒ½ã‚’ä½“é¨“',
                    email: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
                    emailPlaceholder: 'your@email.com',
                    password: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
                    passwordPlaceholder: '6æ–‡å­—ä»¥ä¸Š',
                    passwordHint: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™',
                    signupBtn: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ',
                    haveAccount: 'ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ',
                    backToLogin: 'ãƒ­ã‚°ã‚¤ãƒ³ã«æˆ»ã‚‹',
                    benefitsTitle: 'ç™»éŒ²ã—ã¦æ¥½ã—ã‚€ï¼š',
                    benefitMultilingual: 'å¤šè¨€èªå­¦ç¿’',
                    benefitAITutor: 'AIãƒãƒ¥ãƒ¼ã‚¿ãƒ¼',
                    benefitTutoring: 'å®¿é¡ŒæŒ‡å°',
                    benefitStorybook: 'çµµæœ¬ã®èª­ã¿èã‹ã›'
                },
                myLearning: {
                    title: 'ç§ã®å­¦ç¿’',
                    subtitle: 'å­¦ç¿’é€²æ—ã€å±¥æ­´ã€ãŠæ°—ã«å…¥ã‚Šã‚’è¡¨ç¤º',
                    loading: 'èª­ã¿è¾¼ã¿ä¸­...',
                    stats: {
                        lessons: 'ãƒ¬ãƒƒã‚¹ãƒ³',
                        stories: 'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼',
                        tutoring: 'æŒ‡å°',
                        favorites: 'ãŠæ°—ã«å…¥ã‚Š'
                    },
                    tab: {
                        lessons: 'ãƒ¬ãƒƒã‚¹ãƒ³å±¥æ­´',
                        stories: 'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å±¥æ­´',
                        tutoring: 'æŒ‡å°ã‚»ãƒƒã‚·ãƒ§ãƒ³',
                        favorites: 'ãŠæ°—ã«å…¥ã‚Š'
                    },
                    noLessons: 'ãƒ¬ãƒƒã‚¹ãƒ³å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“',
                    noStories: 'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“',
                    noTutoring: 'æŒ‡å°ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“',
                    noFavorites: 'ãŠæ°—ã«å…¥ã‚ŠãŒã‚ã‚Šã¾ã›ã‚“',
                    viewDetails: 'è©³ç´°ã‚’è¦‹ã‚‹',
                    delete: 'å‰Šé™¤',
                    favorite: 'ãŠæ°—ã«å…¥ã‚Š',
                    unfavorite: 'ãŠæ°—ã«å…¥ã‚Šè§£é™¤',
                    createdOn: 'ä½œæˆæ—¥',
                    subject: 'ç§‘ç›®',
                    topic: 'ãƒˆãƒ”ãƒƒã‚¯',
                    ageGroup: 'å¹´é½¢ã‚°ãƒ«ãƒ¼ãƒ—',
                    lessonType: 'ã‚¿ã‚¤ãƒ—'
                }
            }
        };

        const debateMotions = [
            {
                id: 'ban-homework',
                title: {
                    'zh-Hant': 'æœ¬é™¢èªç‚ºæ‡‰è©²ç¦æ­¢å°å­¸ç”Ÿå®¶åº­ä½œæ¥­',
                    'en': 'This house would ban homework for elementary students',
                    'vi': 'Quá»‘c há»™i cho ráº±ng nÃªn cáº¥m bÃ i táº­p vá» nhÃ  cho há»c sinh tiá»ƒu há»c',
                    'ja': 'æœ¬é™¢ã¯å°å­¦ç”Ÿã®å®¿é¡Œã‚’ç¦æ­¢ã™ã¹ãã ã¨è€ƒãˆã‚‹'
                },
                sides: {
                    pro: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘æ”¯æŒç¦æ­¢å°å­¸ç”Ÿå®¶åº­ä½œæ¥­ï¼Œè®“å­©å­æœ‰æ›´å¤šä¼‘æ¯æ™‚é–“ã€‚',
                                'en': 'We support banning homework for elementary students so they gain more rest.',
                                'vi': 'ChÃºng tÃ´i á»§ng há»™ viá»‡c bá» bÃ i táº­p vá» nhÃ  Ä‘á»ƒ há»c sinh tiá»ƒu há»c cÃ³ thÃªm thá»i gian nghá»‰ ngÆ¡i.',
                                'ja': 'å°å­¦ç”Ÿã®å®¿é¡Œã‚’ç¦æ­¢ã—ã€å­ã©ã‚‚ã«ä¼‘ã‚€æ™‚é–“ã‚’ä¸ãˆã‚‹ã¹ãã ã¨è€ƒãˆã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'é•·æ™‚é–“çš„èª²å ‚åŠ ä¸Šä½œæ¥­æœƒç´¯ç©å£“åŠ›èˆ‡ç–²å‹ã€‚',
                                'en': 'Long school days plus extra worksheets pile on unnecessary stress.',
                                'vi': 'NgÃ y há»c dÃ i cá»™ng thÃªm bÃ i táº­p khiáº¿n tráº» bá»‹ cÄƒng tháº³ng khÃ´ng cáº§n thiáº¿t.',
                                'ja': 'é•·ã„æˆæ¥­ã«åŠ ãˆã¦å®¿é¡ŒãŒã‚ã‚‹ã¨ã€ä¸è¦ãªã‚¹ãƒˆãƒ¬ã‚¹ã¨ç–²åŠ´ãŒãŸã¾ã‚Šã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'å…’ç«¥å¹¸ç¦æ„Ÿèª¿æŸ¥é¡¯ç¤ºä½œæ¥­é‡èˆ‡ç¡çœ ä¸è¶³é«˜åº¦ç›¸é—œã€‚',
                                'en': 'Wellness surveys link heavy homework with less sleep for young learners.',
                                'vi': 'Kháº£o sÃ¡t sá»©c khá»e cho tháº¥y bÃ i táº­p nhiá»u lÃ m giáº£m giá» ngá»§ cá»§a tráº».',
                                'ja': 'å­ã©ã‚‚ã®ã‚¦ã‚§ãƒ«ãƒ“ãƒ¼ã‚¤ãƒ³ã‚°èª¿æŸ»ã§ã¯å®¿é¡Œã®å¤šã•ã¨ç¡çœ ä¸è¶³ã«ç›¸é–¢ãŒã‚ã‚Šã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'æ¸›å°‘ä½œæ¥­èƒ½æå‡å­¸ç¿’å‹•åŠ›ä¸¦å¢åŠ è¦ªå­äº¤æµæ™‚é–“ã€‚',
                                'en': 'Removing homework lifts motivation and opens time for family connection.',
                                'vi': 'Giáº£m bÃ i táº­p giÃºp tÄƒng Ä‘á»™ng lá»±c há»c vÃ  gáº¯n káº¿t gia Ä‘Ã¬nh.',
                                'ja': 'å®¿é¡Œã‚’æ¸›ã‚‰ã›ã°å­¦ç¿’æ„æ¬²ãŒé«˜ã¾ã‚Šã€å®¶æ—ã¨ã®æ™‚é–“ã‚‚å¢—ãˆã¾ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'é€æ­¥å–æ¶ˆä½œæ¥­å¯æ‰“é€ å…¼é¡§å¥åº·èˆ‡æ¢ç©¶çš„èª²å¾Œç”Ÿæ´»ã€‚',
                                'en': 'Phasing out homework creates healthier, curiosity-driven afternoons.',
                                'vi': 'Loáº¡i bá» dáº§n bÃ i táº­p mang láº¡i buá»•i chiá»u lÃ nh máº¡nh vÃ  Ä‘áº§y khÃ¡m phÃ¡.',
                                'ja': 'å®¿é¡Œã‚’æ®µéšçš„ã«å»ƒæ­¢ã™ã‚‹ã“ã¨ã§å¥åº·çš„ã§æ¢ç©¶çš„ãªæ”¾èª²å¾ŒãŒå®Ÿç¾ã—ã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'ç¾ä»£ç´ é¤Šæ•™è‚²å¼·èª¿éŠæˆ²èˆ‡æ¢ç©¶å¼å­¸ç¿’ï¼Œè€Œéé‡è¤‡æŠ„å¯«ã€‚',
                                'en': 'Modern pedagogy prioritises play and inquiry over repetitive drills.',
                                'vi': 'GiÃ¡o dá»¥c hiá»‡n Ä‘áº¡i Æ°u tiÃªn há»c qua chÆ¡i vÃ  tÃ¬m tÃ²i hÆ¡n lÃ  luyá»‡n táº­p láº·p láº¡i.',
                                'ja': 'ç¾ä»£æ•™è‚²ã¯åå¾©ç·´ç¿’ã‚ˆã‚Šã‚‚éŠã³ã¨æ¢ç©¶ã‚’é‡è¦–ã—ã¦ã„ã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'èŠ¬è˜­ç­‰é«˜è¡¨ç¾åœ‹å®¶åœ¨ä½ä½œæ¥­é‡ä¸‹ä¾èˆŠä¿æŒé ‚å°–æˆç¸¾ã€‚',
                                'en': 'Systems like Finland stay top ranked despite minimal homework loads.',
                                'vi': 'CÃ¡c há»‡ thá»‘ng nhÆ° Pháº§n Lan váº«n Ä‘áº¡t thÃ nh tÃ­ch cao dÃ¹ lÆ°á»£ng bÃ i táº­p ráº¥t Ã­t.',
                                'ja': 'ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰ãªã©ã®é«˜æˆç¸¾å›½ã‚‚å®¿é¡ŒãŒã»ã¨ã‚“ã©ãªãã¦ã‚‚æˆæœã‚’ä¸Šã’ã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'è®“èª²å ‚å°ˆæ³¨æ·±åŒ–å­¸ç¿’ï¼Œæ™šä¸Šå‰‡ç•™çµ¦èˆˆè¶£ã€é‹å‹•èˆ‡å……è¶³ç¡çœ ã€‚',
                                'en': 'Class time digs deeper into concepts while evenings foster hobbies, exercise, and sleep.',
                                'vi': 'Giá» há»c giÃºp Ä‘Ã o sÃ¢u kiáº¿n thá»©c, buá»•i tá»‘i dÃ nh cho sá»Ÿ thÃ­ch, váº­n Ä‘á»™ng vÃ  ngá»§ Ä‘á»§.',
                                'ja': 'æˆæ¥­ã§å†…å®¹ã‚’æ·±ã‚ã€å¤œã¯èˆˆå‘³ã‚„é‹å‹•ã€ååˆ†ãªç¡çœ ã«å……ã¦ã‚‰ã‚Œã¾ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'ä½œæ¥­æœ‰åŠ©æ–¼å»ºç«‹è‡ªå¾‹èˆ‡æ™‚é–“ç®¡ç†èƒ½åŠ›ã€‚',
                                'en': 'Homework helps children build discipline and time management.',
                                'vi': 'BÃ i táº­p giÃºp tráº» hÃ¬nh thÃ nh tÃ­nh ká»· luáº­t vÃ  ká»¹ nÄƒng quáº£n lÃ½ thá»i gian.',
                                'ja': 'å®¿é¡Œã¯è‡ªå¾‹å¿ƒã¨æ™‚é–“ç®¡ç†èƒ½åŠ›ã‚’è‚²ã¦ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'å®¶é•·éœ€è¦é€éä½œæ¥­äº†è§£å­©å­åœ¨å­¸æ ¡å­¸äº†ä»€éº¼ã€‚',
                                'en': 'Parents rely on homework to know what their child learned at school.',
                                'vi': 'Phá»¥ huynh dá»±a vÃ o bÃ i táº­p Ä‘á»ƒ biáº¿t con há»c gÃ¬ á»Ÿ trÆ°á»ng.',
                                'ja': 'ä¿è­·è€…ã¯å®¿é¡Œã‚’é€šã˜ã¦å­¦æ ¡ã§ã®å­¦ç¿’å†…å®¹ã‚’æŠŠæ¡ã—ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'æå‰é©æ‡‰ä½œæ¥­é‡æœ‰åŠ©æ–¼éŠœæ¥é«˜å¹´ç´šçš„èª²æ¥­è¦æ±‚ã€‚',
                                'en': 'Early exposure prepares students for heavier workloads in upper grades.',
                                'vi': 'LÃ m quen sá»›m giÃºp há»c sinh chuáº©n bá»‹ cho khá»‘i lÆ°á»£ng cáº¥p lá»›p trÃªn.',
                                'ja': 'æ—©ã„ã†ã¡ã‹ã‚‰å®¿é¡Œã«æ…£ã‚Œã¦ãŠãã¨é«˜å­¦å¹´ã®å­¦ç¿’ã«ã¤ãªãŒã‚Šã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ é»å‡ºäº†ä½œæ¥­éé‡é€ æˆçš„å£“åŠ›ï¼Œä½†å¯ä»¥è£œå……æ›´å¤šæˆåŠŸæ¡ˆä¾‹ã€‚',
                                'en': 'You highlighted the stress from heavy homework; add one more proven example.',
                                'vi': 'Báº¡n Ä‘Ã£ nÃªu rÃµ Ã¡p lá»±c do bÃ i táº­p, hÃ£y bá»• sung thÃªm vÃ­ dá»¥ thá»±c táº¿.',
                                'ja': 'å®¿é¡Œã®è² æ‹…ã«ã‚ˆã‚‹ã‚¹ãƒˆãƒ¬ã‚¹ã«è§¦ã‚Œã¾ã—ãŸãŒã€å®Ÿä¾‹ã‚’ã‚‚ã†ä¸€ã¤åŠ ãˆã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'å¼•ç”¨å­¸æ ¡æˆ–åœ‹å®¶æ”¿ç­–çš„æ•¸æ“šä¾†ä½è­‰ä½ çš„ä¸»å¼µã€‚',
                                    'en': 'Cite data from a school or national policy to back your claim.',
                                    'vi': 'TrÃ­ch sá»‘ liá»‡u tá»« trÆ°á»ng hoáº·c chÃ­nh sÃ¡ch quá»‘c gia Ä‘á»ƒ cá»§ng cá»‘ luáº­n Ä‘iá»ƒm.',
                                    'ja': 'å­¦æ ¡ã‚„å›½ã®æ”¿ç­–ãƒ‡ãƒ¼ã‚¿ã‚’å¼•ç”¨ã—ã¦ä¸»å¼µã‚’è£ä»˜ã‘ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'èªªæ˜å¦‚ä½•åœ¨æ²’æœ‰ä½œæ¥­çš„æƒ…æ³ä¸‹ç¶­æŒå®¶é•·èˆ‡å­¸ç”Ÿçš„æºé€šã€‚',
                                    'en': 'Explain how families can stay involved even without nightly worksheets.',
                                    'vi': 'Giáº£i thÃ­ch cÃ¡ch gia Ä‘Ã¬nh váº«n Ä‘á»“ng hÃ nh dÃ¹ khÃ´ng cÃ²n bÃ i táº­p buá»•i tá»‘i.',
                                    'ja': 'å®¿é¡ŒãŒãªãã¦ã‚‚ä¿è­·è€…ã¨å­ã©ã‚‚ã®é€£æºã‚’ã©ã†ä¿ã¤ã‹ç¤ºã—ã¦ãã ã•ã„ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹8ã€åé§7ã€è¡¨é”8ã€ç­–ç•¥8ï¼ˆç¸½åˆ†31/40ï¼‰ã€‚',
                                'en': 'Score: Content 8, Refutation 7, Delivery 8, Strategy 8 (31/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 8, Pháº£n biá»‡n 7, TrÃ¬nh bÃ y 8, Chiáº¿n lÆ°á»£c 8 (31/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹8ãƒ»åè«–7ãƒ»è¡¨ç¾8ãƒ»æˆ¦ç•¥8ï¼ˆ31/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'åœ¨é–‹é ­å…ˆç¸½çµæ”¿ç­–å¸¶ä¾†çš„ä¸‰å€‹å¥½è™•ï¼Œè®“çµæ§‹æ›´æ¸…æ¥šã€‚',
                                    'en': 'Open with three concrete benefits to keep the structure clear.',
                                    'vi': 'Má»Ÿ Ä‘áº§u báº±ng ba lá»£i Ã­ch rÃµ rÃ ng Ä‘á»ƒ cáº¥u trÃºc cháº·t cháº½ hÆ¡n.',
                                    'ja': 'å†’é ­ã§æ”¿ç­–ã®å…·ä½“çš„ãªåˆ©ç‚¹ã‚’3ã¤ç¤ºã—ã€æ§‹æˆã‚’æ˜ç¢ºã«ã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åŠ å…¥ä¸€æ®µè¦ªå¸«åˆä½œçš„ç¤ºä¾‹ï¼Œå¢åŠ èªªæœåŠ›ã€‚',
                                    'en': 'Add one family-school partnership example for extra credibility.',
                                    'vi': 'ThÃªm vÃ­ dá»¥ há»£p tÃ¡c gia Ä‘Ã¬nh-nhÃ  trÆ°á»ng Ä‘á»ƒ tÄƒng tÃ­nh thuyáº¿t phá»¥c.',
                                    'ja': 'å®¶åº­ã¨å­¦æ ¡ã®é€£æºä¾‹ã‚’åŠ ãˆã¦èª¬å¾—åŠ›ã‚’é«˜ã‚ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    },
                    con: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘åå°å…¨é¢ç¦æ­¢ä½œæ¥­ï¼Œå› ç‚ºé©é‡ç·´ç¿’èƒ½éå›ºå­¸ç¿’æˆæœã€‚',
                                'en': 'We oppose a full ban because light practice reinforces learning.',
                                'vi': 'ChÃºng tÃ´i pháº£n Ä‘á»‘i cáº¥m hoÃ n toÃ n vÃ¬ bÃ i luyá»‡n nháº¹ giÃºp cá»§ng cá»‘ kiáº¿n thá»©c.',
                                'ja': 'ç§ãŸã¡ã¯å®Œå…¨ç¦æ­¢ã«åå¯¾ã§ã™ã€‚é©é‡ã®å®¿é¡Œã¯å­¦ç¿’å®šç€ã«å½¹ç«‹ã¤ã‹ã‚‰ã§ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'çŸ­è€Œæœ‰æ„ç¾©çš„ä½œæ¥­å¯ä»¥åŠ æ·±è¨˜æ†¶èˆ‡ç†è§£ã€‚',
                                'en': 'Short, purposeful tasks deepen memory and understanding.',
                                'vi': 'BÃ i ngáº¯n cÃ³ má»¥c Ä‘Ã­ch giÃºp ghi nhá»› vÃ  hiá»ƒu sÃ¢u hÆ¡n.',
                                'ja': 'çŸ­ãç›®çš„ã®ã‚ã‚‹èª²é¡Œã¯è¨˜æ†¶ã¨ç†è§£ã‚’æ·±ã‚ã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'è€å¸«è§€å¯Ÿåˆ°è¤‡ç¿’éçš„å­¸ç”Ÿéš”å¤©æ›´æœ‰è‡ªä¿¡ã€‚',
                                'en': 'Teachers observe more confident participation from students who review at home.',
                                'vi': 'GiÃ¡o viÃªn nháº­n tháº¥y há»c sinh Ã´n bÃ i á»Ÿ nhÃ  tham gia tá»± tin hÆ¡n.',
                                'ja': 'å®¶åº­ã§å¾©ç¿’ã—ãŸç”Ÿå¾’ã¯ç¿Œæ—¥è‡ªä¿¡ã‚’æŒã£ã¦ç™ºè¨€ã™ã‚‹ã¨å ±å‘Šã•ã‚Œã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'ä¿ç•™ç²¾é¸ä½œæ¥­èƒ½å»ºç«‹ç¿’æ…£ä¸¦è®“å®¶é•·åƒèˆ‡å­¸ç¿’ã€‚',
                                'en': 'Keeping curated homework builds routines and invites family involvement.',
                                'vi': 'Giá»¯ láº¡i bÃ i táº­p chá»n lá»c giÃºp táº¡o thÃ³i quen vÃ  gáº¯n káº¿t phá»¥ huynh.',
                                'ja': 'å³é¸ã—ãŸå®¿é¡Œã‚’æ®‹ã™ã“ã¨ã§ç¿’æ…£ãŒèº«ã«ã¤ãã€ä¿è­·è€…ã‚‚é–¢ã‚ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'ä½œæ¥­æ˜¯é€£çµå­¸æ ¡èˆ‡å®¶åº­çš„æ©‹æ¨‘ï¼Œä¸æ‡‰è‰ç‡å–æ¶ˆã€‚',
                                'en': 'Homework bridges school and home; removing it outright is premature.',
                                'vi': 'BÃ i táº­p ná»‘i káº¿t trÆ°á»ng há»c vÃ  gia Ä‘Ã¬nh, khÃ´ng nÃªn bá» vá»™i vÃ ng.',
                                'ja': 'å®¿é¡Œã¯å­¦æ ¡ã¨å®¶åº­ã‚’ã¤ãªãæ©‹ã§ã‚ã‚Šã€æ€§æ€¥ã«ç„¡ãã™ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'è¨­è¨ˆè‰¯å¥½çš„ä½œæ¥­èƒ½åŸ¹é¤Šè²¬ä»»æ„Ÿèˆ‡è‡ªæˆ‘ç®¡ç†èƒ½åŠ›ã€‚',
                                'en': 'Well-designed tasks cultivate responsibility and self-management.',
                                'vi': 'BÃ i táº­p Ä‘Æ°á»£c thiáº¿t káº¿ tá»‘t rÃ¨n trÃ¡ch nhiá»‡m vÃ  tá»± quáº£n.',
                                'ja': 'å·¥å¤«ã•ã‚ŒãŸå®¿é¡Œã¯è²¬ä»»æ„Ÿã¨ã‚»ãƒ«ãƒ•ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚’é¤Šã„ã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'ç¸±è²«ç ”ç©¶é¡¯ç¤ºé©é‡ä½œæ¥­èˆ‡é–±è®€ã€æ•¸å­¸æˆé•·æ­£ç›¸é—œã€‚',
                                'en': 'Longitudinal studies tie moderate homework to gains in reading and math.',
                                'vi': 'NghiÃªn cá»©u dÃ i háº¡n cho tháº¥y lÆ°á»£ng bÃ i táº­p vá»«a pháº£i giÃºp tiáº¿n bá»™ Ä‘á»c vÃ  toÃ¡n.',
                                'ja': 'é©åº¦ãªå®¿é¡ŒãŒèª­è§£åŠ›ã¨æ•°å­¦åŠ›ã®ä¼¸ã³ã«ã¤ãªãŒã‚‹ã¨é•·æœŸç ”ç©¶ãŒç¤ºã—ã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'èˆ‡å…¶ç¦æ­¢ï¼Œä¸å¦‚é‡æ–°è¨­è¨ˆæ›´ç²¾æº–çš„ä½œæ¥­å½¢å¼ã€‚',
                                'en': 'Instead of banning, redesign homework to be targeted and efficient.',
                                'vi': 'Thay vÃ¬ cáº¥m, hÃ£y tÃ¡i thiáº¿t káº¿ bÃ i táº­p cho hiá»‡u quáº£ vÃ  Ä‘Ãºng trá»ng tÃ¢m.',
                                'ja': 'ç¦æ­¢ã™ã‚‹ã®ã§ã¯ãªãã€ç›®çš„ã«æ²¿ã£ãŸåŠ¹ç‡çš„ãªå®¿é¡Œã¸æ”¹å–„ã™ã¹ãã§ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'éå¤šä½œæ¥­æœƒè®“å­©å­ç­‹ç–²åŠ›ç›¡ä¸¦å¤±å»å‹•åŠ›ã€‚',
                                'en': 'Too much homework leaves children exhausted and unmotivated.',
                                'vi': 'QuÃ¡ nhiá»u bÃ i táº­p khiáº¿n tráº» kiá»‡t sá»©c vÃ  máº¥t Ä‘á»™ng lá»±c.',
                                'ja': 'å®¿é¡ŒãŒå¤šã™ãã‚‹ã¨å­ã©ã‚‚ã¯ç–²ã‚Œåˆ‡ã‚Šã€ã‚„ã‚‹æ°—ã‚’å¤±ã„ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'æœ‰äº›å®¶åº­ç¼ºä¹å®‰éœç©ºé–“èˆ‡è³‡æºå”åŠ©å­©å­ã€‚',
                                'en': 'Some families lack quiet space or support to help with assignments.',
                                'vi': 'Nhiá»u gia Ä‘Ã¬nh thiáº¿u khÃ´ng gian yÃªn tÄ©nh hoáº·c ngÆ°á»i há»— trá»£ lÃ m bÃ i.',
                                'ja': 'é™ã‹ãªå­¦ç¿’ç’°å¢ƒã‚„ã‚µãƒãƒ¼ãƒˆãŒãªã„å®¶åº­ã‚‚ã‚ã‚Šã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'è¨±å¤šé«˜è¡¨ç¾åœ‹å®¶å·²ç¶“åœ¨ä½ä½œæ¥­é‡ä¸‹å–å¾—ä½³ç¸¾ã€‚',
                                'en': 'High-performing systems succeed with little to no homework already.',
                                'vi': 'Nhiá»u quá»‘c gia thÃ nh tÃ­ch cao váº«n duy trÃ¬ Ã­t bÃ i táº­p.',
                                'ja': 'å®¿é¡ŒãŒå°‘ãªãã¦ã‚‚æˆæœã‚’å‡ºã—ã¦ã„ã‚‹å›½ãŒæ—¢ã«ã‚ã‚Šã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ æŠ“ä½äº†è²¬ä»»æ„Ÿçš„è§’åº¦ï¼Œä½†é‚„å¯ä»¥èªªæ˜æ¸›é‡çš„å…·é«”æ–¹æ³•ã€‚',
                                'en': 'You focused on responsibility; add details on how to keep quality while trimming load.',
                                'vi': 'Báº¡n nháº¥n máº¡nh trÃ¡ch nhiá»‡m; hÃ£y nÃ³i thÃªm cÃ¡ch giá»¯ cháº¥t lÆ°á»£ng khi giáº£m khá»‘i lÆ°á»£ng.',
                                'ja': 'è²¬ä»»æ„Ÿã¨ã„ã†è¦³ç‚¹ã¯è‰¯ã„ã§ã™ãŒã€è² æ‹…ã‚’æ¸›ã‚‰ã—ã¤ã¤è³ªã‚’ä¿ã¤æ–¹æ³•ã‚‚è¿°ã¹ã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'æå‡ºæ¯é€±ä½œæ¥­æ™‚æ•¸ä¸Šé™ï¼Œè®“æ–¹æ¡ˆæ›´å…·é«”ã€‚',
                                    'en': 'Propose a weekly time cap to make the plan concrete.',
                                    'vi': 'Äá» xuáº¥t giá»›i háº¡n sá»‘ giá» bÃ i táº­p má»—i tuáº§n Ä‘á»ƒ káº¿ hoáº¡ch cá»¥ thá»ƒ hÆ¡n.',
                                    'ja': 'é€±å½“ãŸã‚Šã®å®¿é¡Œæ™‚é–“ã®ä¸Šé™ã‚’ç¤ºã—ã€è¨ˆç”»ã‚’å…·ä½“åŒ–ã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'è£œå……ä¸€å€‹å­¸ç”Ÿé™ªä¼´æˆ–èª²å¾Œè¼”å°çš„æ›¿ä»£åšæ³•ã€‚',
                                    'en': 'Mention an alternative like mentoring or after-school support.',
                                    'vi': 'ÄÆ°a ra phÆ°Æ¡ng Ã¡n thay tháº¿ nhÆ° cá»‘ váº¥n hoáº·c há»— trá»£ sau giá» há»c.',
                                    'ja': 'ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°ã‚„æ”¾èª²å¾Œæ”¯æ´ãªã©ä»£æ›¿ç­–ã‚’åŠ ãˆã‚‹ã¨åŠ¹æœçš„ã§ã™ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹8ã€åé§8ã€è¡¨é”7ã€ç­–ç•¥7ï¼ˆç¸½åˆ†30/40ï¼‰ã€‚',
                                'en': 'Score: Content 8, Refutation 8, Delivery 7, Strategy 7 (30/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 8, Pháº£n biá»‡n 8, TrÃ¬nh bÃ y 7, Chiáº¿n lÆ°á»£c 7 (30/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹8ãƒ»åè«–8ãƒ»è¡¨ç¾7ãƒ»æˆ¦ç•¥7ï¼ˆ30/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'åœ¨çµå°¾å¼·èª¿å¦‚ä½•è¡¡é‡ä½œæ¥­å“è³ªï¼Œå¢åŠ å¯è¡Œæ€§ã€‚',
                                    'en': 'Close by showing how you will measure assignment quality for feasibility.',
                                    'vi': 'Káº¿t luáº­n báº±ng cÃ¡ch nÃªu cÃ¡ch Ä‘o cháº¥t lÆ°á»£ng bÃ i táº­p Ä‘á»ƒ tÄƒng tÃ­nh kháº£ thi.',
                                    'ja': 'å®¿é¡Œã®è³ªã‚’ã©ã†æ¸¬ã‚‹ã‹ã‚’ç¤ºã—ã€å®Ÿç¾æ€§ã‚’ã‚¢ãƒ”ãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åŠ å…¥å­¸ç”Ÿæˆ–å®¶é•·çš„å›é¥‹ï¼Œå¼•å°è½çœ¾å…±é³´ã€‚',
                                    'en': 'Add student or parent feedback to build emotional resonance.',
                                    'vi': 'ThÃªm pháº£n há»“i cá»§a há»c sinh hoáº·c phá»¥ huynh Ä‘á»ƒ táº¡o sá»± Ä‘á»“ng cáº£m.',
                                    'ja': 'ç”Ÿå¾’ã‚„ä¿è­·è€…ã®å£°ã‚’å–ã‚Šå…¥ã‚Œã€å…±æ„Ÿã‚’å¼•ãå‡ºã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    }
                },
                questions: [
                    {
                        'zh-Hant': 'é€™é …æ”¿ç­–æƒ³è§£æ±ºçš„æ ¸å¿ƒå•é¡Œæ˜¯ä»€éº¼ï¼Ÿ',
                        'en': 'What core problem does this policy aim to solve?',
                        'vi': 'ChÃ­nh sÃ¡ch nÃ y muá»‘n giáº£i quyáº¿t váº¥n Ä‘á» cá»‘t lÃµi nÃ o?',
                        'ja': 'ã“ã®æ”¿ç­–ãŒè§£æ±ºã—ãŸã„æ ¸å¿ƒèª²é¡Œã¯ä½•ã§ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'åæ­²å­©å­æ¯å¤©åšå¤šå°‘ä½œæ¥­æ‰ç®—å¥åº·ï¼Ÿ',
                        'en': 'How much nightly homework is healthy for a ten-year-old?',
                        'vi': 'Há»c sinh 10 tuá»•i nÃªn lÃ m bÃ i má»—i tá»‘i trong bao lÃ¢u lÃ  há»£p lÃ½?',
                        'ja': '10æ­³ã®å­ã©ã‚‚ã«ã¨ã£ã¦å¥åº·çš„ãªå®¿é¡Œæ™‚é–“ã¯ã©ã‚Œãã‚‰ã„ã§ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'è‹¥ä¸å¯«ä½œæ¥­ï¼Œä½ å¦‚ä½•è¡¡é‡è²¬ä»»æ„Ÿèˆ‡è‡ªå¾‹ï¼Ÿ',
                        'en': 'Without homework, how will you measure responsibility and self-management?',
                        'vi': 'Náº¿u khÃ´ng cÃ³ bÃ i táº­p, báº¡n Ä‘o lÆ°á»ng trÃ¡ch nhiá»‡m vÃ  tá»± quáº£n tháº¿ nÃ o?',
                        'ja': 'å®¿é¡ŒãŒãªã„å ´åˆã€è²¬ä»»æ„Ÿã‚„è‡ªå·±ç®¡ç†åŠ›ã‚’ã©ã†æ¸¬å®šã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æ”¿ç­–å¦‚ä½•å”åŠ©ç¼ºä¹è³‡æºçš„å®¶åº­ï¼Ÿ',
                        'en': 'How will the policy support families with limited resources?',
                        'vi': 'ChÃ­nh sÃ¡ch sáº½ há»— trá»£ gia Ä‘Ã¬nh thiáº¿u Ä‘iá»u kiá»‡n ra sao?',
                        'ja': 'è³‡æºã®å°‘ãªã„å®¶åº­ã‚’ã©ã®ã‚ˆã†ã«æ”¯æ´ã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æœ‰å“ªäº›åœ‹éš›æ¡ˆä¾‹è­‰æ˜ä½ çš„ç«‹å ´å¯è¡Œï¼Ÿ',
                        'en': 'Which international examples make your side credible?',
                        'vi': 'VÃ­ dá»¥ quá»‘c táº¿ nÃ o chá»©ng minh láº­p trÆ°á»ng cá»§a báº¡n?',
                        'ja': 'ã‚ãªãŸã®ç«‹å ´ã‚’è£ä»˜ã‘ã‚‹å›½éš›çš„ãªäº‹ä¾‹ã¯ä½•ã§ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'ä½œæ¥­æœŸå¾…æ”¹è®Šå¾Œï¼Œæ•™å¸«æœƒå¦‚ä½•èª¿æ•´èª²å ‚ï¼Ÿ',
                        'en': 'When homework expectations change, how should teachers adapt lessons?',
                        'vi': 'Khi ká»³ vá»ng vá» bÃ i táº­p Ä‘á»•i khÃ¡c, giÃ¡o viÃªn sáº½ Ä‘iá»u chá»‰nh tiáº¿t dáº¡y tháº¿ nÃ o?',
                        'ja': 'å®¿é¡Œã®å‰æãŒå¤‰ã‚ã£ãŸã¨ãã€æ•™å¸«ã¯æˆæ¥­ã‚’ã©ã†èª¿æ•´ã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å®¶é•·åœ¨æ”¾å­¸å¾Œæ‡‰æ‰®æ¼”ä»€éº¼è§’è‰²ï¼Ÿ',
                        'en': 'What role should parents play after school under your plan?',
                        'vi': 'Theo káº¿ hoáº¡ch cá»§a báº¡n, phá»¥ huynh Ä‘Ã³ng vai trÃ² gÃ¬ sau giá» há»c?',
                        'ja': 'ã‚ãªãŸã®è¨ˆç”»ã§ã¯æ”¾èª²å¾Œã«ä¿è­·è€…ã¯ã©ã‚“ãªå½¹å‰²ã‚’æ‹…ã„ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'ä½ å¦‚ä½•ç¢ºä¿ä½ä½œæ¥­é‡ä¹Ÿèƒ½ç¶­æŒå­¸ç¿’æˆæœï¼Ÿ',
                        'en': 'How will you ensure low homework still preserves learning outcomes?',
                        'vi': 'LÃ m sao báº£o Ä‘áº£m Ã­t bÃ i táº­p mÃ  káº¿t quáº£ há»c táº­p váº«n giá»¯ vá»¯ng?',
                        'ja': 'å®¿é¡Œã‚’æ¸›ã‚‰ã—ã¦ã‚‚å­¦ç¿’æˆæœã‚’ç¶­æŒã§ãã‚‹ä»•çµ„ã¿ã¯ï¼Ÿ'
                    }
                ]
            },
            {
                id: 'school-uniforms',
                title: {
                    'zh-Hant': 'æœ¬é™¢æ”¯æŒæ ¡æœåˆ¶åº¦',
                    'en': 'This house supports requiring school uniforms',
                    'vi': 'Quá»‘c há»™i á»§ng há»™ viá»‡c Ã¡p dá»¥ng Ä‘á»“ng phá»¥c há»c Ä‘Æ°á»ng',
                    'ja': 'æœ¬é™¢ã¯å­¦æ ¡åˆ¶æœåˆ¶åº¦ã‚’æ”¯æŒã™ã‚‹'
                },
                sides: {
                    pro: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘æ”¯æŒåˆ¶æœï¼Œè®“æ¯ä½å­¸ç”Ÿä»¥åŒæ¨£çš„èµ·é»é€²æ•™å®¤ã€‚',
                                'en': 'We support uniforms so every student walks in on equal footing.',
                                'vi': 'ChÃºng tÃ´i á»§ng há»™ Ä‘á»“ng phá»¥c Ä‘á»ƒ má»i há»c sinh báº¯t Ä‘áº§u nhÆ° nhau.',
                                'ja': 'åˆ¶æœã‚’å°å…¥ã—ã€ã™ã¹ã¦ã®ç”Ÿå¾’ãŒåŒã˜ç«‹å ´ã§æ•™å®¤ã«å…¥ã‚‹ã¹ãã§ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'çµ±ä¸€æœè£èƒ½é™ä½å¤–è¡¨æ¯”è¼ƒèˆ‡å“ç‰Œå£“åŠ›ã€‚',
                                'en': 'Shared attire lowers pressure to compete over fashion and brands.',
                                'vi': 'Trang phá»¥c giá»‘ng nhau giáº£m Ã¡p lá»±c so bÃ¬ thá»i trang.',
                                'ja': 'åŒã˜æœè£…ã¯ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚„ãƒ–ãƒ©ãƒ³ãƒ‰ã®ç«¶äº‰ã‚’å’Œã‚‰ã’ã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'æ ¡é•·å›å ±å°å…¥åˆ¶æœå¾Œèµ°å»Šè¡çªæ˜é¡¯ä¸‹é™ã€‚',
                                'en': 'Principals report fewer hallway conflicts after adopting uniforms.',
                                'vi': 'Nhiá»u hiá»‡u trÆ°á»Ÿng cho biáº¿t xung Ä‘á»™t giáº£m sau khi Ã¡p dá»¥ng Ä‘á»“ng phá»¥c.',
                                'ja': 'åˆ¶æœå°å…¥å¾Œã¯å»Šä¸‹ã§ã®ãƒˆãƒ©ãƒ–ãƒ«ãŒæ¸›ã£ãŸã¨å ±å‘Šã•ã‚Œã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'åˆ¶æœæ‰“é€ å®‰å…¨ã€å°ˆæ³¨çš„å­¸ç¿’æ°›åœã€‚',
                                'en': 'Uniforms create a safer, more focused learning climate.',
                                'vi': 'Äá»“ng phá»¥c táº¡o mÃ´i trÆ°á»ng há»c an toÃ n vÃ  táº­p trung.',
                                'ja': 'åˆ¶æœã¯å®‰å…¨ã§é›†ä¸­ã§ãã‚‹å­¦ç¿’ç’°å¢ƒã‚’ä½œã‚Šã¾ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'åˆ¶æœæ˜¯ä¸€ç¨®å»ºç«‹åŒ…å®¹æ ¡åœ’æ–‡åŒ–çš„ç­–ç•¥ã€‚',
                                'en': 'Uniforms are a strategy to build an inclusive school culture.',
                                'vi': 'Äá»“ng phá»¥c lÃ  chiáº¿n lÆ°á»£c xÃ¢y dá»±ng vÄƒn hÃ³a trÆ°á»ng há»c bao trÃ¹m.',
                                'ja': 'åˆ¶æœã¯åŒ…æ‘‚çš„ãªæ ¡é¢¨ã‚’ç¯‰ãæˆ¦ç•¥ã§ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'å®ƒæ·¡åŒ–ç¶“æ¿Ÿå·®è·ï¼Œè®“ç„¦é»å›åˆ°å“æ ¼èˆ‡è¡¨ç¾ã€‚',
                                'en': 'They mute visible income gaps and keep focus on character and performance.',
                                'vi': 'Äá»“ng phá»¥c lÃ m má» chÃªnh lá»‡ch thu nháº­p, giÃºp táº­p trung vÃ o pháº©m cháº¥t vÃ  thÃ nh tÃ­ch.',
                                'ja': 'çµŒæ¸ˆæ ¼å·®ã‚’ç›®ç«‹ãŸãªãã—ã€äººæ ¼ã‚„æˆæœã«é›†ä¸­ã•ã›ã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'è‹±åœ‹èˆ‡æ–°åŠ å¡å°‡åˆ¶æœèˆ‡å‡ºå‹¤ç‡ã€å®ˆæ™‚æ”¹å–„é€£çµã€‚',
                                'en': 'Countries like the UK and Singapore tie uniforms to better attendance and punctuality.',
                                'vi': 'Anh vÃ  Singapore ghi nháº­n Ä‘á»“ng phá»¥c giÃºp cáº£i thiá»‡n chuyÃªn cáº§n vÃ  Ä‘Ãºng giá».',
                                'ja': 'è‹±å›½ã‚„ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«ã§ã¯åˆ¶æœãŒå‡ºå¸­ç‡ã¨æ™‚é–“å³å®ˆã®å‘ä¸Šã«ã¤ãªãŒã£ã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'ä¸€è‡´çš„æœè£å‚³é”å°Šé‡ã€å°ˆæ¥­èˆ‡æ­¸å±¬æ„Ÿã€‚',
                                'en': 'Shared attire signals respect, professionalism, and belonging.',
                                'vi': 'Trang phá»¥c thá»‘ng nháº¥t thá»ƒ hiá»‡n sá»± tÃ´n trá»ng, chuyÃªn nghiá»‡p vÃ  gáº¯n káº¿t.',
                                'ja': 'çµ±ä¸€ã•ã‚ŒãŸè£…ã„ã¯æ•¬æ„ã¨æ‰€å±æ„è­˜ã‚’ç¤ºã—ã¾ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'åˆ¶æœå£“æŠ‘äº†å­¸ç”Ÿçš„å€‹æ€§èˆ‡å‰µé€ åŠ›ã€‚',
                                'en': 'Uniforms silence student individuality and creativity.',
                                'vi': 'Äá»“ng phá»¥c lÃ m máº¥t Ä‘i cÃ¡ tÃ­nh vÃ  sá»± sÃ¡ng táº¡o.',
                                'ja': 'åˆ¶æœã¯ç”Ÿå¾’ã®å€‹æ€§ã¨å‰µé€ æ€§ã‚’å¥ªã„ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'å®¶åº­å¾—å¤šèŠ±ä¸€ç­†è²»ç”¨è³¼è²·åˆ¶æœå’Œæ›¿æ›ä»¶ã€‚',
                                'en': 'Families must spend extra money on uniforms and replacements.',
                                'vi': 'Gia Ä‘Ã¬nh pháº£i tá»‘n thÃªm tiá»n mua vÃ  thay Ä‘á»“ng phá»¥c.',
                                'ja': 'å®¶åº­ã¯åˆ¶æœã®è³¼å…¥ã¨è²·ã„æ›¿ãˆã«è¿½åŠ è²»ç”¨ãŒã‹ã‹ã‚Šã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'ä¸åˆèº«æˆ–ä¸èˆ’é©çš„åˆ¶æœæœƒè®“å­¸ç”Ÿåˆ†å¿ƒã€‚',
                                'en': 'Uncomfortable fits distract students throughout the day.',
                                'vi': 'Äá»“ng phá»¥c khÃ´ng thoáº£i mÃ¡i khiáº¿n há»c sinh máº¥t táº­p trung.',
                                'ja': 'ã‚µã‚¤ã‚ºãŒåˆã‚ãªã„åˆ¶æœã¯ä¸€æ—¥ä¸­ç”Ÿå¾’ã®é›†ä¸­ã‚’å¦¨ã’ã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ èªªæ˜äº†å…¬å¹³æ€§ï¼Œä½†å¯å†è£œå……è²»ç”¨è¼”åŠ©çš„é…å¥—ã€‚',
                                'en': 'You stressed equity; add how supports offset uniform costs.',
                                'vi': 'Báº¡n nháº¥n máº¡nh sá»± cÃ´ng báº±ng; hÃ£y nÃ³i thÃªm cÃ¡ch há»— trá»£ chi phÃ­ Ä‘á»“ng phá»¥c.',
                                'ja': 'å…¬å¹³æ€§ã‚’å¼·èª¿ã—ã¾ã—ãŸãŒã€è²»ç”¨æ”¯æ´ç­–ã‚‚è§¦ã‚Œã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'æå‡ºç§Ÿå€Ÿã€ä»¥ç‰©æ˜“ç‰©æˆ–è£œåŠ©æ–¹æ¡ˆï¼ŒåŒ–è§£æˆæœ¬ç–‘æ…®ã€‚',
                                    'en': 'Offer rental, exchange, or subsidy programmes to ease cost concerns.',
                                    'vi': 'Äá» xuáº¥t chÆ°Æ¡ng trÃ¬nh cho thuÃª, trao Ä‘á»•i hoáº·c trá»£ cáº¥p Ä‘á»ƒ giáº£m lo chi phÃ­.',
                                    'ja': 'ãƒ¬ãƒ³ã‚¿ãƒ«ã‚„è£œåŠ©åˆ¶åº¦ã‚’ææ¡ˆã—ã€è²»ç”¨ã®ä¸å®‰ã‚’å’Œã‚‰ã’ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'èªªæ˜å¦‚ä½•è®“å­¸ç”Ÿåœ¨é…ä»¶æˆ–å¾½ç« ä¸Šè¡¨é”è‡ªæˆ‘ã€‚',
                                    'en': 'Explain how students can still personalise with badges or accessories.',
                                    'vi': 'Giáº£i thÃ­ch cÃ¡ch há»c sinh váº«n thá»ƒ hiá»‡n báº£n thÃ¢n qua phÃ¹ hiá»‡u, phá»¥ kiá»‡n.',
                                    'ja': 'ãƒãƒƒã‚¸ã‚„ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼ã§å€‹æ€§ã‚’è¡¨ç¾ã§ãã‚‹ç‚¹ã‚’ç¤ºã—ã¦ãã ã•ã„ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹8ã€åé§8ã€è¡¨é”7ã€ç­–ç•¥8ï¼ˆç¸½åˆ†31/40ï¼‰ã€‚',
                                'en': 'Score: Content 8, Refutation 8, Delivery 7, Strategy 8 (31/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 8, Pháº£n biá»‡n 8, TrÃ¬nh bÃ y 7, Chiáº¿n lÆ°á»£c 8 (31/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹8ãƒ»åè«–8ãƒ»è¡¨ç¾7ãƒ»æˆ¦ç•¥8ï¼ˆ31/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'åœ¨å¼•è¨€å¿«é€Ÿæ¯”è¼ƒã€Œæœ‰åˆ¶æœã€èˆ‡ã€Œç„¡åˆ¶æœã€çš„æ ¡åœ’æ°›åœã€‚',
                                    'en': 'In your intro, compare climate with and without uniforms to set contrast.',
                                    'vi': 'á» pháº§n má»Ÿ Ä‘áº§u, so sÃ¡nh báº§u khÃ´ng khÃ­ khi cÃ³ vÃ  khÃ´ng cÃ³ Ä‘á»“ng phá»¥c.',
                                    'ja': 'å°å…¥éƒ¨ã§åˆ¶æœã®æœ‰ç„¡ã«ã‚ˆã‚‹æ ¡å†…é›°å›²æ°—ã®é•ã„ã‚’ç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'ç´å…¥ä¸€æ®µå­¸ç”Ÿæ„Ÿè¨€ï¼Œå¢åŠ æ•…äº‹æ€§ã€‚',
                                    'en': 'Include a student quote to add storytelling.',
                                    'vi': 'ThÃªm lá»i ká»ƒ cá»§a há»c sinh Ä‘á»ƒ táº¡o cÃ¢u chuyá»‡n.',
                                    'ja': 'ç”Ÿå¾’ã®å£°ã‚’å¼•ç”¨ã—ã¦ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ€§ã‚’é«˜ã‚ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    },
                    con: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘åå°ç¡¬æ€§åˆ¶æœï¼Œå› ç‚ºå­¸ç”Ÿéœ€è¦ç©¿è‘—è‡ªç”±å±•ç¾è‡ªæˆ‘ã€‚',
                                'en': 'We oppose rigid uniforms because students need clothing choice to express themselves.',
                                'vi': 'ChÃºng tÃ´i pháº£n Ä‘á»‘i Ä‘á»“ng phá»¥c cá»©ng nháº¯c vÃ¬ há»c sinh cáº§n tá»± do Äƒn máº·c.',
                                'ja': 'ç”Ÿå¾’ã«ã¯è‡ªå·±è¡¨ç¾ã®ãŸã‚ã®æœè£…ã®è‡ªç”±ãŒå¿…è¦ãªã®ã§åˆ¶æœã«åå¯¾ã—ã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'æœè£æ˜¯å»ºç«‹è‡ªä¿¡èˆ‡èº«ä»½çš„é‡è¦æ–¹å¼ã€‚',
                                'en': 'What they wear helps build confidence and identity.',
                                'vi': 'Trang phá»¥c giÃºp xÃ¢y dá»±ng sá»± tá»± tin vÃ  báº£n sáº¯c.',
                                'ja': 'æœè£…ã¯è‡ªä¿¡ã¨ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’è‚²ã¦ã‚‹æ‰‹æ®µã§ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'ç ”ç©¶æŒ‡å‡ºå…è¨±è‡ªç”±ç©¿è‘—æ™‚å­¸ç”Ÿæ»¿æ„åº¦è¼ƒé«˜ã€‚',
                                'en': 'Studies show higher school satisfaction when dress choice is allowed.',
                                'vi': 'NghiÃªn cá»©u cho tháº¥y há»c sinh hÃ i lÃ²ng hÆ¡n khi Ä‘Æ°á»£c chá»n trang phá»¥c.',
                                'ja': 'æœè£…ã®è‡ªç”±ãŒã‚ã‚‹å­¦æ ¡ã§ã¯æº€è¶³åº¦ãŒé«˜ã„ã¨ç ”ç©¶ã§ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'å¤šå…ƒç©¿è‘—åŸ¹é¤Šå‰µæ„ï¼Œä¹Ÿæ•™æœƒå°Šé‡å·®ç•°ã€‚',
                                'en': 'Varied clothing nurtures creativity and respect for differences.',
                                'vi': 'Trang phá»¥c Ä‘a dáº¡ng nuÃ´i dÆ°á»¡ng sÃ¡ng táº¡o vÃ  tÃ´n trá»ng khÃ¡c biá»‡t.',
                                'ja': 'å¤šæ§˜ãªæœè£…ã¯å‰µé€ æ€§ã¨é•ã„ã¸ã®æ•¬æ„ã‚’è‚²ã¦ã¾ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'åˆ¶å¼åˆ¶æœå¿½è¦–äº†æ–‡åŒ–ã€èº«é«”èˆ‡æ€§åˆ¥è¡¨é”çš„éœ€æ±‚ã€‚',
                                'en': 'Rigid uniforms ignore cultural, physical, and gender expression needs.',
                                'vi': 'Äá»“ng phá»¥c cá»©ng nháº¯c bá» qua nhu cáº§u vÄƒn hÃ³a, thá»ƒ cháº¥t vÃ  biá»ƒu hiá»‡n giá»›i.',
                                'ja': 'ç”»ä¸€çš„ãªåˆ¶æœã¯æ–‡åŒ–çš„ãƒ»èº«ä½“çš„ãƒ»ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼è¡¨ç¾ã®ãƒ‹ãƒ¼ã‚ºã‚’ç„¡è¦–ã—ã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'æ¨™æº–å‰ªè£å¾ˆé›£ç¬¦åˆä¸åŒé«”å‹æˆ–ä¿¡ä»°çš„éœ€æ±‚ã€‚',
                                'en': 'Standard cuts rarely fit diverse bodies or faith-based attire.',
                                'vi': 'Kiá»ƒu cáº¯t chuáº©n hiáº¿m khi phÃ¹ há»£p nhiá»u vÃ³c dÃ¡ng hay quy Ä‘á»‹nh tÃ´n giÃ¡o.',
                                'ja': 'æ¨™æº–çš„ãªä»•ç«‹ã¦ã¯ä½“å‹ã‚„å®—æ•™çš„æœè£…ã«é©åˆã—ã¾ã›ã‚“ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'åŠ æ‹¿å¤§èˆ‡ç¾åœ‹æ”¾å¯¬åˆ¶æœå¾Œï¼Œå­¸ç”Ÿåƒèˆ‡æ„Ÿæå‡ã€‚',
                                'en': 'Schools in Canada and the US saw engagement rise after loosening uniform rules.',
                                'vi': 'Nhiá»u trÆ°á»ng táº¡i Canada vÃ  Má»¹ tÄƒng má»©c Ä‘á»™ tham gia khi ná»›i lá»ng Ä‘á»“ng phá»¥c.',
                                'ja': 'ã‚«ãƒŠãƒ€ã‚„ç±³å›½ã§ã¯åˆ¶æœè¦å®šã‚’ç·©ã‚ã‚‹ã¨å‚åŠ åº¦ãŒä¸ŠãŒã‚Šã¾ã—ãŸã€‚'
                            },
                            closing: {
                                'zh-Hant': 'æ‡‰ç”±å­¸ç”Ÿå…±åŒåˆ¶å®š dress codeï¼Œè€Œéå¼·è¿«ç©¿è‘—åŒä¸€åˆ¶æœã€‚',
                                'en': 'Students should co-create a dress code instead of enforcing one outfit.',
                                'vi': 'NÃªn cÃ¹ng há»c sinh xÃ¢y dá»±ng quy Ä‘á»‹nh Äƒn máº·c thay vÃ¬ Ã¡p Ä‘áº·t má»™t bá»™ Ä‘á»“ng phá»¥c.',
                                'ja': 'åˆ¶æœã§ã¯ãªãã€ç”Ÿå¾’ã¨å…±ã«æœè£…ãƒ«ãƒ¼ãƒ«ã‚’ä½œã‚‹ã¹ãã§ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'åˆ¶æœèƒ½æ¸›å°‘å› å“ç‰Œèˆ‡åƒ¹æ ¼é€ æˆçš„éœ¸å‡Œèˆ‡æ’æ“ ã€‚',
                                'en': 'Uniforms reduce bullying tied to brands and price tags.',
                                'vi': 'Äá»“ng phá»¥c giáº£m báº¯t náº¡t liÃªn quan tá»›i thÆ°Æ¡ng hiá»‡u vÃ  giÃ¡ tiá»n.',
                                'ja': 'åˆ¶æœã¯ãƒ–ãƒ©ãƒ³ãƒ‰ã‚„ä¾¡æ ¼ã«ã‚ˆã‚‹ã„ã˜ã‚ã‚’æ¸›ã‚‰ã—ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'ä¸€è‡´ç©¿è‘—è®“æ ¡åœ’å®‰å…¨æ€§èˆ‡æ­¸å±¬æ„Ÿæ›´é«˜ã€‚',
                                'en': 'Shared attire boosts campus safety and belonging.',
                                'vi': 'Trang phá»¥c thá»‘ng nháº¥t tÄƒng cáº£m giÃ¡c an toÃ n vÃ  gáº¯n káº¿t.',
                                'ja': 'åŒã˜æœè£…ã¯å­¦æ ¡ã®å®‰å…¨æ€§ã¨æ‰€å±æ„è­˜ã‚’é«˜ã‚ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'å¤§é‡æ¡è³¼åˆ¶æœåè€Œå¯èƒ½é™ä½å®¶åº­æ”¯å‡ºã€‚',
                                'en': 'Bulk purchasing can actually lower overall family spending.',
                                'vi': 'Mua Ä‘á»“ng phá»¥c sá»‘ lÆ°á»£ng lá»›n cÃ³ thá»ƒ giáº£m chi phÃ­ chung.',
                                'ja': 'åˆ¶æœã‚’ã¾ã¨ã‚ã¦è³¼å…¥ã™ã‚Œã°å®¶åº­ã®è² æ‹…ãŒæ¸›ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ å¼·èª¿è‡ªæˆ‘è¡¨é”ï¼Œä½†å»ºè­°æå‡ºå…·é«”çš„ dress code æ›¿ä»£æ–¹æ¡ˆã€‚',
                                'en': 'You focused on expression; present a concrete dress-code alternative.',
                                'vi': 'Báº¡n nháº¥n máº¡nh tá»± do biá»ƒu Ä‘áº¡t; hÃ£y Ä‘Æ°a ra quy Ä‘á»‹nh Äƒn máº·c cá»¥ thá»ƒ thay tháº¿.',
                                'ja': 'è‡ªå·±è¡¨ç¾ã‚’å¼·èª¿ã—ã¾ã—ãŸãŒã€ä»£ã‚ã‚Šã®æœè£…ãƒ«ãƒ¼ãƒ«ã‚’å…·ä½“çš„ã«ç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'æè¿°å¦‚ä½•è™•ç†ä¸ç•¶ç©¿è‘—çš„ç•Œç·šï¼Œé¿å…è½çœ¾è¦ºå¾—å¤ªé¬†æ•£ã€‚',
                                    'en': 'Explain boundaries for inappropriate outfits so the plan feels grounded.',
                                    'vi': 'Giáº£i thÃ­ch ranh giá»›i trang phá»¥c khÃ´ng phÃ¹ há»£p Ä‘á»ƒ káº¿ hoáº¡ch khÃ´ng lá»ng láº»o.',
                                    'ja': 'ä¸é©åˆ‡ãªæœè£…ã®åŸºæº–ã‚’ç¤ºã—ã€è¨ˆç”»ã«å®ŸåŠ¹æ€§ã‚’æŒãŸã›ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åŠ å…¥ä¸€å€‹æ–‡åŒ–æˆ–æ€§åˆ¥å‹å–„çš„å…·é«”æ¡ˆä¾‹ã€‚',
                                    'en': 'Add one example of a culturally or gender-inclusive policy working.',
                                    'vi': 'ÄÆ°a vÃ­ dá»¥ vá» chÃ­nh sÃ¡ch thÃ¢n thiá»‡n vÄƒn hÃ³a hoáº·c giá»›i Ä‘Æ°á»£c Ã¡p dá»¥ng hiá»‡u quáº£.',
                                    'ja': 'æ–‡åŒ–ã‚„ã‚¸ã‚§ãƒ³ãƒ€ãƒ¼ã«é…æ…®ã—ãŸæˆåŠŸäº‹ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹7ã€åé§8ã€è¡¨é”8ã€ç­–ç•¥7ï¼ˆç¸½åˆ†30/40ï¼‰ã€‚',
                                'en': 'Score: Content 7, Refutation 8, Delivery 8, Strategy 7 (30/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 7, Pháº£n biá»‡n 8, TrÃ¬nh bÃ y 8, Chiáº¿n lÆ°á»£c 7 (30/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹7ãƒ»åè«–8ãƒ»è¡¨ç¾8ãƒ»æˆ¦ç•¥7ï¼ˆ30/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'ç”¨ä¸€å¼µè¡¨æ ¼åˆ—å‡º dress code åŸå‰‡ï¼Œæå‡æ¸…æ™°åº¦ã€‚',
                                    'en': 'Use a quick checklist of dress-code principles to boost clarity.',
                                    'vi': 'DÃ¹ng báº£ng liá»‡t kÃª nguyÃªn táº¯c trang phá»¥c Ä‘á»ƒ rÃµ rÃ ng hÆ¡n.',
                                    'ja': 'æœè£…ãƒ«ãƒ¼ãƒ«ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’ç¤ºã—ã€åˆ†ã‹ã‚Šã‚„ã™ãã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åœ¨çµå°¾æé†’è½çœ¾æ­¤æ–¹æ¡ˆä¹Ÿèƒ½æå‡å­¸ç”Ÿåƒèˆ‡åº¦ã€‚',
                                    'en': 'Close by linking your model to improved student engagement.',
                                    'vi': 'Káº¿t luáº­n báº±ng cÃ¡ch liÃªn há»‡ mÃ´ hÃ¬nh vá»›i viá»‡c tÄƒng má»©c Ä‘á»™ tham gia cá»§a há»c sinh.',
                                    'ja': 'ææ¡ˆãŒç”Ÿå¾’ã®å‚åŠ æ„æ¬²ã‚’é«˜ã‚ã‚‹ç‚¹ã‚’æœ€å¾Œã«å¼·èª¿ã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    }
                },
                questions: [
                    {
                        'zh-Hant': 'ä½ èªç‚º dress code æ‡‰å„ªå…ˆå®ˆè­·å…¬å¹³é‚„æ˜¯è¡¨é”ï¼Ÿ',
                        'en': 'Should a dress code protect equity or expression first?',
                        'vi': 'Quy Ä‘á»‹nh trang phá»¥c nÃªn Æ°u tiÃªn cÃ´ng báº±ng hay biá»ƒu Ä‘áº¡t?',
                        'ja': 'æœè£…ãƒ«ãƒ¼ãƒ«ã¯å…¬å¹³æ€§ã¨è¡¨ç¾ã®ã©ã¡ã‚‰ã‚’å„ªå…ˆã™ã¹ãã§ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å°æ–¼ç„¡æ³•è² æ“”åˆ¶æœçš„å®¶åº­ï¼Œä½ æä¾›ä»€éº¼å”åŠ©ï¼Ÿ',
                        'en': 'How will you support families who cannot afford uniforms?',
                        'vi': 'Báº¡n há»— trá»£ tháº¿ nÃ o cho gia Ä‘Ã¬nh khÃ´ng Ä‘á»§ kháº£ nÄƒng mua Ä‘á»“ng phá»¥c?',
                        'ja': 'åˆ¶æœã‚’è² æ‹…ã§ããªã„å®¶åº­ã¸ã®æ”¯æ´ç­–ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æœè£èˆ‡å­¸ç¿’è¡¨ç¾ä¹‹é–“æœ‰ä½•ç ”ç©¶é€£çµï¼Ÿ',
                        'en': 'What research links attire to academic or behavioural outcomes?',
                        'vi': 'CÃ³ nghiÃªn cá»©u nÃ o liÃªn há»‡ trang phá»¥c vá»›i káº¿t quáº£ há»c táº­p hay hÃ nh vi khÃ´ng?',
                        'ja': 'æœè£…ã¨å­¦æ¥­ãƒ»è¡Œå‹•ã®é–¢é€£ã‚’ç¤ºã™ç ”ç©¶ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æ–‡åŒ–æˆ–å®—æ•™æœé£¾å¦‚ä½•åœ¨åˆ¶æœæ”¿ç­–ä¸­è¢«å°Šé‡ï¼Ÿ',
                        'en': 'How will cultural or religious attire be accommodated?',
                        'vi': 'Báº¡n sáº½ dung hÃ²a trang phá»¥c vÄƒn hÃ³a hay tÃ´n giÃ¡o nhÆ° tháº¿ nÃ o?',
                        'ja': 'æ–‡åŒ–çš„ãƒ»å®—æ•™çš„ãªæœè£…ã«ã¯ã©ã†å¯¾å¿œã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'èª°èƒ½æ±ºå®šä»€éº¼æ˜¯ã€Œåˆå®œã€çš„ç©¿è‘—ï¼Ÿ',
                        'en': 'Who decides what counts as appropriate clothing?',
                        'vi': 'Ai sáº½ quyáº¿t Ä‘á»‹nh tháº¿ nÃ o lÃ  trang phá»¥c phÃ¹ há»£p?',
                        'ja': 'ä½•ãŒé©åˆ‡ãªæœè£…ã‹ã‚’èª°ãŒåˆ¤æ–­ã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å­£ç¯€è½‰æ›æ™‚ï¼Œå¦‚ä½•ç¢ºä¿å­¸ç”Ÿèˆ’é©ï¼Ÿ',
                        'en': 'How will you keep students comfortable during seasonal changes?',
                        'vi': 'Khi chuyá»ƒn mÃ¹a, báº¡n Ä‘áº£m báº£o há»c sinh váº«n thoáº£i mÃ¡i ra sao?',
                        'ja': 'å­£ç¯€ã®å¤‰ã‚ã‚Šç›®ã«ç”Ÿå¾’ã®å¿«é©ã•ã‚’ã©ã†ç¢ºä¿ã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'è‹¥æ”¿ç­–é€šéæˆ–è¢«å¦æ±ºï¼Œä½ æ‰“ç®—å¦‚ä½•è¡¡é‡æˆåŠŸï¼Ÿ',
                        'en': 'If the policy passes or fails, how will you measure success?',
                        'vi': 'Náº¿u chÃ­nh sÃ¡ch Ä‘Æ°á»£c thÃ´ng qua hoáº·c bÃ¡c bá», báº¡n sáº½ Ä‘o lÆ°á»ng thÃ nh cÃ´ng tháº¿ nÃ o?',
                        'ja': 'æ”¿ç­–ãŒæ¡æŠã¾ãŸã¯å¦æ±ºã•ã‚ŒãŸå ´åˆã€æˆåŠŸã‚’ã©ã†æ¸¬å®šã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'ä½ æœƒå¦‚ä½•è®“å­¸ç”Ÿåƒèˆ‡åˆ¶æœæˆ– dress code çš„åˆ¶å®šï¼Ÿ',
                        'en': 'How will you include students in designing the uniform or dress code?',
                        'vi': 'Báº¡n sáº½ khiáº¿n há»c sinh tham gia xÃ¢y dá»±ng Ä‘á»“ng phá»¥c hay quy Ä‘á»‹nh trang phá»¥c tháº¿ nÃ o?',
                        'ja': 'åˆ¶æœã‚„æœè£…ãƒ«ãƒ¼ãƒ«ã®ç­–å®šã«ç”Ÿå¾’ã‚’ã©ã†å‚åŠ ã•ã›ã¾ã™ã‹ï¼Ÿ'
                    }
                ]
            },
            {
                id: 'screen-time',
                title: {
                    'zh-Hant': 'æœ¬é™¢èªç‚ºæ‡‰é™åˆ¶12æ­²ä»¥ä¸‹å…’ç«¥çš„æ¯æ—¥è¢å¹•æ™‚é–“',
                    'en': 'This house would limit daily screen time for children under 12',
                    'vi': 'Quá»‘c há»™i cho ráº±ng nÃªn giá»›i háº¡n thá»i lÆ°á»£ng mÃ n hÃ¬nh má»—i ngÃ y cho tráº» dÆ°á»›i 12 tuá»•i',
                    'ja': 'æœ¬é™¢ã¯12æ­³æœªæº€ã®å­ã©ã‚‚ã®1æ—¥ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³æ™‚é–“ã‚’åˆ¶é™ã™ã¹ãã ã¨è€ƒãˆã‚‹'
                },
                sides: {
                    pro: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘æ”¯æŒè¨­å®šè¢å¹•ä¸Šé™ï¼Œå¹«åŠ©å­©å­å»ºç«‹å¥åº·çš„æ•¸ä½ç¿’æ…£ã€‚',
                                'en': 'We support setting limits so children build healthy digital habits.',
                                'vi': 'ChÃºng tÃ´i á»§ng há»™ giá»›i háº¡n Ä‘á»ƒ tráº» hÃ¬nh thÃ nh thÃ³i quen sá»‘ lÃ nh máº¡nh.',
                                'ja': 'å­ã©ã‚‚ãŒå¥å…¨ãªãƒ‡ã‚¸ã‚¿ãƒ«ç¿’æ…£ã‚’èº«ã«ã¤ã‘ã‚‹ã‚ˆã†ä¸Šé™ã‚’è¨­ã‘ã‚‹ã¹ãã§ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'éå¤šè¢å¹•æ™‚é–“æœƒæ’æ“ ç¡çœ èˆ‡æˆ¶å¤–æ´»å‹•ã€‚',
                                'en': 'Excess screen time crowds out sleep and outdoor play.',
                                'vi': 'Thá»i gian mÃ n hÃ¬nh quÃ¡ nhiá»u chiáº¿m máº¥t giá» ngá»§ vÃ  váº­n Ä‘á»™ng.',
                                'ja': 'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³æ™‚é–“ãŒå¤šã™ãã‚‹ã¨ç¡çœ ã‚„å¤–éŠã³ãŒçŠ ç‰²ã«ãªã‚Šã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'å°å…’ç§‘å”æœƒå»ºè­°12æ­²ä»¥ä¸‹æ¯å¤©ä¸è¶…éå…©å°æ™‚ã€‚',
                                'en': 'Pediatric associations recommend no more than two hours a day under age twelve.',
                                'vi': 'Hiá»‡p há»™i nhi khoa khuyáº¿n nghá»‹ tráº» dÆ°á»›i 12 tuá»•i khÃ´ng quÃ¡ hai giá» má»—i ngÃ y.',
                                'ja': 'å°å…ç§‘å­¦ä¼šã¯12æ­³æœªæº€ã¯1æ—¥2æ™‚é–“ä»¥å†…ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'æ˜ç¢ºçš„é™åˆ¶èƒ½é¼“å‹µå®¶åº­èŠ±æ™‚é–“é–±è®€èˆ‡å…±åŒæ´»å‹•ã€‚',
                                'en': 'Clear limits encourage families to fill time with reading and shared play.',
                                'vi': 'Giá»›i háº¡n rÃµ rÃ ng khuyáº¿n khÃ­ch gia Ä‘Ã¬nh Ä‘á»c sÃ¡ch vÃ  chÆ¡i cÃ¹ng nhau.',
                                'ja': 'æ˜ç¢ºãªåˆ¶é™ãŒã‚ã‚Œã°å®¶æ—ã§èª­æ›¸ã‚„éŠã³ã‚’æ¥½ã—ã‚ã¾ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'ç«‹æ³•ä¿éšœå…’ç«¥å°ˆæ³¨åŠ›èˆ‡æƒ…ç·’å¥åº·æ˜¯å¿…è¦çš„ã€‚',
                                'en': 'Legislating guardrails protects childrenâ€™s focus and emotional health.',
                                'vi': 'Äáº·t rÃ o cháº¯n phÃ¡p lÃ½ Ä‘á»ƒ báº£o vá»‡ sá»± táº­p trung vÃ  sá»©c khá»e cáº£m xÃºc cá»§a tráº».',
                                'ja': 'å­ã©ã‚‚ã®é›†ä¸­åŠ›ã¨æ„Ÿæƒ…ã®å¥åº·ã‚’å®ˆã‚‹æ³•çš„æ çµ„ã¿ãŒå¿…è¦ã§ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'éåº¦ä½¿ç”¨èˆ‡ç„¦æ…®ã€æ³¨æ„åŠ›ä¸è¶³å¯†åˆ‡ç›¸é—œã€‚',
                                'en': 'Heavy use is strongly linked to anxiety and attention issues.',
                                'vi': 'Láº¡m dá»¥ng mÃ n hÃ¬nh liÃªn quan cháº·t cháº½ Ä‘áº¿n lo Ã¢u vÃ  thiáº¿u táº­p trung.',
                                'ja': 'éåº¦ãªåˆ©ç”¨ã¯ä¸å®‰ã‚„æ³¨æ„æ¬ å¦‚ã¨å¼·ã„é–¢é€£ãŒã‚ã‚Šã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'ä¸–ç•Œè¡›ç”Ÿçµ„ç¹”ç ”ç©¶æŒ‡å‡ºè¶…éä¸Šé™é¢¨éšªæ˜é¡¯ä¸Šå‡ã€‚',
                                'en': 'WHO reports show risks spike beyond recommended thresholds.',
                                'vi': 'BÃ¡o cÃ¡o WHO cho tháº¥y rá»§i ro tÄƒng máº¡nh khi vÆ°á»£t khuyáº¿n nghá»‹.',
                                'ja': 'WHOã®å ±å‘Šã§ã¯æ¨å¥¨æ™‚é–“ã‚’è¶…ãˆã‚‹ã¨ãƒªã‚¹ã‚¯ãŒæ€¥å¢—ã—ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'åˆ¶åº¦åŒ–é™åˆ¶è¿«ä½¿å¹³å°èˆ‡å®¶é•·å…±åŒå»ºç«‹ä¿è­·æ©Ÿåˆ¶ã€‚',
                                'en': 'Codifying limits pushes platforms and parents to build safeguards together.',
                                'vi': 'Thiáº¿t láº­p luáº­t buá»™c ná»n táº£ng vÃ  phá»¥ huynh cÃ¹ng xÃ¢y dá»±ng biá»‡n phÃ¡p báº£o vá»‡.',
                                'ja': 'æ³•çš„ãªä¸Šé™ã«ã‚ˆã‚Šã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ä¿è­·è€…ãŒå”åŠ›ã—ã¦å®‰å…¨ç­–ã‚’æ•´ãˆã¾ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'å®¶åº­æ—¥ç¨‹ä¸åŒï¼Œéœ€è¦æ›´å¤§çš„å½ˆæ€§ã€‚',
                                'en': 'Family schedules differ, so flexibility is essential.',
                                'vi': 'Lá»‹ch sinh hoáº¡t gia Ä‘Ã¬nh khÃ¡c nhau nÃªn cáº§n linh hoáº¡t.',
                                'ja': 'å®¶åº­ã”ã¨ã«ç”Ÿæ´»ãƒªã‚ºãƒ ãŒé•ã†ãŸã‚æŸ”è»Ÿæ€§ãŒå¿…è¦ã§ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'ç§‘æŠ€ä¹Ÿæ˜¯å­¸ç¿’èˆ‡ä¿æŒè¯ç¹«çš„é‡è¦å·¥å…·ã€‚',
                                'en': 'Technology is vital for learning and staying connected.',
                                'vi': 'CÃ´ng nghá»‡ cÅ©ng ráº¥t quan trá»ng cho há»c táº­p vÃ  káº¿t ná»‘i.',
                                'ja': 'ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¯å­¦ç¿’ã‚„äº¤æµã«ä¸å¯æ¬ ã§ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'åš´æ ¼é™åˆ¶å¯èƒ½æ‡²ç½°ä¾è³´è¢å¹•è¼”å…·çš„å­©å­ã€‚',
                                'en': 'Strict caps may punish kids who rely on screens for accessibility.',
                                'vi': 'Giá»›i háº¡n cá»©ng cÃ³ thá»ƒ gÃ¢y báº¥t lá»£i cho tráº» cáº§n há»— trá»£ qua mÃ n hÃ¬nh.',
                                'ja': 'å³ã—ã„åˆ¶é™ã¯æ”¯æ´æ©Ÿå™¨ã¨ã—ã¦ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚’ä½¿ã†å­ã©ã‚‚ã‚’å›°ã‚‰ã›ã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ é»å‡ºå¥åº·é¢¨éšªï¼Œä½†éœ€è¦äº¤ä»£å½ˆæ€§èª¿æ•´çš„ç©ºé–“ã€‚',
                                'en': 'You flagged health risks; clarify where flexibility remains.',
                                'vi': 'Báº¡n nÃªu rá»§i ro sá»©c khá»e; hÃ£y chá»‰ rÃµ nhá»¯ng pháº§n linh hoáº¡t.',
                                'ja': 'å¥åº·ãƒªã‚¹ã‚¯ã‚’ç¤ºã—ã¾ã—ãŸãŒã€æŸ”è»Ÿã«å¯¾å¿œã™ã‚‹ä½™åœ°ã‚‚èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'èªªæ˜å¦‚ä½•ç‚ºç·šä¸Šèª²ç¨‹æˆ–è¼”å…·è¨­å®šä¾‹å¤–é–€æª»ã€‚',
                                    'en': 'Describe exception pathways for online classes or assistive tech.',
                                    'vi': 'Giáº£i thÃ­ch cÃ¡ch Ä‘áº·t ngoáº¡i lá»‡ cho lá»›p há»c trá»±c tuyáº¿n hoáº·c thiáº¿t bá»‹ há»— trá»£.',
                                    'ja': 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æˆæ¥­ã‚„æ”¯æ´æ©Ÿå™¨ã®ä¾‹å¤–æ ã‚’å…·ä½“çš„ã«è¿°ã¹ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åŠ å…¥å¹³å°è²¬ä»»çš„æ¢æ¬¾ï¼Œè®“æ–¹æ¡ˆæ›´å…¨é¢ã€‚',
                                    'en': 'Add platform accountability measures to round out the plan.',
                                    'vi': 'Bá»• sung trÃ¡ch nhiá»‡m cá»§a ná»n táº£ng Ä‘á»ƒ káº¿ hoáº¡ch toÃ n diá»‡n hÆ¡n.',
                                    'ja': 'ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®è²¬ä»»ã‚’ç››ã‚Šè¾¼ã¿ã€è¨ˆç”»ã‚’åŒ…æ‹¬çš„ã«ã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹9ã€åé§7ã€è¡¨é”7ã€ç­–ç•¥8ï¼ˆç¸½åˆ†31/40ï¼‰ã€‚',
                                'en': 'Score: Content 9, Refutation 7, Delivery 7, Strategy 8 (31/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 9, Pháº£n biá»‡n 7, TrÃ¬nh bÃ y 7, Chiáº¿n lÆ°á»£c 8 (31/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹9ãƒ»åè«–7ãƒ»è¡¨ç¾7ãƒ»æˆ¦ç•¥8ï¼ˆ31/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'è£œä¸Šä¸€æ®µçµ±è¨ˆåœ–æˆ–å…·é«”æ•¸æ“šï¼Œæå‡éœ‡æ’¼åŠ›ã€‚',
                                    'en': 'Include a quick data snapshot to increase impact.',
                                    'vi': 'ThÃªm sá»‘ liá»‡u nhanh Ä‘á»ƒ láº­p luáº­n thuyáº¿t phá»¥c hÆ¡n.',
                                    'ja': 'çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’çŸ­ãç¤ºã—ã€èª¬å¾—åŠ›ã‚’é«˜ã‚ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'æè¿°ä¸€å€‹æˆåŠŸå¯¦æ–½æ™‚é–“é™åˆ¶çš„åŸå¸‚æˆ–å­¸å€æ¡ˆä¾‹ã€‚',
                                    'en': 'Reference a city or district that implemented limits successfully.',
                                    'vi': 'Nháº¯c tá»›i má»™t thÃ nh phá»‘ hay quáº­n Ã¡p dá»¥ng giá»›i háº¡n thÃ nh cÃ´ng.',
                                    'ja': 'æ™‚é–“åˆ¶é™ã‚’å°å…¥ã—ã¦æˆåŠŸã—ãŸè‡ªæ²»ä½“ã‚’ç´¹ä»‹ã—ã¦ãã ã•ã„ã€‚'
                                }
                            ]
                        }
                    },
                    con: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘åå°ç¡¬æ€§é™åˆ¶ï¼Œå› ç‚ºæ¯å€‹å®¶åº­éœ€è¦ä¸åŒçš„å®‰æ’ã€‚',
                                'en': 'We oppose rigid caps because every family needs different arrangements.',
                                'vi': 'ChÃºng tÃ´i pháº£n Ä‘á»‘i giá»›i háº¡n cá»©ng vÃ¬ má»—i gia Ä‘Ã¬nh cÃ³ nhu cáº§u khÃ¡c nhau.',
                                'ja': 'å®¶åº­ã”ã¨ã«äº‹æƒ…ãŒé•ã†ã®ã§ã€ç”»ä¸€çš„ãªä¸Šé™ã«ã¯åå¯¾ã—ã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'è¢å¹•ä¹Ÿæ˜¯å­¸ç¿’ã€ç¤¾äº¤èˆ‡èªè¨€ç·´ç¿’çš„é‡è¦å·¥å…·ã€‚',
                                'en': 'Screens support learning, socialisation, and language practice.',
                                'vi': 'MÃ n hÃ¬nh há»— trá»£ há»c táº­p, giao tiáº¿p vÃ  luyá»‡n ngÃ´n ngá»¯.',
                                'ja': 'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã¯å­¦ç¿’ã‚„äº¤æµã€è¨€èªç·´ç¿’ã«ã‚‚å½¹ç«‹ã¡ã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'é è·æ•™å­¸èˆ‡å®¶æ—è¯ç¹«å·²æ˜¯æ—¥å¸¸ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ã€‚',
                                'en': 'Remote classes and family video calls are now part of daily life.',
                                'vi': 'Lá»›p há»c trá»±c tuyáº¿n vÃ  gá»i video vá»›i gia Ä‘Ã¬nh Ä‘Ã£ trá»Ÿ nÃªn quen thuá»™c.',
                                'ja': 'é éš”æˆæ¥­ã‚„å®¶æ—ã¨ã®ãƒ“ãƒ‡ã‚ªé€šè©±ã¯æ—¥å¸¸ã«ãªã‚Šã¾ã—ãŸã€‚'
                            },
                            closing: {
                                'zh-Hant': 'å®¶é•·æ‡‰å®šåˆ¶å½ˆæ€§è¦ç¯„ï¼Œè€Œéè¢«å‹•æ¥å—çµ±ä¸€æ™‚æ•¸ã€‚',
                                'en': 'Parents should tailor flexible rules instead of a one-size time cap.',
                                'vi': 'Phá»¥ huynh nÃªn xÃ¢y dá»±ng quy táº¯c linh hoáº¡t thay vÃ¬ Ã¡p Ä‘áº·t má»™t con sá»‘ cá»‘ Ä‘á»‹nh.',
                                'ja': 'ä¿è­·è€…ãŒå®¶åº­ã«åˆã‚ã›ãŸæŸ”è»Ÿãªãƒ«ãƒ¼ãƒ«ã‚’ä½œã‚‹ã¹ãã§ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'å…¨é¢é™åˆ¶å¿½ç•¥æ•¸ä½ç´ é¤Šæ˜¯æœªä¾†å¿…å‚™æŠ€èƒ½ã€‚',
                                'en': 'Blanket limits ignore that digital fluency is a future literacy.',
                                'vi': 'Giá»›i háº¡n tá»•ng thá»ƒ bá» qua viá»‡c thÃ nh tháº¡o cÃ´ng nghá»‡ lÃ  ká»¹ nÄƒng tÆ°Æ¡ng lai.',
                                'ja': 'åŒ…æ‹¬çš„ãªåˆ¶é™ã¯ãƒ‡ã‚¸ã‚¿ãƒ«ãƒªãƒ†ãƒ©ã‚·ãƒ¼ã¨ã„ã†å°†æ¥ã®å¿…é ˆã‚¹ã‚­ãƒ«ã‚’ç„¡è¦–ã—ã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'é‡é»æ‡‰æ”¾åœ¨å…±åŒåˆ¶å®šåª’é«”ä½¿ç”¨è¦ç¯„ï¼Œè€Œä¸æ˜¯å–®ä¸€æ™‚æ•¸ã€‚',
                                'en': 'We should focus on co-created media plans, not chasing a single number.',
                                'vi': 'Trá»ng tÃ¢m nÃªn lÃ  káº¿ hoáº¡ch sá»­ dá»¥ng thiáº¿t bá»‹ do gia Ä‘Ã¬nh cÃ¹ng xÃ¢y dá»±ng, khÃ´ng chá»‰ lÃ  con sá»‘ giá».',
                                'ja': 'æ™‚é–“ã§ã¯ãªãã€å®¶æ—ã§ä½œã‚‹ãƒ¡ãƒ‡ã‚£ã‚¢åˆ©ç”¨è¨ˆç”»ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹ã¹ãã§ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'ç´è¥¿è˜­å®¶åº­åª’é«”è¨ˆç•«é¡¯ç¤ºå”å•†è¦ç¯„æ¯”ç¡¬æ€§é™åˆ¶æ›´æœ‰æ•ˆã€‚',
                                'en': 'New Zealand family media plans show negotiated rules outperform strict bans.',
                                'vi': 'Káº¿ hoáº¡ch truyá»n thÃ´ng gia Ä‘Ã¬nh á»Ÿ New Zealand cho tháº¥y quy táº¯c thÆ°Æ¡ng lÆ°á»£ng hiá»‡u quáº£ hÆ¡n cáº¥m Ä‘oÃ¡n.',
                                'ja': 'ãƒ‹ãƒ¥ãƒ¼ã‚¸ãƒ¼ãƒ©ãƒ³ãƒ‰ã®å®¶åº­ãƒ¡ãƒ‡ã‚£ã‚¢è¨ˆç”»ã§ã¯äº¤æ¸‰å‹ãƒ«ãƒ¼ãƒ«ãŒç¦æ­¢ã‚ˆã‚ŠåŠ¹æœçš„ã§ã—ãŸã€‚'
                            },
                            closing: {
                                'zh-Hant': 'æ‡‰æŠ•è³‡åª’é«”ç´ é¤Šèˆ‡å®¶é•·æŒ‡å¼•ï¼Œè€Œéå–®ä¸€æ³•å¾‹é™åˆ¶ã€‚',
                                'en': 'Invest in media literacy and parent guides instead of a single legal cap.',
                                'vi': 'NÃªn Ä‘áº§u tÆ° vÃ o giÃ¡o dá»¥c truyá»n thÃ´ng vÃ  hÆ°á»›ng dáº«n cho phá»¥ huynh thay vÃ¬ luáº­t cá»©ng.',
                                'ja': 'æ³•çš„åˆ¶é™ã‚ˆã‚Šã‚‚ãƒ¡ãƒ‡ã‚£ã‚¢ãƒªãƒ†ãƒ©ã‚·ãƒ¼æ•™è‚²ã‚„ä¿è­·è€…ã‚¬ã‚¤ãƒ‰ã«æŠ•è³‡ã—ã¾ã—ã‚‡ã†ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'éåº¦ä½¿ç”¨è¢å¹•æœƒå‚·å®³ç¡çœ èˆ‡æ³¨æ„åŠ›ã€‚',
                                'en': 'Excess screen time harms sleep and focus.',
                                'vi': 'DÃ¹ng mÃ n hÃ¬nh quÃ¡ nhiá»u áº£nh hÆ°á»Ÿng xáº¥u Ä‘áº¿n giáº¥c ngá»§ vÃ  sá»± táº­p trung.',
                                'ja': 'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®ã‚„ã‚Šã™ãã¯ç¡çœ ã¨é›†ä¸­åŠ›ã«æ‚ªå½±éŸ¿ã§ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'é†«ç™‚å°ˆå®¶å·²æå‡ºæ˜ç¢ºä½¿ç”¨ä¸Šé™å»ºè­°ã€‚',
                                'en': 'Health experts already recommend clear upper limits.',
                                'vi': 'ChuyÃªn gia y táº¿ Ä‘Ã£ Ä‘Æ°a ra khuyáº¿n nghá»‹ rÃµ rÃ ng vá» giá»›i háº¡n.',
                                'ja': 'å°‚é–€å®¶ã¯ã™ã§ã«æ˜ç¢ºãªåˆ©ç”¨ä¸Šé™ã‚’å‹§å‘Šã—ã¦ã„ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'å¹³å°æ¼”ç®—æ³•æœƒåˆ»æ„è®“å­©å­ä¸Šç™®ï¼Œéœ€è¦å¤–éƒ¨åˆ¶è¡¡ã€‚',
                                'en': 'Platform algorithms hook kids intentionally, so we need external guardrails.',
                                'vi': 'Thuáº­t toÃ¡n cá»§a ná»n táº£ng cá»‘ giá»¯ tráº» trÃªn mÃ n hÃ¬nh nÃªn cáº§n hÃ ng rÃ o bÃªn ngoÃ i.',
                                'ja': 'ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å­ã©ã‚‚ã‚’æ‹˜æŸã™ã‚‹ãŸã‚å¤–éƒ¨ã®æ­¯æ­¢ã‚ãŒå¿…è¦ã§ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ æˆåŠŸå¼·èª¿å½ˆæ€§ï¼Œä½†è«‹è£œå……å¦‚ä½•èˆ‡é†«ç™‚å»ºè­°å°é½Šã€‚',
                                'en': 'You stressed flexibility; now align it with medical guidance.',
                                'vi': 'Báº¡n nháº¥n máº¡nh tÃ­nh linh hoáº¡t; hÃ£y giáº£i thÃ­ch sao cho phÃ¹ há»£p khuyáº¿n nghá»‹ y táº¿.',
                                'ja': 'æŸ”è»Ÿæ€§ã‚’å¼·èª¿ã—ã¾ã—ãŸãŒã€åŒ»ç™‚æ¨å¥¨ã¨ã®æ•´åˆæ€§ã‚‚ç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'æå‡ºå®¶åº­åª’é«”åˆç´„çš„ç¯„ä¾‹ï¼Œè®“æ–¹æ¡ˆå¯æ“ä½œã€‚',
                                    'en': 'Share a sample family media contract to show practicality.',
                                    'vi': 'ÄÆ°a vÃ­ dá»¥ vá» "há»£p Ä‘á»“ng" sá»­ dá»¥ng thiáº¿t bá»‹ trong gia Ä‘Ã¬nh Ä‘á»ƒ dá»… Ã¡p dá»¥ng.',
                                    'ja': 'å®¶åº­ãƒ¡ãƒ‡ã‚£ã‚¢å¥‘ç´„ã®ä¾‹ã‚’ç¤ºã—ã€å®Ÿè¡Œã—ã‚„ã™ã•ã‚’ä¼ãˆã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'èªªæ˜å¦‚ä½•è¿½è¹¤èˆ‡å›å ±è¢å¹•ä½¿ç”¨æ™‚é–“ï¼Œç¢ºä¿è½å¯¦ã€‚',
                                    'en': 'Explain tracking and reflection habits to ensure follow-through.',
                                    'vi': 'Giáº£i thÃ­ch cÃ¡ch theo dÃµi vÃ  cÃ¹ng Ä‘Ã¡nh giÃ¡ thá»i gian mÃ n hÃ¬nh.',
                                    'ja': 'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³æ™‚é–“ã‚’è¨˜éŒ²ã—æŒ¯ã‚Šè¿”ã‚‹æ–¹æ³•ã‚’æç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹7ã€åé§7ã€è¡¨é”8ã€ç­–ç•¥8ï¼ˆç¸½åˆ†30/40ï¼‰ã€‚',
                                'en': 'Score: Content 7, Refutation 7, Delivery 8, Strategy 8 (30/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 7, Pháº£n biá»‡n 7, TrÃ¬nh bÃ y 8, Chiáº¿n lÆ°á»£c 8 (30/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹7ãƒ»åè«–7ãƒ»è¡¨ç¾8ãƒ»æˆ¦ç•¥8ï¼ˆ30/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'é–‹å ´å¯å…ˆè‚¯å®šå¥åº·é¢¨éšªï¼Œå†å¼•å‡ºè‡ªå¾‹æ¡†æ¶ã€‚',
                                    'en': 'Open by acknowledging health risks before pivoting to self-regulation.',
                                    'vi': 'Má»Ÿ Ä‘áº§u nÃªn ghi nháº­n rá»§i ro sá»©c khá»e rá»“i chuyá»ƒn sang khuÃ´n khá»• tá»± quáº£n.',
                                    'ja': 'å¥åº·ãƒªã‚¹ã‚¯ã‚’èªã‚ãŸä¸Šã§è‡ªå¾‹çš„ãªæ çµ„ã¿ã«è©±ã‚’ã¤ãªã’ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åŠ å…¥å®¶é•·èˆ‡å­©å­å…±åŒè¨‚è¦å‰‡çš„æ•…äº‹ï¼Œæ‹‰è¿‘è·é›¢ã€‚',
                                    'en': 'Add a story of a family co-writing rules to humanise your plan.',
                                    'vi': 'Ká»ƒ cÃ¢u chuyá»‡n gia Ä‘Ã¬nh cÃ¹ng Ä‘áº·t quy táº¯c Ä‘á»ƒ bÃ i nÃ³i gáº§n gÅ©i hÆ¡n.',
                                    'ja': 'å®¶æ—ãŒãƒ«ãƒ¼ãƒ«ã‚’ä¸€ç·’ã«ä½œã£ãŸäº‹ä¾‹ã‚’èªã‚Šã€è¦ªè¿‘æ„Ÿã‚’ä¸ãˆã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    }
                },
                questions: [
                    {
                        'zh-Hant': 'ä½ æœ€æ“”å¿ƒè¢å¹•éåº¦ä½¿ç”¨é€ æˆå“ªäº›å¥åº·å½±éŸ¿ï¼Ÿ',
                        'en': 'Which health impacts of screen overuse worry you most?',
                        'vi': 'Báº¡n lo ngáº¡i nháº¥t tÃ¡c Ä‘á»™ng sá»©c khá»e nÃ o do dÃ¹ng mÃ n hÃ¬nh quÃ¡ má»©c?',
                        'ja': 'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®ä½¿ã„ã™ãã§æœ€ã‚‚æ‡¸å¿µã™ã‚‹å¥åº·å½±éŸ¿ã¯ä½•ã§ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å¦‚ä½•å€åˆ†è£ç½®ä¸Šçš„å­¸ç¿’æ™‚é–“èˆ‡å¨›æ¨‚æ™‚é–“ï¼Ÿ',
                        'en': 'How will you distinguish learning time from entertainment on devices?',
                        'vi': 'Báº¡n phÃ¢n biá»‡t tháº¿ nÃ o giá»¯a thá»i gian há»c vÃ  giáº£i trÃ­ trÃªn thiáº¿t bá»‹?',
                        'ja': 'å­¦ç¿’æ™‚é–“ã¨å¨¯æ¥½æ™‚é–“ã‚’ã©ã†åŒºåˆ¥ã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å®¶é•·éœ€è¦å“ªäº›å·¥å…·ä¾†è¿½è¹¤è¢å¹•ä½¿ç”¨ï¼Ÿ',
                        'en': 'What tools do parents need to track screen use?',
                        'vi': 'Phá»¥ huynh cáº§n cÃ´ng cá»¥ nÃ o Ä‘á»ƒ theo dÃµi thá»i gian mÃ n hÃ¬nh?',
                        'ja': 'ä¿è­·è€…ãŒã‚¹ã‚¯ãƒªãƒ¼ãƒ³æ™‚é–“ã‚’ç®¡ç†ã™ã‚‹ã«ã¯ã©ã‚“ãªãƒ„ãƒ¼ãƒ«ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æ”¿ç­–å¦‚ä½•ç…§é¡§ä¾è³´è¼”å…·æˆ–ç‰¹æ®Šæ•™è‚²éœ€æ±‚çš„å­©å­ï¼Ÿ',
                        'en': 'How will the policy accommodate accessibility or special education needs?',
                        'vi': 'ChÃ­nh sÃ¡ch há»— trá»£ ra sao cho tráº» cáº§n thiáº¿t bá»‹ há»— trá»£ hoáº·c giÃ¡o dá»¥c Ä‘áº·c biá»‡t?',
                        'ja': 'æ”¯æ´æ©Ÿå™¨ã‚„ç‰¹åˆ¥æ”¯æ´ãŒå¿…è¦ãªå­ã©ã‚‚ã«ã¯ã©ã†å¯¾å¿œã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'ä½ æœƒç”¨å“ªäº›èª˜å› æˆ–ç½°å‰‡è®“å¹³å°é…åˆï¼Ÿ',
                        'en': 'What incentives or penalties ensure platform cooperation?',
                        'vi': 'Báº¡n sáº½ dÃ¹ng Æ°u Ä‘Ã£i hay cháº¿ tÃ i nÃ o Ä‘á»ƒ ná»n táº£ng phá»‘i há»£p?',
                        'ja': 'ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å”åŠ›ã•ã›ã‚‹ãŸã‚ã®ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ã‚„ç½°å‰‡ã¯ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'è¦å¦‚ä½•è¡¡é‡è¢å¹•é™åˆ¶çš„æˆæ•ˆæˆ–å‰¯ä½œç”¨ï¼Ÿ',
                        'en': 'How will you measure success or unintended harms from the limits?',
                        'vi': 'Báº¡n Ä‘o lÆ°á»ng hiá»‡u quáº£ vÃ  tÃ¡c dá»¥ng phá»¥ cá»§a giá»›i háº¡n tháº¿ nÃ o?',
                        'ja': 'åˆ¶é™ã®åŠ¹æœã‚„å‰¯ä½œç”¨ã‚’ã©ã†æ¸¬å®šã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æ¸›å°‘è¢å¹•å¾Œï¼Œä½ å»ºè­°ç”¨å“ªäº›æ›¿ä»£æ´»å‹•å¡«è£œæ™‚é–“ï¼Ÿ',
                        'en': 'What activities should fill the time when screens are reduced?',
                        'vi': 'Khi giáº£m mÃ n hÃ¬nh, nÃªn thay báº±ng hoáº¡t Ä‘á»™ng nÃ o?',
                        'ja': 'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³æ™‚é–“ã‚’æ¸›ã‚‰ã—ãŸåˆ†ã€ã©ã‚“ãªæ´»å‹•ã§è£œã„ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'ä½ æœƒå¦‚ä½•å‘å­©å­èˆ‡ç…§é¡§è€…è§£é‡‹é€™é …æœŸå¾…ï¼Ÿ',
                        'en': 'How will you communicate the expectations to children and caregivers?',
                        'vi': 'Báº¡n giáº£i thÃ­ch ká»³ vá»ng nÃ y cho tráº» vÃ  ngÆ°á»i chÄƒm sÃ³c ra sao?',
                        'ja': 'å­ã©ã‚‚ã¨ä¿è­·è€…ã«ã“ã®æ–¹é‡ã‚’ã©ã†ä¼ãˆã¾ã™ã‹ï¼Ÿ'
                    }
                ]
            },
            {
                id: 'vegetarian-day',
                title: {
                    'zh-Hant': 'æœ¬é™¢æ”¯æŒå­¸æ ¡ç´ é£Ÿæ—¥æ”¿ç­–',
                    'en': 'This house supports a vegetarian day policy in schools',
                    'vi': 'Quá»‘c há»™i á»§ng há»™ chÃ­nh sÃ¡ch ngÃ y Äƒn chay táº¡i trÆ°á»ng há»c',
                    'ja': 'æœ¬é™¢ã¯å­¦æ ¡ã®ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼æ”¿ç­–ã‚’æ”¯æŒã™ã‚‹'
                },
                sides: {
                    pro: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘æ”¯æŒæ¯é€±ä¸€æ¬¡çš„ç´ é£Ÿæ—¥ï¼Œè®“å­¸ç”Ÿåƒå¾—æ›´å‡è¡¡ã€‚',
                                'en': 'We support a weekly vegetarian day so students eat more balanced meals.',
                                'vi': 'ChÃºng tÃ´i á»§ng há»™ má»—i tuáº§n má»™t ngÃ y Äƒn chay Ä‘á»ƒ há»c sinh Äƒn uá»‘ng cÃ¢n báº±ng hÆ¡n.',
                                'ja': 'é€±ã«ä¸€åº¦ã®ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼ã‚’å°å…¥ã—ã€æ „é¤Šãƒãƒ©ãƒ³ã‚¹ã‚’æ•´ãˆã¾ã—ã‚‡ã†ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'ç´ é£Ÿé¸é …èƒ½å¢åŠ è”¬æœèˆ‡çº–ç¶­æ”å–ã€‚',
                                'en': 'Plant-based menus increase vegetables and fibre intake.',
                                'vi': 'Thá»±c Ä‘Æ¡n chay giÃºp tÄƒng rau cá»§ vÃ  cháº¥t xÆ¡.',
                                'ja': 'æ¤ç‰©ãƒ™ãƒ¼ã‚¹ã®çŒ®ç«‹ã§é‡èœã¨é£Ÿç‰©ç¹Šç¶­ãŒå¢—ãˆã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'ç‡Ÿé¤Šç ”ç©¶æŒ‡å‡ºç´ é£Ÿæ—¥èƒ½é™ä½åŠ å·¥è‚‰æ”å–ã€‚',
                                'en': 'Nutrition studies show vegetarian days reduce processed meat consumption.',
                                'vi': 'CÃ¡c nghiÃªn cá»©u dinh dÆ°á»¡ng cho tháº¥y ngÃ y Äƒn chay giáº£m lÆ°á»£ng thá»‹t cháº¿ biáº¿n.',
                                'ja': 'æ „é¤Šç ”ç©¶ã§ã¯ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼ãŒåŠ å·¥è‚‰ã®æ‘‚å–ã‚’æ¸›ã‚‰ã™ã¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'é€™æ˜¯å»ºç«‹å¥åº·é£²é£Ÿç¿’æ…£çš„ç°¡å–®èµ·é»ã€‚',
                                'en': 'It is a simple starting point for lifelong healthy eating habits.',
                                'vi': 'ÄÃ¢y lÃ  bÆ°á»›c khá»Ÿi Ä‘áº§u Ä‘Æ¡n giáº£n cho thÃ³i quen Äƒn uá»‘ng lÃ nh máº¡nh lÃ¢u dÃ i.',
                                'ja': 'ç”Ÿæ¶¯ã«ã‚ãŸã‚‹å¥åº·çš„ãªé£Ÿç”Ÿæ´»ã¸ã®ç°¡å˜ãªç¬¬ä¸€æ­©ã§ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'ç´ é£Ÿæ—¥åŒæ™‚æ¨å‹•å¥åº·èˆ‡æ°¸çºŒæ•™è‚²ã€‚',
                                'en': 'Vegetarian days advance both health and sustainability education.',
                                'vi': 'NgÃ y Äƒn chay thÃºc Ä‘áº©y cáº£ sá»©c khá»e láº«n giÃ¡o dá»¥c bá»n vá»¯ng.',
                                'ja': 'ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼ã¯å¥åº·ã¨æŒç¶šå¯èƒ½æ€§ã®æ•™è‚²ã‚’åŒæ™‚ã«é€²ã‚ã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'é€éé«”é©—å¼é¤é»ï¼Œå­¸ç”Ÿèƒ½ç†è§£é£²é£Ÿèˆ‡æ°£å€™çš„é€£çµã€‚',
                                'en': 'Experiential menus help students link diet choices to climate impact.',
                                'vi': 'Thá»±c Ä‘Æ¡n tráº£i nghiá»‡m giÃºp há»c sinh hiá»ƒu má»‘i liÃªn há»‡ giá»¯a Äƒn uá»‘ng vÃ  khÃ­ háº­u.',
                                'ja': 'ä½“é¨“å‹ã®çŒ®ç«‹ã§é£Ÿäº‹ã¨æ°—å€™ã®é–¢ä¿‚ã‚’ç†è§£ã§ãã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'å¾·åœ‹èˆ‡å°ç£ç¤ºç¯„å­¸æ ¡å¯¦æ–½å¾Œï¼Œå»šé¤˜èˆ‡ç¢³æ’éƒ½ä¸‹é™ã€‚',
                                'en': 'Pilot schools in Germany and Taiwan saw food waste and emissions drop.',
                                'vi': 'CÃ¡c trÆ°á»ng thÃ­ Ä‘iá»ƒm á»Ÿ Äá»©c vÃ  ÄÃ i Loan giáº£m rÃ¡c tháº£i thá»±c pháº©m vÃ  khÃ­ tháº£i.',
                                'ja': 'ãƒ‰ã‚¤ãƒ„ã‚„å°æ¹¾ã®ãƒ¢ãƒ‡ãƒ«æ ¡ã§ã¯é£Ÿå“ãƒ­ã‚¹ã¨æ’å‡ºé‡ãŒæ¸›ã‚Šã¾ã—ãŸã€‚'
                            },
                            closing: {
                                'zh-Hant': 'å­¸ç”Ÿä¹Ÿèƒ½å­¸æœƒè¨­è¨ˆå…¼é¡§ç‡Ÿé¤Šèˆ‡ç’°å¢ƒçš„èœå–®ã€‚',
                                'en': 'Students learn to design menus that balance nutrition and the planet.',
                                'vi': 'Há»c sinh há»c cÃ¡ch thiáº¿t káº¿ thá»±c Ä‘Æ¡n cÃ¢n báº±ng dinh dÆ°á»¡ng vÃ  mÃ´i trÆ°á»ng.',
                                'ja': 'ç”Ÿå¾’ã¯æ „é¤Šã¨ç’°å¢ƒã‚’ä¸¡ç«‹ã•ã›ãŸçŒ®ç«‹ã¥ãã‚Šã‚’å­¦ã¹ã¾ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'æœ‰äº›å­¸ç”Ÿéœ€è¦æ›´é«˜è›‹ç™½æˆ–ç‰¹æ®Šé£²é£Ÿæ‰èƒ½å¥åº·æˆé•·ã€‚',
                                'en': 'Some students need higher protein or specialised diets to grow well.',
                                'vi': 'Má»™t sá»‘ há»c sinh cáº§n nhiá»u Ä‘áº¡m hoáº·c cháº¿ Ä‘á»™ Äƒn Ä‘áº·c biá»‡t Ä‘á»ƒ phÃ¡t triá»ƒn.',
                                'ja': 'é«˜ãŸã‚“ã±ãã‚„ç‰¹åˆ¥ãªé£Ÿäº‹ãŒå¿…è¦ãªç”Ÿå¾’ã‚‚ã„ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'éæ•æˆ–å®—æ•™é£²é£Ÿé™åˆ¶å¯èƒ½èˆ‡èœå–®è¡çªã€‚',
                                'en': 'Allergies or religious restrictions may conflict with the menu.',
                                'vi': 'Dá»‹ á»©ng hoáº·c yÃªu cáº§u tÃ´n giÃ¡o cÃ³ thá»ƒ mÃ¢u thuáº«n vá»›i thá»±c Ä‘Æ¡n.',
                                'ja': 'ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚„å®—æ•™ä¸Šã®åˆ¶ç´„ãŒçŒ®ç«‹ã¨è¡çªã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚'
                            },
                            {
                                'zh-Hant': 'å­¸ç”Ÿè‹¥ä¸å–œæ­¡èœè‰²ï¼Œå¯èƒ½æ•´ç›’åˆé¤éƒ½ä¸åƒã€‚',
                                'en': 'If students dislike the dishes, they may skip lunch entirely.',
                                'vi': 'Náº¿u khÃ´ng thÃ­ch mÃ³n Äƒn, há»c sinh cÃ³ thá»ƒ bá» bá»¯a trÆ°a.',
                                'ja': 'æ–™ç†ãŒæ°—ã«å…¥ã‚‰ãªã„ã¨ã€ç”Ÿå¾’ã¯æ˜¼é£Ÿã‚’é£Ÿã¹ãªã„æã‚ŒãŒã‚ã‚Šã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ èªªæ˜å¥åº·èˆ‡æ°¸çºŒæ€§ï¼Œä½†é ˆè£œå……å› æ‡‰éæ•çš„æ©Ÿåˆ¶ã€‚',
                                'en': 'You covered health and sustainability; add how allergies are accommodated.',
                                'vi': 'Báº¡n Ä‘Ã£ nÃ³i vá» sá»©c khá»e vÃ  bá»n vá»¯ng; hÃ£y bá»• sung cÃ¡ch xá»­ lÃ½ dá»‹ á»©ng.',
                                'ja': 'å¥åº·ã¨æŒç¶šæ€§ã‚’èª¬æ˜ã—ã¾ã—ãŸãŒã€ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã¸ã®å¯¾å¿œã‚‚è¿°ã¹ã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'æåŠå®¢è£½åŒ–é¤ç›’æˆ–è‡ªé¸é…èœï¼Œå±•ç¾åŒ…å®¹æ€§ã€‚',
                                    'en': 'Mention custom boxes or mix-and-match stations to show inclusivity.',
                                    'vi': 'NÃªu phÆ°Æ¡ng Ã¡n há»™p cÆ¡m tÃ¹y chá»n hoáº·c quáº§y tá»± chá»n Ä‘á»ƒ tÄƒng tÃ­nh bao trÃ¹m.',
                                    'ja': 'ã‚«ã‚¹ã‚¿ãƒ å¼å½“ã‚„é¸ã¹ã‚‹å‰¯èœã§åŒ…æ‘‚æ€§ã‚’ç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'è£œä¸Šä¸€å€‹å­¸ç”Ÿå› ç´ é£Ÿæ—¥æ”¹è®Šé£²é£Ÿçš„æ•…äº‹ï¼Œå¢åŠ æ„ŸæŸ“åŠ›ã€‚',
                                    'en': 'Share a student story about discovering plant-based meals.',
                                    'vi': 'Ká»ƒ cÃ¢u chuyá»‡n há»c sinh thay Ä‘á»•i thÃ³i quen nhá» ngÃ y Äƒn chay.',
                                    'ja': 'ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼ã§é£Ÿç”Ÿæ´»ãŒå¤‰ã‚ã£ãŸç”Ÿå¾’ã®è©±ã‚’åŠ ãˆã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹8ã€åé§7ã€è¡¨é”8ã€ç­–ç•¥8ï¼ˆç¸½åˆ†31/40ï¼‰ã€‚',
                                'en': 'Score: Content 8, Refutation 7, Delivery 8, Strategy 8 (31/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 8, Pháº£n biá»‡n 7, TrÃ¬nh bÃ y 8, Chiáº¿n lÆ°á»£c 8 (31/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹8ãƒ»åè«–7ãƒ»è¡¨ç¾8ãƒ»æˆ¦ç•¥8ï¼ˆ31/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'é–‹å ´å¯ä»¥ç”¨å­¸æ ¡é¤å»³çš„æ’ç¢³é‡å°æ¯”ï¼Œå»ºç«‹ç·Šè¿«æ„Ÿã€‚',
                                    'en': 'Open with a cafeteria carbon comparison to set urgency.',
                                    'vi': 'Má»Ÿ Ä‘áº§u báº±ng so sÃ¡nh lÆ°á»£ng phÃ¡t tháº£i cá»§a cÄƒn tin Ä‘á»ƒ táº¡o tÃ­nh cáº¥p bÃ¡ch.',
                                    'ja': 'é£Ÿå ‚ã®æ’å‡ºé‡æ¯”è¼ƒã§ç·Šæ€¥æ€§ã‚’ç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'æä¾›å®¶é•·åƒèˆ‡èœå–®è¨­è¨ˆçš„æµç¨‹ï¼Œæå‡å¯ä¿¡åº¦ã€‚',
                                    'en': 'Outline how parents join menu design to boost credibility.',
                                    'vi': 'TrÃ¬nh bÃ y quy trÃ¬nh phá»¥ huynh tham gia thiáº¿t káº¿ thá»±c Ä‘Æ¡n Ä‘á»ƒ tÄƒng Ä‘á»™ tin cáº­y.',
                                    'ja': 'ä¿è­·è€…ãŒçŒ®ç«‹ä½œã‚Šã«å‚åŠ ã™ã‚‹æµã‚Œã‚’ç¤ºã—ã€ä¿¡é ¼æ€§ã‚’é«˜ã‚ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    },
                    con: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘åå°å›ºå®šç´ é£Ÿæ—¥ï¼Œå› ç‚ºé£²é£Ÿéœ€æ±‚å¤šæ¨£ã€‚',
                                'en': 'We oppose a fixed vegetarian day because student diets are diverse.',
                                'vi': 'ChÃºng tÃ´i pháº£n Ä‘á»‘i cá»‘ Ä‘á»‹nh ngÃ y Äƒn chay vÃ¬ nhu cáº§u dinh dÆ°á»¡ng ráº¥t Ä‘a dáº¡ng.',
                                'ja': 'é£Ÿã®å¤šæ§˜æ€§ãŒã‚ã‚‹ã®ã§å›ºå®šã®ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼ã«ã¯åå¯¾ã§ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'æœ‰äº›å­¸ç”Ÿéœ€è¦æ›´å¤šè›‹ç™½è³ªæˆ–ç‰¹å®šé£Ÿææ‰èƒ½å¥åº·ã€‚',
                                'en': 'Some students require higher protein or specific foods for their health.',
                                'vi': 'Má»™t sá»‘ há»c sinh cáº§n nhiá»u Ä‘áº¡m hoáº·c thá»±c pháº©m Ä‘áº·c biá»‡t Ä‘á»ƒ khá»e máº¡nh.',
                                'ja': 'å¥åº·ã®ãŸã‚ã«é«˜ãŸã‚“ã±ãã‚„ç‰¹å®šã®é£ŸæãŒå¿…è¦ãªç”Ÿå¾’ã‚‚ã„ã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'éæ•èˆ‡æ–‡åŒ–é£²é£Ÿé™åˆ¶å¯èƒ½è®“ä»–å€‘ç„¡èœå¯é¸ã€‚',
                                'en': 'Allergies and cultural restrictions can leave them without options.',
                                'vi': 'Dá»‹ á»©ng vÃ  vÄƒn hÃ³a Äƒn uá»‘ng cÃ³ thá»ƒ khiáº¿n cÃ¡c em khÃ´ng cÃ³ mÃ³n phÃ¹ há»£p.',
                                'ja': 'ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚„æ–‡åŒ–çš„ãªåˆ¶ç´„ã§é£Ÿã¹ã‚‰ã‚Œã‚‹ç‰©ãŒãªããªã‚‹æã‚ŒãŒã‚ã‚Šã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'æ‡‰æä¾›å¤šå…ƒèœå–®è®“å­¸ç”Ÿè‡ªç”±é¸æ“‡ï¼Œè€Œéå¼·åˆ¶åŒä¸€é“èœã€‚',
                                'en': 'Offer diverse menus with choice instead of mandating one plate.',
                                'vi': 'NÃªn cung cáº¥p thá»±c Ä‘Æ¡n Ä‘a dáº¡ng Ä‘á»ƒ há»c sinh tá»± chá»n thay vÃ¬ Ã©p má»™t kiá»ƒu.',
                                'ja': 'å¼·åˆ¶ã§ã¯ãªãã€é¸æŠè‚¢ã®ã‚ã‚‹å¤šæ§˜ãªçŒ®ç«‹ã‚’æä¾›ã™ã¹ãã§ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'åªé–å®šç´ é£Ÿæ—¥å¿½ç•¥äº†å…¶ä»–ç‡Ÿé¤Šç­–ç•¥çš„å¯èƒ½æ€§ã€‚',
                                'en': 'Locking onto vegetarian days overlooks other nutrition strategies.',
                                'vi': 'Chá»‰ táº­p trung vÃ o ngÃ y Äƒn chay bá» qua nhiá»u chiáº¿n lÆ°á»£c dinh dÆ°á»¡ng khÃ¡c.',
                                'ja': 'ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼ã ã‘ã«é ¼ã‚‹ã¨ä»–ã®æ „é¤Šæˆ¦ç•¥ã‚’è¦‹è½ã¨ã—ã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'èˆ‡å…¶è¢«å‹•æä¾›èœå–®ï¼Œä¸å¦‚çµåˆæ•™è‚²èˆ‡å®¶åº­åˆä½œå¸¶ä¾†é•·æ•ˆæ”¹è®Šã€‚',
                                'en': 'Education plus family partnerships deliver longer-lasting dietary change.',
                                'vi': 'Káº¿t há»£p giÃ¡o dá»¥c vÃ  phá»‘i há»£p vá»›i gia Ä‘Ã¬nh sáº½ táº¡o thay Ä‘á»•i lÃ¢u dÃ i hÆ¡n.',
                                'ja': 'æ•™è‚²ã¨å®¶åº­é€£æºã‚’çµ„ã¿åˆã‚ã›ãŸæ–¹ãŒé•·æœŸçš„ãªå¤‰åŒ–ã«ã¤ãªãŒã‚Šã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'æ¾³æ´²è¨ˆç•«é¡¯ç¤ºè®“å­¸ç”Ÿè‡ªè¡Œè¨­è¨ˆèœå–®æ›´èƒ½æé«˜æ¥å—åº¦ã€‚',
                                'en': 'Australian programs show student-designed menus gain better buy-in.',
                                'vi': 'ChÆ°Æ¡ng trÃ¬nh á»Ÿ Ãšc cho tháº¥y thá»±c Ä‘Æ¡n do há»c sinh thiáº¿t káº¿ Ä‘Æ°á»£c Ä‘Ã³n nháº­n hÆ¡n.',
                                'ja': 'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã®äº‹ä¾‹ã§ã¯ç”Ÿå¾’ãŒçŒ®ç«‹ã‚’ä½œã‚‹æ–¹ãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã—ãŸã€‚'
                            },
                            closing: {
                                'zh-Hant': 'æ‡‰æ”¯æŒå¤šå…ƒèœè‰²èˆ‡ç‡Ÿé¤Šæ•™è‚²ä¸¦è¡Œï¼Œè€Œéå–®ä¸€æ—¥æ”¿ç­–ã€‚',
                                'en': 'Support varied menus alongside nutrition education instead of a single-day policy.',
                                'vi': 'NÃªn káº¿t há»£p thá»±c Ä‘Æ¡n Ä‘a dáº¡ng vÃ  giÃ¡o dá»¥c dinh dÆ°á»¡ng, khÃ´ng chá»‰ má»™t ngÃ y.',
                                'ja': 'å˜ä¸€ã®æ—¥ã§ã¯ãªãã€å¤šæ§˜ãªçŒ®ç«‹ã¨æ „é¤Šæ•™è‚²ã‚’ä¸¦è¡Œã—ã¦é€²ã‚ã‚‹ã¹ãã§ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'ç´ é£Ÿæ—¥è®“å­¸ç”Ÿæ¥è§¸æ–°é£Ÿæèˆ‡ç‡Ÿé¤ŠçŸ¥è­˜ã€‚',
                                'en': 'Vegetarian days expose students to new foods and nutrition lessons.',
                                'vi': 'NgÃ y Äƒn chay giÃºp há»c sinh tráº£i nghiá»‡m mÃ³n má»›i vÃ  kiáº¿n thá»©c dinh dÆ°á»¡ng.',
                                'ja': 'ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼ã§æ–°ã—ã„é£Ÿæã¨æ „é¤Šã‚’å­¦ã¹ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'æ°¸çºŒèœå–®èƒ½é™ä½å­¸æ ¡çš„ç¢³è¶³è·¡ã€‚',
                                'en': 'Sustainable menus lower the schoolâ€™s carbon footprint.',
                                'vi': 'Thá»±c Ä‘Æ¡n bá»n vá»¯ng giÃºp giáº£m dáº¥u chÃ¢n carbon cá»§a trÆ°á»ng.',
                                'ja': 'æŒç¶šå¯èƒ½ãªçŒ®ç«‹ã¯å­¦æ ¡ã®ã‚«ãƒ¼ãƒœãƒ³ãƒ•ãƒƒãƒˆãƒ—ãƒªãƒ³ãƒˆã‚’æ¸›ã‚‰ã—ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'å­¸æ ¡å¯ä»¥æä¾›é«˜è›‹ç™½ç´ é£Ÿæˆ–éæ•å‹å–„é¸æ“‡ã€‚',
                                'en': 'Schools can offer high-protein vegetarian dishes and allergy-friendly options.',
                                'vi': 'TrÆ°á»ng cÃ³ thá»ƒ chuáº©n bá»‹ mÃ³n chay giÃ u Ä‘áº¡m vÃ  lá»±a chá»n phÃ¹ há»£p vá»›i dá»‹ á»©ng.',
                                'ja': 'é«˜ãŸã‚“ã±ããªãƒ™ã‚¸çŒ®ç«‹ã‚„ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼å¯¾å¿œé£Ÿã‚’ç”¨æ„ã§ãã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ å¼·èª¿è‡ªç”±é¸æ“‡ï¼Œä½†è¦æå‡ºå¦‚ä½•åŒæ™‚æ¨å‹•å¥åº·æ•™è‚²ã€‚',
                                'en': 'You emphasised choice; add how you still promote nutrition education.',
                                'vi': 'Báº¡n nháº¥n máº¡nh quyá»n lá»±a chá»n; hÃ£y nÃ³i thÃªm cÃ¡ch váº«n thÃºc Ä‘áº©y giÃ¡o dá»¥c dinh dÆ°á»¡ng.',
                                'ja': 'é¸æŠã®è‡ªç”±ã‚’å¼·èª¿ã—ã¾ã—ãŸãŒã€æ „é¤Šæ•™è‚²ã‚’ã©ã†é€²ã‚ã‚‹ã‹ã‚‚èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'æå‡ºã€Œå­¸ç”Ÿç¥¨é¸èœå–®ã€æˆ–ã€Œç‡Ÿé¤Šå¸«å”ä½œæ—¥ã€ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚',
                                    'en': 'Propose alternatives like student-voted menus or dietitian collaboration days.',
                                    'vi': 'Äá» xuáº¥t phÆ°Æ¡ng Ã¡n nhÆ° thá»±c Ä‘Æ¡n do há»c sinh bÃ¬nh chá»n hoáº·c ngÃ y phá»‘i há»£p chuyÃªn gia dinh dÆ°á»¡ng.',
                                    'ja': 'ç”Ÿå¾’æŠ•ç¥¨ã®çŒ®ç«‹ã‚„æ „é¤Šå£«ã¨ã®å”åƒæ—¥ãªã©ã®ä»£æ›¿ç­–ã‚’æç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'è£œå……å¦‚ä½•è¡¡é‡æ”¿ç­–æˆåŠŸï¼Œä¾‹å¦‚å¥åº·æŒ‡æ¨™æˆ–æ»¿æ„åº¦èª¿æŸ¥ã€‚',
                                    'en': 'Explain success metrics such as health indicators or satisfaction surveys.',
                                    'vi': 'NÃªu rÃµ cÃ¡ch Ä‘o lÆ°á»ng thÃ nh cÃ´ng báº±ng chá»‰ sá»‘ sá»©c khá»e hoáº·c kháº£o sÃ¡t hÃ i lÃ²ng.',
                                    'ja': 'å¥åº·æŒ‡æ¨™ã‚„æº€è¶³åº¦èª¿æŸ»ãªã©æˆåŠŸã‚’æ¸¬ã‚‹åŸºæº–ã‚’åŠ ãˆã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹7ã€åé§8ã€è¡¨é”7ã€ç­–ç•¥7ï¼ˆç¸½åˆ†29/40ï¼‰ã€‚',
                                'en': 'Score: Content 7, Refutation 8, Delivery 7, Strategy 7 (29/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 7, Pháº£n biá»‡n 8, TrÃ¬nh bÃ y 7, Chiáº¿n lÆ°á»£c 7 (29/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹7ãƒ»åè«–8ãƒ»è¡¨ç¾7ãƒ»æˆ¦ç•¥7ï¼ˆ29/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'åœ¨é–‹å ´æŒ‡å‡ºä½ çš„æ–¹æ¡ˆä¹Ÿèƒ½æ¸›å°‘é£Ÿç‰©æµªè²»ï¼Œå¸å¼•è½çœ¾ã€‚',
                                    'en': 'Begin by noting your approach also cuts food waste to hook listeners.',
                                    'vi': 'Má»Ÿ Ä‘áº§u báº±ng viá»‡c nháº¥n máº¡nh phÆ°Æ¡ng Ã¡n cá»§a báº¡n cÅ©ng giáº£m lÃ£ng phÃ­ thá»±c pháº©m.',
                                    'ja': 'ææ¡ˆãŒé£Ÿå“ãƒ­ã‚¹å‰Šæ¸›ã«ã‚‚ã¤ãªãŒã‚‹ã¨å†’é ­ã§ä¼ãˆã€é–¢å¿ƒã‚’å¼•ãã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åŠ å…¥èˆ‡å®¶é•·åˆä½œçš„æµç¨‹ï¼Œè®“æ”¿ç­–æ›´è²¼è¿‘å¯¦å‹™ã€‚',
                                    'en': 'Add a parent collaboration process to keep the plan practical.',
                                    'vi': 'ThÃªm quy trÃ¬nh phá»‘i há»£p vá»›i phá»¥ huynh Ä‘á»ƒ chÃ­nh sÃ¡ch sÃ¡t thá»±c táº¿ hÆ¡n.',
                                    'ja': 'ä¿è­·è€…ã¨ã®é€£æºæ‰‹é †ã‚’åŠ ãˆã€å®Ÿå‹™çš„ã«ã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    }
                },
                questions: [
                    {
                        'zh-Hant': 'ç´ é£Ÿæ—¥æƒ³é”æˆçš„å¥åº·ç›®æ¨™æ˜¯ä»€éº¼ï¼Ÿ',
                        'en': 'What health goals should a vegetarian day achieve?',
                        'vi': 'NgÃ y Äƒn chay nháº±m Ä‘áº¡t má»¥c tiÃªu sá»©c khá»e nÃ o?',
                        'ja': 'ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ‡ãƒ¼ã§é”æˆã—ãŸã„å¥åº·ç›®æ¨™ã¯ä½•ã§ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å¦‚ä½•å…¼é¡§éæ•ã€æ–‡åŒ–é£²é£Ÿèˆ‡é‹å‹•å“¡éœ€æ±‚ï¼Ÿ',
                        'en': 'How will you accommodate allergies, cultural diets, and athletes?',
                        'vi': 'Báº¡n cÃ¢n Ä‘á»‘i tháº¿ nÃ o giá»¯a dá»‹ á»©ng, vÄƒn hÃ³a Äƒn uá»‘ng vÃ  nhu cáº§u váº­n Ä‘á»™ng viÃªn?',
                        'ja': 'ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚„æ–‡åŒ–çš„é£Ÿäº‹ã€é‹å‹•éƒ¨ã®ãƒ‹ãƒ¼ã‚ºã‚’ã©ã†ä¸¡ç«‹ã•ã›ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'èœå–®èª¿æ•´æœƒæ­é…å“ªäº›æ•™è‚²æ´»å‹•ï¼Ÿ',
                        'en': 'What educational activities will accompany the menu change?',
                        'vi': 'Viá»‡c Ä‘iá»u chá»‰nh thá»±c Ä‘Æ¡n sáº½ Ä‘i kÃ¨m hoáº¡t Ä‘á»™ng giÃ¡o dá»¥c nÃ o?',
                        'ja': 'çŒ®ç«‹å¤‰æ›´ã«åˆã‚ã›ã¦ã©ã‚“ãªæ•™è‚²æ´»å‹•ã‚’è¡Œã„ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å¦‚æœå­¸ç”Ÿä¸åƒç´ é£Ÿé¤ï¼Œä½ æœ‰ä½•å‚™æ¡ˆï¼Ÿ',
                        'en': 'What is your backup plan if students skip the vegetarian meal?',
                        'vi': 'Náº¿u há»c sinh khÃ´ng Äƒn bá»¯a chay, báº¡n cÃ³ phÆ°Æ¡ng Ã¡n dá»± phÃ²ng gÃ¬?',
                        'ja': 'ç”Ÿå¾’ãŒãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³é£Ÿã‚’é£Ÿã¹ãªã„å ´åˆã®ä»£æ›¿ç­–ã¯ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å¦‚ä½•ç¢ºä¿ç‡Ÿé¤Šæ”å–è¶³å¤ ä¸”æ˜“æ–¼è¢«æ¥å—ï¼Ÿ',
                        'en': 'How will you ensure meals stay nutritious and appealing?',
                        'vi': 'Báº¡n báº£o Ä‘áº£m bá»¯a Äƒn váº«n Ä‘á»§ dinh dÆ°á»¡ng vÃ  háº¥p dáº«n ra sao?',
                        'ja': 'æ „é¤Šä¾¡ã¨é£Ÿã¹ã‚„ã™ã•ã‚’ã©ã†ä¸¡ç«‹ã•ã›ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'ä½ ä¾æ“šå“ªäº›ç’°å¢ƒå½±éŸ¿æ•¸æ“šä¾†æ”¯æŒæ”¿ç­–ï¼Ÿ',
                        'en': 'Which environmental impact data supports your policy?',
                        'vi': 'Báº¡n dá»±a vÃ o dá»¯ liá»‡u mÃ´i trÆ°á»ng nÃ o Ä‘á»ƒ á»§ng há»™ chÃ­nh sÃ¡ch?',
                        'ja': 'ã©ã®ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãŒã“ã®æ”¿ç­–ã‚’æ”¯ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å¦‚ä½•è’é›†å­¸ç”Ÿèˆ‡å®¶é•·çš„å›é¥‹ä»¥èª¿æ•´èœå–®ï¼Ÿ',
                        'en': 'How will you gather student and parent feedback to adjust menus?',
                        'vi': 'Báº¡n thu tháº­p pháº£n há»“i há»c sinh vÃ  phá»¥ huynh Ä‘á»ƒ Ä‘iá»u chá»‰nh thá»±c Ä‘Æ¡n tháº¿ nÃ o?',
                        'ja': 'çŒ®ç«‹èª¿æ•´ã®ãŸã‚ã«ç”Ÿå¾’ã¨ä¿è­·è€…ã®æ„è¦‹ã‚’ã©ã†é›†ã‚ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å®¶åº­å¦‚ä½•åœ¨å®¶å»¶çºŒå¥åº·é£²é£Ÿï¼Ÿ',
                        'en': 'How will families continue healthy eating at home?',
                        'vi': 'Gia Ä‘Ã¬nh sáº½ tiáº¿p tá»¥c Äƒn uá»‘ng lÃ nh máº¡nh táº¡i nhÃ  báº±ng cÃ¡ch nÃ o?',
                        'ja': 'å®¶åº­ã§ã‚‚å¥åº·çš„ãªé£Ÿç¿’æ…£ã‚’ã©ã†ç¶™ç¶šã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã‹ï¼Ÿ'
                    }
                ]
            },
            {
                id: 'start-at-9',
                title: {
                    'zh-Hant': 'æœ¬é™¢æ”¯æŒå»¶å¾Œè‡³ä¸Šåˆ9é»ä¸Šèª²',
                    'en': 'This house supports starting school at 9 a.m.',
                    'vi': 'Quá»‘c há»™i á»§ng há»™ viá»‡c báº¯t Ä‘áº§u giá» há»c lÃºc 9 giá» sÃ¡ng',
                    'ja': 'æœ¬é™¢ã¯åˆå‰9æ™‚ç™»æ ¡ã‚’æ”¯æŒã™ã‚‹'
                },
                sides: {
                    pro: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘æ”¯æŒä¹é»ä¸Šèª²ï¼Œè®“å­¸ç”Ÿæœ‰è¶³å¤ ç¡çœ ã€‚',
                                'en': 'We support 9 a.m. start times so students get enough sleep.',
                                'vi': 'ChÃºng tÃ´i á»§ng há»™ báº¯t Ä‘áº§u há»c lÃºc 9 giá» Ä‘á»ƒ há»c sinh ngá»§ Ä‘á»§ giáº¥c.',
                                'ja': 'åˆå‰9æ™‚ã®å§‹æ¥­ã§ç”Ÿå¾’ã«ååˆ†ãªç¡çœ ã‚’ç¢ºä¿ã—ã¾ã—ã‚‡ã†ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'é’å°‘å¹´ç”Ÿç†æ™‚é˜è¼ƒæ™šï¼Œæ—©èµ·é›£ä»¥é›†ä¸­ã€‚',
                                'en': 'Teen circadian rhythms run late, making early mornings unfocused.',
                                'vi': 'Nhá»‹p sinh há»c cá»§a thanh thiáº¿u niÃªn muá»™n hÆ¡n nÃªn sÃ¡ng sá»›m khÃ³ táº­p trung.',
                                'ja': 'æ€æ˜¥æœŸã®ä½“å†…æ™‚è¨ˆã¯é…ã‚Œæ°—å‘³ã§ã€æœæ—©ãã¯é›†ä¸­ã—ã«ãã„ã®ã§ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'é†«å­¸ç ”ç©¶é¡¯ç¤ºå»¶å¾Œä¸Šèª²èƒ½å¢åŠ å¹³å‡ç¡çœ 45åˆ†é˜ã€‚',
                                'en': 'Medical studies show later starts add about forty-five minutes of sleep.',
                                'vi': 'NghiÃªn cá»©u y khoa cho tháº¥y báº¯t Ä‘áº§u muá»™n tÄƒng thÃªm khoáº£ng 45 phÃºt ngá»§.',
                                'ja': 'åŒ»å­¦ç ”ç©¶ã§ã¯é–‹å§‹ã‚’é…ã‚‰ã›ã‚‹ã¨ç¡çœ ãŒå¹³å‡45åˆ†å¢—ãˆã‚‹ã¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'å……è¶³ç¡çœ å¯æå‡æˆç¸¾ä¸¦æ”¹å–„æƒ…ç·’ç®¡ç†ã€‚',
                                'en': 'Well-rested students earn better grades and regulate emotions.',
                                'vi': 'Ngá»§ Ä‘á»§ giÃºp há»c sinh Ä‘áº¡t káº¿t quáº£ tá»‘t vÃ  kiá»ƒm soÃ¡t cáº£m xÃºc.',
                                'ja': 'ååˆ†ãªç¡çœ ã§æˆç¸¾ã‚‚æ„Ÿæƒ…ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚‚å‘ä¸Šã—ã¾ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'èª¿æ•´èª²è¡¨ä»¥ç¬¦åˆé’å°‘å¹´ç”Ÿç†ç¯€å¥èƒ½æå‡å­¸ç¿’æ•ˆç‡ã€‚',
                                'en': 'Aligning timetables with adolescent rhythms improves learning efficiency.',
                                'vi': 'Äiá»u chá»‰nh thá»i khÃ³a biá»ƒu phÃ¹ há»£p nhá»‹p sinh há»c giÃºp tÄƒng hiá»‡u quáº£ há»c táº­p.',
                                'ja': 'ç”Ÿä½“ãƒªã‚ºãƒ ã«åˆã‚ã›ãŸæ™‚é–“å‰²ã§å­¦ç¿’åŠ¹ç‡ãŒä¸ŠãŒã‚Šã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'æ¸…æ™¨ä¸Šèª²æ™‚å¤§è…¦ä»è™•ä½è­¦è¦ºç‹€æ…‹ï¼Œé™ä½ç†è§£åŠ›ã€‚',
                                'en': 'Early starts keep the brain in low-alert mode, reducing comprehension.',
                                'vi': 'Báº¯t Ä‘áº§u quÃ¡ sá»›m khiáº¿n nÃ£o chÆ°a tá»‰nh tÃ¡o, giáº£m kháº£ nÄƒng tiáº¿p thu.',
                                'ja': 'æ—©æœã¯è„³ãŒã¾ã ä½è¦šé†’çŠ¶æ…‹ã§ç†è§£åŠ›ãŒè½ã¡ã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'æ˜å°¼é˜¿æ³¢åˆ©æ–¯èˆ‡è¥¿é›…åœ–å»¶å¾Œä¸Šèª²å¾Œï¼Œé²åˆ°èˆ‡ç¼ºå¸­ç‡ä¸‹é™ã€‚',
                                'en': 'Minneapolis and Seattle saw tardiness and absences drop after shifting later.',
                                'vi': 'Minneapolis vÃ  Seattle giáº£m Ä‘i muá»™n, nghá»‰ há»c sau khi Ä‘iá»u chá»‰nh giá» há»c.',
                                'ja': 'ãƒŸãƒã‚¢ãƒãƒªã‚¹ã¨ã‚·ã‚¢ãƒˆãƒ«ã§ã¯é–‹å§‹æ™‚é–“ã‚’é…ã‚‰ã›ã‚‹ã¨é…åˆ»ãƒ»æ¬ å¸­ãŒæ¸›ã‚Šã¾ã—ãŸã€‚'
                            },
                            closing: {
                                'zh-Hant': 'å»¶å¾Œä¸Šèª²ä¹Ÿèƒ½åˆ†æµäº¤é€šå°–å³°ä¸¦æ”¹å–„ç¤¾å€å®‰å…¨ã€‚',
                                'en': 'Later starts ease traffic peaks and improve community safety.',
                                'vi': 'Báº¯t Ä‘áº§u muá»™n giÃºp giáº£m káº¹t xe vÃ  tÄƒng an toÃ n cá»™ng Ä‘á»“ng.',
                                'ja': 'é–‹å§‹ã‚’é…ã‚‰ã›ã‚‹ã¨äº¤é€šãƒ”ãƒ¼ã‚¯ãŒç·©å’Œã•ã‚Œã€åœ°åŸŸã®å®‰å…¨ã‚‚å‘ä¸Šã—ã¾ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'å®¶é•·çš„å·¥ä½œæ™‚é–“å¯èƒ½ç„¡æ³•é…åˆæ–°çš„ä½œæ¯ã€‚',
                                'en': 'Parent work schedules may not align with a later timetable.',
                                'vi': 'Lá»‹ch lÃ m viá»‡c cá»§a phá»¥ huynh cÃ³ thá»ƒ khÃ´ng phÃ¹ há»£p vá»›i giá» há»c muá»™n.',
                                'ja': 'ä¿è­·è€…ã®å‹¤å‹™æ™‚é–“ãŒèª¿æ•´ã«åˆã‚ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚'
                            },
                            {
                                'zh-Hant': 'èª²å¾Œç¤¾åœ˜èˆ‡æ‰“å·¥æ™‚é–“æœƒè¢«å£“ç¸®ã€‚',
                                'en': 'After-school clubs and part-time jobs would be squeezed.',
                                'vi': 'Hoáº¡t Ä‘á»™ng cÃ¢u láº¡c bá»™ vÃ  lÃ m thÃªm bá»‹ thu háº¹p thá»i gian.',
                                'ja': 'æ”¾èª²å¾Œã®ã‚¯ãƒ©ãƒ–æ´»å‹•ã‚„ã‚¢ãƒ«ãƒã‚¤ãƒˆã®æ™‚é–“ãŒçŸ­ããªã‚Šã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'äº¤é€šé‹è¼¸èˆ‡é¤é£²ä¾›æ‡‰éœ€è¦å¤§å¹…èª¿æ•´ï¼Œæˆæœ¬é«˜ã€‚',
                                'en': 'Transport routes and meal services need major costly adjustments.',
                                'vi': 'Há»‡ thá»‘ng xe Ä‘Æ°a Ä‘Ã³n vÃ  cung cáº¥p bá»¯a Äƒn pháº£i Ä‘iá»u chá»‰nh tá»‘n kÃ©m.',
                                'ja': 'äº¤é€šæ©Ÿé–¢ã‚„çµ¦é£Ÿã®ä½“åˆ¶ã‚’å¤§ããè¦‹ç›´ã™å¿…è¦ãŒã‚ã‚Šã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚Šã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ æ´å¼•ç¡çœ ç ”ç©¶å¾ˆæœ‰åŠ›ï¼Œä½†è«‹äº¤ä»£èˆ‡å®¶é•·å”èª¿çš„æ­¥é©Ÿã€‚',
                                'en': 'Your sleep research is strong; now outline steps to coordinate with parents.',
                                'vi': 'Báº¡n trÃ­ch dáº«n nghiÃªn cá»©u vá» giáº¥c ngá»§ ráº¥t thuyáº¿t phá»¥c; hÃ£y nÃªu cÃ¡ch phá»‘i há»£p vá»›i phá»¥ huynh.',
                                'ja': 'ç¡çœ ç ”ç©¶ã®å¼•ç”¨ã¯èª¬å¾—åŠ›ãŒã‚ã‚Šã¾ã™ã€‚ä¿è­·è€…ã¨ã®èª¿æ•´ç­–ã‚‚è¿°ã¹ã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'æå‡ºå½ˆæ€§æ¥é€æˆ–ç¤¾å€æ™¨é–“ç…§é¡§æ–¹æ¡ˆï¼Œé™ä½å®¶é•·ç–‘æ…®ã€‚',
                                    'en': 'Offer flexible drop-off or community morning care to ease concerns.',
                                    'vi': 'Äá» xuáº¥t phÆ°Æ¡ng Ã¡n Ä‘Æ°a Ä‘Ã³n linh hoáº¡t hoáº·c dá»‹ch vá»¥ trÃ´ng tráº» buá»•i sÃ¡ng.',
                                    'ja': 'æŸ”è»Ÿãªé€è¿ã‚„åœ°åŸŸã®æœã®é ã‹ã‚Šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ææ¡ˆã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'èªªæ˜å¦‚ä½•é‡æ–°å®‰æ’ç¤¾åœ˜æ™‚é–“ï¼Œç¢ºä¿å­¸ç”Ÿæ´»å‹•ä¸æ¸›å°‘ã€‚',
                                    'en': 'Explain how clubs will be rescheduled so activities stay intact.',
                                    'vi': 'Giáº£i thÃ­ch cÃ¡ch sáº¯p xáº¿p láº¡i giá» cÃ¢u láº¡c bá»™ Ä‘á»ƒ hoáº¡t Ä‘á»™ng khÃ´ng bá»‹ cáº¯t giáº£m.',
                                    'ja': 'ã‚¯ãƒ©ãƒ–æ´»å‹•ã®æ™‚é–“èª¿æ•´æ¡ˆã‚’ç¤ºã—ã€æ´»å‹•ãŒæ¸›ã‚‰ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹9ã€åé§7ã€è¡¨é”8ã€ç­–ç•¥8ï¼ˆç¸½åˆ†32/40ï¼‰ã€‚',
                                'en': 'Score: Content 9, Refutation 7, Delivery 8, Strategy 8 (32/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 9, Pháº£n biá»‡n 7, TrÃ¬nh bÃ y 8, Chiáº¿n lÆ°á»£c 8 (32/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹9ãƒ»åè«–7ãƒ»è¡¨ç¾8ãƒ»æˆ¦ç•¥8ï¼ˆ32/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'åœ¨çµå°¾åˆ—å‡ºä¸‰å€‹çŸ­æœŸèˆ‡ä¸‰å€‹é•·æœŸæŒ‡æ¨™ï¼Œå‡¸é¡¯è¦åŠƒæ€§ã€‚',
                                    'en': 'Close with three short-term and three long-term metrics to show planning.',
                                    'vi': 'Káº¿t thÃºc báº±ng ba chá»‰ sá»‘ ngáº¯n háº¡n vÃ  ba chá»‰ sá»‘ dÃ i háº¡n Ä‘á»ƒ thá»ƒ hiá»‡n káº¿ hoáº¡ch rÃµ rÃ ng.',
                                    'ja': 'çŸ­æœŸãƒ»é•·æœŸã®æŒ‡æ¨™ã‚’ãã‚Œãã‚Œç¤ºã—ã€è¨ˆç”»æ€§ã‚’å¼·èª¿ã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åŠ å…¥å­¸ç”Ÿèˆ‡è€å¸«çš„å¼•è¿°ï¼Œè®“æ”¿ç­–æ›´æœ‰äººå‘³ã€‚',
                                    'en': 'Add quotes from students and teachers to humanise the policy.',
                                    'vi': 'ThÃªm lá»i chia sáº» cá»§a há»c sinh vÃ  giÃ¡o viÃªn Ä‘á»ƒ chÃ­nh sÃ¡ch gáº§n gÅ©i hÆ¡n.',
                                    'ja': 'ç”Ÿå¾’ã¨æ•™å¸«ã®å£°ã‚’å¼•ç”¨ã—ã€æ”¿ç­–ã«äººé–“å‘³ã‚’å‡ºã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    },
                    con: {
                        beginner: {
                            claim: {
                                'zh-Hant': 'æˆ‘å€‘åå°å»¶å¾Œä¸Šèª²ï¼Œå› ç‚ºå®¶åº­ä½œæ¯æœƒè¢«æ‰“äº‚ã€‚',
                                'en': 'We oppose later starts because family routines would be disrupted.',
                                'vi': 'ChÃºng tÃ´i pháº£n Ä‘á»‘i giá» há»c muá»™n vÃ¬ náº¿p sinh hoáº¡t gia Ä‘Ã¬nh bá»‹ xÃ¡o trá»™n.',
                                'ja': 'å§‹æ¥­ã‚’é…ã‚‰ã›ã‚‹ã¨å®¶åº­ã®ç”Ÿæ´»ãƒªã‚ºãƒ ãŒä¹±ã‚Œã‚‹ãŸã‚åå¯¾ã§ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'å®¶é•·ä»éœ€æº–æ™‚ä¸Šç­æˆ–ç…§é¡§å¹´å¹¼å…„å¼Ÿå§Šå¦¹ã€‚',
                                'en': 'Parents still need to reach work on time or care for younger siblings.',
                                'vi': 'Phá»¥ huynh váº«n pháº£i Ä‘i lÃ m Ä‘Ãºng giá» hoáº·c chÄƒm em nhá».',
                                'ja': 'ä¿è­·è€…ã¯ä»•äº‹ã‚„ä¸‹ã®å­ã®ä¸–è©±ã§æ—©ã„æ™‚é–“ãŒå¿…è¦ã§ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'å»¶å¾Œæ”¾å­¸æœƒå£“ç¸®èª²å¾Œç¤¾åœ˜èˆ‡æ‰“å·¥æ™‚é–“ã€‚',
                                'en': 'Ending later squeezes time for clubs, sports, and part-time jobs.',
                                'vi': 'Tan há»c muá»™n lÃ m giáº£m thá»i gian cho cÃ¢u láº¡c bá»™, thá»ƒ thao vÃ  lÃ m thÃªm.',
                                'ja': 'æ”¾èª²ãŒé…ããªã‚‹ã¨éƒ¨æ´»å‹•ã‚„ã‚¢ãƒ«ãƒã‚¤ãƒˆã®æ™‚é–“ãŒæ¸›ã‚Šã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'ç¶­æŒç¾è¡Œæ™‚é–“æ‰èƒ½å…¼é¡§å­¸ç¿’ã€å®¶åº­èˆ‡èª²å¾Œå®‰æ’ã€‚',
                                'en': 'Keeping current schedules balances school, family, and after-school plans.',
                                'vi': 'Giá»¯ lá»‹ch hiá»‡n táº¡i giÃºp cÃ¢n báº±ng há»c táº­p, gia Ä‘Ã¬nh vÃ  hoáº¡t Ä‘á»™ng sau giá» há»c.',
                                'ja': 'ä»Šã®æ™‚é–“å‰²ã®æ–¹ãŒå­¦ç¿’ãƒ»å®¶åº­ãƒ»æ”¾èª²å¾Œæ´»å‹•ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¾ã™ã€‚'
                            }
                        },
                        advanced: {
                            claim: {
                                'zh-Hant': 'å»¶å¾Œä¸Šèª²å¿½ç•¥äº†äº¤é€šã€é¤é£²èˆ‡äººåŠ›çš„é€£é–å½±éŸ¿ã€‚',
                                'en': 'Later starts ignore ripple effects on transport, food service, and staffing.',
                                'vi': 'Giá» há»c muá»™n bá» qua tÃ¡c Ä‘á»™ng dÃ¢y chuyá»n lÃªn giao thÃ´ng, bá»¯a Äƒn vÃ  nhÃ¢n sá»±.',
                                'ja': 'å§‹æ¥­ã‚’é…ã‚‰ã›ã‚‹ã¨äº¤é€šã‚„çµ¦é£Ÿã€äººå“¡é…ç½®ã«æ³¢åŠã—ã¾ã™ã€‚'
                            },
                            reason: {
                                'zh-Hant': 'å…¬è»Šæ’ç¨‹èˆ‡åˆé¤ä¾›æ‡‰éœ€é‡æ–°è¨­è¨ˆï¼Œæˆæœ¬é«˜ä¸”è¤‡é›œã€‚',
                                'en': 'Bus schedules and meal logistics need redesigning, which is costly and complex.',
                                'vi': 'Lá»‹ch xe Ä‘Æ°a Ä‘Ã³n vÃ  cung á»©ng bá»¯a Äƒn pháº£i thiáº¿t káº¿ láº¡i, tá»‘n kÃ©m vÃ  phá»©c táº¡p.',
                                'ja': 'ãƒã‚¹æ™‚åˆ»ã‚„çµ¦é£Ÿä½“åˆ¶ã‚’å†è¨­è¨ˆã™ã‚‹ã«ã¯å¤§ããªã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚Šã¾ã™ã€‚'
                            },
                            evidence: {
                                'zh-Hant': 'è‹±åœ‹éƒ¨åˆ†è©¦é»å› æˆæœ¬èˆ‡äº¤é€šå£“åŠ›åœ¨ä¸‰å¹´å…§æ¢å¾©èˆŠåˆ¶ã€‚',
                                'en': 'Some UK pilots reverted within three years because of cost and transit strain.',
                                'vi': 'Má»™t sá»‘ mÃ´ hÃ¬nh thÃ­ Ä‘iá»ƒm á»Ÿ Anh Ä‘Ã£ quay láº¡i giá» cÅ© trong ba nÄƒm vÃ¬ chi phÃ­ vÃ  Ã¡p lá»±c giao thÃ´ng.',
                                'ja': 'è‹±å›½ã§ã¯ã‚³ã‚¹ãƒˆã‚„äº¤é€šã®è² æ‹…ã§3å¹´ä»¥å†…ã«æ—§åˆ¶åº¦ã¸æˆ»ã£ãŸä¾‹ãŒã‚ã‚Šã¾ã™ã€‚'
                            },
                            closing: {
                                'zh-Hant': 'æ‡‰å…ˆæŠ•è³‡ç¡çœ æ•™è‚²èˆ‡å®¶åº­æ”¯æ´ï¼Œè€Œéå€‰ä¿ƒæ”¹è®Šæ™‚ç¨‹ã€‚',
                                'en': 'Invest in sleep education and family supports before shifting schedules.',
                                'vi': 'NÃªn Ä‘áº§u tÆ° vÃ o giÃ¡o dá»¥c giáº¥c ngá»§ vÃ  há»— trá»£ gia Ä‘Ã¬nh trÆ°á»›c khi Ä‘á»•i thá»i gian.',
                                'ja': 'æ™‚é–“å¤‰æ›´ã‚ˆã‚Šå…ˆã«ç¡çœ æ•™è‚²ã‚„å®¶åº­æ”¯æ´ã¸æŠ•è³‡ã™ã¹ãã§ã™ã€‚'
                            }
                        },
                        opponentPoints: [
                            {
                                'zh-Hant': 'ç¡çœ ç ”ç©¶é¡¯ç¤ºå»¶å¾Œä¸Šèª²å¯æå‡æˆç¸¾èˆ‡å¿ƒç†å¥åº·ã€‚',
                                'en': 'Sleep studies show later starts boost grades and mental health.',
                                'vi': 'NghiÃªn cá»©u giáº¥c ngá»§ cho tháº¥y giá» há»c muá»™n cáº£i thiá»‡n thÃ nh tÃ­ch vÃ  sá»©c khá»e tinh tháº§n.',
                                'ja': 'ç¡çœ ç ”ç©¶ã§ã¯å§‹æ¥­ã‚’é…ã‚‰ã›ã‚‹ã¨æˆç¸¾ã¨ãƒ¡ãƒ³ã‚¿ãƒ«ãŒå‘ä¸Šã—ã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'é²åˆ°èˆ‡ç¼ºå¸­ç‡åœ¨ä¹é»é–‹å­¸å¾Œä¸‹é™ã€‚',
                                'en': 'Tardiness and absences drop when schools begin at nine.',
                                'vi': 'TÃ¬nh tráº¡ng Ä‘i trá»… vÃ  váº¯ng máº·t giáº£m khi trÆ°á»ng báº¯t Ä‘áº§u lÃºc 9 giá».',
                                'ja': 'åˆå‰9æ™‚é–‹å§‹ã«ã™ã‚‹ã¨é…åˆ»ã¨æ¬ å¸­ãŒæ¸›ã‚Šã¾ã™ã€‚'
                            },
                            {
                                'zh-Hant': 'ç¤¾å€å¯é€éåˆ†æµæ™‚æ®µæ¸›è¼•äº¤é€šå£“åŠ›ã€‚',
                                'en': 'Communities can stagger shifts to ease traffic congestion.',
                                'vi': 'Cá»™ng Ä‘á»“ng cÃ³ thá»ƒ phÃ¢n bá»• ca Ä‘á»ƒ giáº£m káº¹t xe.',
                                'ja': 'åœ°åŸŸå…¨ä½“ã§æ™‚å·®é€šå‹¤ã‚’é€²ã‚ã‚Œã°æ¸‹æ»ã‚’ç·©å’Œã§ãã¾ã™ã€‚'
                            }
                        ],
                        rebuttalFeedback: {
                            summary: {
                                'zh-Hant': 'ä½ æœ‰æ•ˆæå‡ºæˆæœ¬ç–‘æ…®ï¼Œä½†éœ€èªªæ˜æ¼¸é€²å¼èª¿æ•´çš„ç´°ç¯€ã€‚',
                                'en': 'You raised cost concerns; describe a phased approach to strengthen it.',
                                'vi': 'Báº¡n nÃªu lo ngáº¡i chi phÃ­; hÃ£y mÃ´ táº£ lá»™ trÃ¬nh Ä‘iá»u chá»‰nh tá»«ng bÆ°á»›c.',
                                'ja': 'ã‚³ã‚¹ãƒˆã®æ‡¸å¿µã‚’ç¤ºã—ã¾ã—ãŸãŒã€æ®µéšçš„ãªç§»è¡Œç­–ã‚‚æç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'å»ºè­°å…ˆé‡å°ç‰¹å®šå¹´ç´šè©¦è¡Œï¼Œè’é›†æ•¸æ“šå¾Œå†æ“´å¤§ã€‚',
                                    'en': 'Suggest piloting with select grades, then scale after measuring results.',
                                    'vi': 'Äá» nghá»‹ thá»­ nghiá»‡m vá»›i má»™t sá»‘ khá»‘i lá»›p rá»“i má»Ÿ rá»™ng sau khi Ä‘o lÆ°á»ng káº¿t quáº£.',
                                    'ja': 'ç‰¹å®šå­¦å¹´ã§è©¦è¡Œã—ã€ãƒ‡ãƒ¼ã‚¿å–å¾—å¾Œã«æ‹¡å¤§ã™ã‚‹æ¡ˆã‚’ç¤ºã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'èªªæ˜æ›¿ä»£æŠ•è³‡ï¼Œå¦‚ç¡çœ æ•™è‚²æˆ–å®¶é•·è¬›åº§ï¼Œä»¥å±•ç¾ç©æ¥µæ–¹æ¡ˆã€‚',
                                    'en': 'Highlight alternative investments like sleep education workshops.',
                                    'vi': 'Nháº¥n máº¡nh khoáº£n Ä‘áº§u tÆ° khÃ¡c nhÆ° lá»›p há»c vá» giáº¥c ngá»§ cho phá»¥ huynh.',
                                    'ja': 'ç¡çœ æ•™è‚²ã‚»ãƒŸãƒŠãƒ¼ãªã©ä»£æ›¿æŠ•è³‡ã‚’å¼·èª¿ã—ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        },
                        coachFeedback: {
                            score: {
                                'zh-Hant': 'åˆ†æ•¸ï¼šå…§å®¹7ã€åé§8ã€è¡¨é”8ã€ç­–ç•¥7ï¼ˆç¸½åˆ†30/40ï¼‰ã€‚',
                                'en': 'Score: Content 7, Refutation 8, Delivery 8, Strategy 7 (30/40).',
                                'vi': 'Äiá»ƒm: Ná»™i dung 7, Pháº£n biá»‡n 8, TrÃ¬nh bÃ y 8, Chiáº¿n lÆ°á»£c 7 (30/40).',
                                'ja': 'ã‚¹ã‚³ã‚¢ï¼šå†…å®¹7ãƒ»åè«–8ãƒ»è¡¨ç¾8ãƒ»æˆ¦ç•¥7ï¼ˆ30/40ï¼‰ã€‚'
                            },
                            tips: [
                                {
                                    'zh-Hant': 'åœ¨çµå°¾æä¾›æ˜ç¢ºçš„æˆæœ¬åˆ†ææ¡†æ¶ï¼Œå±•ç¤ºå‹™å¯¦æ…‹åº¦ã€‚',
                                    'en': 'End with a clear cost-analysis framework to show pragmatism.',
                                    'vi': 'Káº¿t thÃºc báº±ng khung phÃ¢n tÃ­ch chi phÃ­ rÃµ rÃ ng Ä‘á»ƒ thá»ƒ hiá»‡n tÃ­nh thá»±c táº¿.',
                                    'ja': 'ã‚³ã‚¹ãƒˆåˆ†æã®æ çµ„ã¿ã‚’ç¤ºã—ã€ç¾å®Ÿçš„ãªå§¿å‹¢ã‚’æ‰“ã¡å‡ºã—ã¾ã—ã‚‡ã†ã€‚'
                                },
                                {
                                    'zh-Hant': 'åŠ å…¥èˆ‡äº¤é€šå–®ä½å”èª¿çš„æ™‚é–“è¡¨ï¼Œè®“æ–¹æ¡ˆæ›´å¯ä¿¡ã€‚',
                                    'en': 'Include a coordination timeline with transport agencies for credibility.',
                                    'vi': 'ThÃªm lá»™ trÃ¬nh phá»‘i há»£p vá»›i Ä‘Æ¡n vá»‹ giao thÃ´ng Ä‘á»ƒ tÄƒng Ä‘á»™ tin cáº­y.',
                                    'ja': 'äº¤é€šå½“å±€ã¨ã®èª¿æ•´ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åŠ ãˆã€ä¿¡é ¼æ€§ã‚’é«˜ã‚ã¾ã—ã‚‡ã†ã€‚'
                                }
                            ]
                        }
                    }
                },
                questions: [
                    {
                        'zh-Hant': 'ä¹é»é–‹å­¸è¦é”æˆå“ªäº›å…·é«”æˆæœæ‰ç®—æˆåŠŸï¼Ÿ',
                        'en': 'What concrete outcomes define success for a 9 a.m. start?',
                        'vi': 'Nhá»¯ng káº¿t quáº£ cá»¥ thá»ƒ nÃ o sáº½ cho tháº¥y giá» há»c 9h thÃ nh cÃ´ng?',
                        'ja': 'åˆå‰9æ™‚é–‹å§‹ã®æˆåŠŸã‚’ç¤ºã™å…·ä½“çš„ãªæˆæœã¯ä½•ã§ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'äº¤é€šé‹è¼¸èˆ‡å®¶é•·ä½œæ¯è¦å¦‚ä½•åŒæ­¥èª¿æ•´ï¼Ÿ',
                        'en': 'How will you coordinate transportation and parent schedules?',
                        'vi': 'Báº¡n sáº½ phá»‘i há»£p lá»‹ch giao thÃ´ng vÃ  phá»¥ huynh ra sao?',
                        'ja': 'äº¤é€šæ©Ÿé–¢ã¨ä¿è­·è€…ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´ã‚’ã©ã†è¡Œã„ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'å°éœ€è¦æ—©æ‰˜çš„å®¶åº­ï¼Œæœ‰å“ªäº›æ”¯æ´æªæ–½ï¼Ÿ',
                        'en': 'What supports exist for families needing early drop-off?',
                        'vi': 'CÃ³ há»— trá»£ gÃ¬ cho gia Ä‘Ã¬nh cáº§n gá»­i con sá»›m?',
                        'ja': 'æ—©æœã«å­ã©ã‚‚ã‚’é ã‘ãŸã„å®¶åº­ã¸ã®æ”¯æ´ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'èª²å¾Œæ´»å‹•èˆ‡ç¤¾åœ˜è¦å¦‚ä½•èª¿æ•´æ–°çš„æ”¾å­¸æ™‚é–“ï¼Ÿ',
                        'en': 'How will after-school activities adapt to the new dismissal time?',
                        'vi': 'CÃ¡c hoáº¡t Ä‘á»™ng sau giá» há»c sáº½ Ä‘iá»u chá»‰nh tháº¿ nÃ o khi tan há»c muá»™n hÆ¡n?',
                        'ja': 'æ”¾èª²å¾Œæ´»å‹•ã¯æ–°ã—ã„ä¸‹æ ¡æ™‚é–“ã«ã©ã†é©å¿œã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æœ‰å“ªäº›æ•¸æ“šèƒ½è­‰æ˜èª¿æ•´ä½œæ¯çš„è²¡å‹™å½±éŸ¿ï¼Ÿ',
                        'en': 'What data demonstrates the financial impact of schedule changes?',
                        'vi': 'CÃ³ dá»¯ liá»‡u nÃ o chá»©ng minh tÃ¡c Ä‘á»™ng tÃ i chÃ­nh cá»§a viá»‡c Ä‘á»•i thá»i gian?',
                        'ja': 'æ™‚é–“å¤‰æ›´ã®è²¡æ”¿çš„å½±éŸ¿ã‚’ç¤ºã™ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'è©¦è¡ŒæœŸé–“ä½ æœƒå¦‚ä½•è’é›†å­¸ç”Ÿèˆ‡è€å¸«çš„å›é¥‹ï¼Ÿ',
                        'en': 'How will you gather student and teacher feedback during the pilot?',
                        'vi': 'Trong thá»i gian thá»­ nghiá»‡m, báº¡n thu tháº­p Ã½ kiáº¿n há»c sinh vÃ  giÃ¡o viÃªn tháº¿ nÃ o?',
                        'ja': 'è©¦è¡ŒæœŸé–“ä¸­ã«ç”Ÿå¾’ã¨æ•™å¸«ã®æ„è¦‹ã‚’ã©ã†åé›†ã—ã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æ˜¯å¦æœ‰å½ˆæ€§é–‹å­¸æˆ–æ··åˆæ™‚æ®µç­‰éæ¸¡æªæ–½ï¼Ÿ',
                        'en': 'Are there transitional steps like flexible start blocks?',
                        'vi': 'CÃ³ biá»‡n phÃ¡p chuyá»ƒn tiáº¿p nÃ o nhÆ° ca há»c linh hoáº¡t khÃ´ng?',
                        'ja': 'æŸ”è»Ÿãªå§‹æ¥­æ ãªã©ã®ç§»è¡Œæªç½®ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ'
                    },
                    {
                        'zh-Hant': 'æ”¿ç­–å¦‚ä½•åŒæ™‚ç…§é¡§é«˜ä¸­éƒ¨èˆ‡åœ‹ä¸­éƒ¨çš„éœ€æ±‚ï¼Ÿ',
                        'en': 'How will the policy serve both upper and lower grade levels?',
                        'vi': 'ChÃ­nh sÃ¡ch sáº½ Ä‘Ã¡p á»©ng nhu cáº§u cá»§a cáº£ báº­c trung há»c cÆ¡ sá»Ÿ vÃ  phá»• thÃ´ng nhÆ° tháº¿ nÃ o?',
                        'ja': 'é«˜æ ¡ç”Ÿã¨ä¸­å­¦ç”Ÿã®ãƒ‹ãƒ¼ã‚ºã‚’åŒæ™‚ã«ã©ã†æº€ãŸã—ã¾ã™ã‹ï¼Ÿ'
                    }
                ]
            },
        ];

        const tutoring_levels = {
            'zh-Hant': ['å¹¼ç¨šåœ’', 'åœ‹å°', 'åœ‹ä¸­', 'é«˜ä¸­', 'å¤§å­¸', 'å…¶ä»–'],
            'en': ['Kindergarten', 'Elementary', 'Middle School', 'High School', 'University', 'Other'],
            'vi': ['Máº«u giÃ¡o', 'Tiá»ƒu há»c', 'Trung há»c cÆ¡ sá»Ÿ', 'Trung há»c phá»• thÃ´ng', 'Äáº¡i há»c', 'KhÃ¡c'],
            'ja': ['å¹¼ç¨šåœ’', 'å°å­¦æ ¡', 'ä¸­å­¦æ ¡', 'é«˜æ ¡', 'å¤§å­¦', 'ãã®ä»–']
        };

        const tutoring_subjects = {
            'zh-Hant': ['åœ‹èª', 'æ•¸å­¸', 'è‹±æ–‡', 'è‡ªç„¶ç§‘å­¸', 'ç¤¾æœƒ', 'å…¶ä»–'],
            'en': ['Language Arts', 'Math', 'English', 'Science', 'Social Studies', 'Other'],
            'vi': ['Ngá»¯ vÄƒn', 'ToÃ¡n', 'Tiáº¿ng Anh', 'Khoa há»c tá»± nhiÃªn', 'XÃ£ há»™i', 'KhÃ¡c'],
            'ja': ['å›½èª', 'æ•°å­¦', 'è‹±èª', 'ç†ç§‘', 'ç¤¾ä¼š', 'ãã®ä»–']
        };

        const storybook_ages = {
            'zh-Hant': ['2-4æ­²', '5-7æ­²', '8-10æ­²'],
            'en': ['2-4 years', '5-7 years', '8-10 years'],
            'vi': ['2-4 tuá»•i', '5-7 tuá»•i', '8-10 tuá»•i'],
            'ja': ['2-4æ­³', '5-7æ­³', '8-10æ­³']
        };
        
        const aiExpertsData = {
            psychologist: {
                id: 'psychologist',
                icon: 'ğŸ§ ',
                name: {'zh-Hant': 'å…’ç«¥å¿ƒç†å­¸å®¶', 'en': 'Child Psychologist', 'vi': 'NhÃ  tÃ¢m lÃ½ há»c tráº» em', 'ja': 'å…ç«¥å¿ƒç†å­¦è€…'},
                description: {'zh-Hant': 'è¡Œç‚ºèˆ‡æƒ…ç·’æ¨¡å¼åˆ†æ', 'en': 'Analyzes behavior & emotional patterns', 'vi': 'PhÃ¢n tÃ­ch hÃ nh vi & cáº£m xÃºc', 'ja': 'è¡Œå‹•ã¨æ„Ÿæƒ…ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æ'},
                color: '#ec4899', // Pink
                systemPrompt: "You are a child psychologist. Your task is to provide advice as a valid JSON object. The JSON must have two keys: 'advice' (string with simple markdown: `**bold**`, `## Title`, `\\n` for newlines) and 'followUpQuestions' (array of 3 strings). IMPORTANT: All special characters like double quotes or backslashes within the 'advice' string must be properly escaped (e.g., \\\"example\\\", `C:\\\\path`). Output ONLY the JSON object."
            },
            languageExpert: {
                id: 'languageExpert',
                icon: 'ğŸ—£ï¸',
                name: {'zh-Hant': 'èªè¨€ç™¼å±•å°ˆå®¶', 'en': 'Language Development Specialist', 'vi': 'ChuyÃªn gia phÃ¡t triá»ƒn ngÃ´n ngá»¯', 'ja': 'è¨€èªç™ºé”å°‚é–€å®¶'},
                description: {'zh-Hant': 'æºé€šèˆ‡èªè¨€èƒ½åŠ›æŒ‡å°', 'en': 'Guides on communication & language skills', 'vi': 'HÆ°á»›ng dáº«n ká»¹ nÄƒng giao tiáº¿p & ngÃ´n ngá»¯', 'ja': 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨è¨€èªã‚¹ã‚­ãƒ«ã‚’æŒ‡å°'},
                color: '#8b5cf6', // Violet
                systemPrompt: "You are a language development specialist. Your task is to provide advice as a valid JSON object, in the same language as the user's question. The JSON must have two keys: 'advice' (string with simple markdown: `**bold**`, `## Title`, `\\n` for newlines) and 'followUpQuestions' (array of 3 strings). IMPORTANT: All special characters like double quotes or backslashes within the 'advice' string must be properly escaped (e.g., \\\"example\\\", `C:\\\\path`). Output ONLY the JSON object."
            },
            learningConsultant: {
                id: 'learningConsultant',
                icon: 'ğŸ“š',
                name: {'zh-Hant': 'å­¸ç¿’é¡§å•', 'en': 'Learning Consultant', 'vi': 'TÆ° váº¥n há»c táº­p', 'ja': 'å­¦ç¿’ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ'},
                description: {'zh-Hant': 'å»ºç«‹å­¸ç¿’å‹•æ©Ÿèˆ‡ç¿’æ…£', 'en': 'Builds learning motivation & routines', 'vi': 'XÃ¢y dá»±ng Ä‘á»™ng lá»±c & thÃ³i quen há»c táº­p', 'ja': 'å­¦ç¿’æ„æ¬²ã¨ç¿’æ…£ã‚’æ§‹ç¯‰'},
                color: '#22c55e', // Green
                systemPrompt: "You are an education strategist. Your task is to provide advice as a valid JSON object. The JSON must have two keys: 'advice' (string with simple markdown: `**bold**`, `## Title`, `\\n` for newlines) and 'followUpQuestions' (array of 3 strings). IMPORTANT: All special characters like double quotes or backslashes within the 'advice' string must be properly escaped (e.g., \\\"example\\\", `C:\\\\path`). Output ONLY the JSON object."
            }
        };

        const aiDoctorsData = {
            pediatrician: {
                id: 'pediatrician',
                icon: 'ğŸ‘¶',
                name: {'zh-Hant': 'AI å°å…’ç§‘é†«ç”Ÿ', 'en': 'AI Pediatrician', 'vi': 'BÃ¡c sÄ© nhi khoa AI', 'ja': 'AIå°å…ç§‘åŒ»'},
                description: {'zh-Hant': 'ä¸€èˆ¬å…’ç«¥å¥åº·å•é¡Œ', 'en': 'General child health issues', 'vi': 'CÃ¡c váº¥n Ä‘á» sá»©c khá»e chung cá»§a tráº»', 'ja': 'ä¸€èˆ¬çš„ãªå­ä¾›ã®å¥åº·å•é¡Œ'},
                color: '#3b82f6', // Blue
                systemPrompt: "You are an AI pediatrician. Analyze the user's input and provide a preliminary analysis as a valid JSON object. The JSON must have two keys: 'advice' (string with simple markdown: `**bold**`, `## Title`, `\\n` for newlines) and 'followUpQuestions' (array of 3 strings). IMPORTANT: The 'advice' string MUST include a clear disclaimer that you are an AI and not a substitute for professional medical advice. All special characters like double quotes or backslashes within the 'advice' string must be properly escaped (e.g., \\\"example\\\", `C:\\\\path`). Output ONLY the JSON object."
            },
            dermatologist: {
                id: 'dermatologist',
                icon: 'ğŸ–ï¸',
                name: {'zh-Hant': 'AI çš®è†šç§‘é†«ç”Ÿ', 'en': 'AI Dermatologist', 'vi': 'BÃ¡c sÄ© da liá»…u AI', 'ja': 'AIçš®è†šç§‘åŒ»'},
                description: {'zh-Hant': 'çš®è†šç›¸é—œå•é¡Œ', 'en': 'Skin-related issues', 'vi': 'CÃ¡c váº¥n Ä‘á» vá» da', 'ja': 'çš®è†šé–¢é€£ã®å•é¡Œ'},
                color: '#f97316', // Orange
                systemPrompt: "You are an AI dermatologist. Analyze the user's input and provide a preliminary analysis as a valid JSON object. The JSON must have two keys: 'advice' (string with simple markdown: `**bold**`, `## Title`, `\\n` for newlines) and 'followUpQuestions' (array of 3 strings). IMPORTANT: The 'advice' string MUST include a clear disclaimer that you are an AI and not a substitute for professional medical advice. All special characters like double quotes or backslashes within the 'advice' string must be properly escaped (e.g., \\\"example\\\", `C:\\\\path`). Output ONLY the JSON object."
            },
            familyDoctor: {
                id: 'familyDoctor',
                icon: 'ğŸ‘¨â€âš•ï¸',
                name: {'zh-Hant': 'AI å®¶é†«ç§‘é†«ç”Ÿ', 'en': 'AI Family Doctor', 'vi': 'BÃ¡c sÄ© gia Ä‘Ã¬nh AI', 'ja': 'AIå®¶åº­åŒ»'},
                description: {'zh-Hant': 'æˆäººä¸€èˆ¬å¥åº·å•é¡Œ', 'en': 'General adult health issues', 'vi': 'CÃ¡c váº¥n Ä‘á» sá»©c khá»e chung cá»§a ngÆ°á»i lá»›n', 'ja': 'ä¸€èˆ¬çš„ãªæˆäººã®å¥åº·å•é¡Œ'},
                color: '#10b981', // Emerald
                systemPrompt: "You are an AI family doctor for adults. Analyze the user's input and provide a preliminary analysis as a valid JSON object. The JSON must have two keys: 'advice' (string with simple markdown: `**bold**`, `## Title`, `\\n` for newlines) and 'followUpQuestions' (array of 3 strings). IMPORTANT: The 'advice' string MUST include a clear disclaimer that you are an AI and not a substitute for professional medical advice. All special characters like double quotes or backslashes within the 'advice' string must be properly escaped (e.g., \\\"example\\\", `C:\\\\path`). Output ONLY the JSON object."
            },
            pharmacist: {
                id: 'pharmacist',
                icon: 'ğŸ’Š',
                name: {'zh-Hant': 'AI è—¥åŠ‘å¸«', 'en': 'AI Pharmacist', 'vi': 'DÆ°á»£c sÄ© AI', 'ja': 'AIè–¬å‰¤å¸«'},
                description: {'zh-Hant': 'è—¥ç‰©ä½¿ç”¨èˆ‡äº¤äº’ä½œç”¨', 'en': 'Medication usage and interactions', 'vi': 'Sá»­ dá»¥ng vÃ  tÆ°Æ¡ng tÃ¡c thuá»‘c', 'ja': 'è–¬ã®ä½¿ç”¨ã¨ç›¸äº’ä½œç”¨'},
                color: '#6b7280', // Gray
                systemPrompt: "You are an AI pharmacist. Analyze the user's input (which may include an image of a medication) and provide information about the medication's usage, potential side effects, and interactions, as a valid JSON object. The JSON must have two keys: 'advice' (string with simple markdown: `**bold**`, `## Title`, `\\n` for newlines) and 'followUpQuestions' (array of 3 strings). IMPORTANT: The 'advice' string MUST include a clear disclaimer that you are an AI and not a substitute for professional medical advice. All special characters like double quotes or backslashes within the 'advice' string must be properly escaped (e.g., \\\"example\\\", `C:\\\\path`). Output ONLY the JSON object."
            }
        };


        // --- DOM Elements ---
        const languageSwitcher = document.getElementById('language-switcher');
        const mainNav = document.getElementById('main-nav');
        const views = document.querySelectorAll('.view-content');

        // Platform View
        const generateLessonBtn = document.getElementById('generate-lesson-btn');
        const lessonContainer = document.getElementById('lesson-container');
        const topicSelect = document.getElementById('topic-select');
        const customTopicWrapper = document.getElementById('custom-topic-wrapper');
        const customTopicInput = document.getElementById('custom-topic-input');
        const errorMessage = document.getElementById('error-message');
        const subjectGroup = document.getElementById('subject-group');

        // Tutoring View
        const startUploadBtn = document.getElementById('start-upload-btn');
        const tutoringInitialView = document.getElementById('tutoring-initial-view');
        const tutoringUploadView = document.getElementById('tutoring-upload-view');
        const tutoringResultsView = document.getElementById('tutoring-results-view');
        const fileDropZone = document.getElementById('file-drop-zone');
        const homeworkFileInput = document.getElementById('homework-file-input');
        const fileNameDisplay = document.getElementById('file-name-display');
        const tutoringFileSummary = document.getElementById('tutoring-file-summary');
        const analyzeHomeworkBtn = document.getElementById('analyze-homework-btn');
        const tutoringLevelSelect = document.getElementById('tutoring-level');
        const tutoringSubjectSelect = document.getElementById('tutoring-subject');
        const tutoringLanguageSelect = document.getElementById('tutoring-language');
        const tutoringCustomSubjectWrapper = document.getElementById('tutoring-custom-subject-wrapper');
        const tutoringCustomSubjectInput = document.getElementById('tutoring-custom-subject-input');
        const keyConceptsContainer = document.getElementById('key-concepts-container');
        const tutoringVocabCard = document.getElementById('tutoring-vocab-card');
        const tutoringVocabContainer = document.getElementById('tutoring-vocabulary-container');
        const problemAnalysisContainer = document.getElementById('problem-analysis-container');
        const tutoringErrorMessage = document.getElementById('tutoring-error-message');

        // Storybook View
        const startStorybookBtn = document.getElementById('start-storybook-upload-btn');
        const storybookInitialView = document.getElementById('storybook-initial-view');
        const storybookMainView = document.getElementById('storybook-main-view');
        const storybookFileDropZone = document.getElementById('storybook-file-drop-zone');
        const storybookFileInput = document.getElementById('storybook-file-input');
        const storybookPreviewImg = document.getElementById('storybook-preview-img');
        const storybookUploadPlaceholder = document.getElementById('storybook-upload-placeholder');
        const storybookFileSummary = document.getElementById('storybook-file-summary');
        const generateStoryBtn = document.getElementById('generate-story-btn');
        const storyOutputContainer = document.getElementById('story-output-container');
        const storyDisplayContainer = document.getElementById('story-display-container');
        const audioControls = document.getElementById('audio-controls');
        const playStoryBtn = document.getElementById('play-story-btn');
        const downloadAudioBtn = document.getElementById('download-audio-btn');
        const storybookLanguageSelect = document.getElementById('storybook-language');
        const storybookAgeSelect = document.getElementById('storybook-age');
        const storybookErrorMessage = document.getElementById('storybook-error-message');
        
        // AI Tutor View
        const aiTutorInput = document.getElementById('ai-tutor-input');
        const aiTutorCategoryGroup = document.getElementById('ai-tutor-category-group');
        const aiTutorExpertGroup = document.getElementById('ai-tutor-expert-group');
        const getAdviceBtn = document.getElementById('get-advice-btn');
        const aiTutorResponseContainer = document.getElementById('ai-tutor-response-container');
        const aiTutorErrorMessage = document.getElementById('ai-tutor-error-message');

        // AI Doctor View
        const aiDoctorFileDropZone = document.getElementById('ai-doctor-file-drop-zone');
        const aiDoctorFileInput = document.getElementById('ai-doctor-file-input');
        const aiDoctorPreviewImg = document.getElementById('ai-doctor-preview-img');
        const aiDoctorUploadPlaceholder = document.getElementById('ai-doctor-upload-placeholder');
        const aiDoctorFileSummary = document.getElementById('ai-doctor-file-summary');
        const aiDoctorExpertGroup = document.getElementById('ai-doctor-expert-group');
        const getDiagnosisBtn = document.getElementById('get-diagnosis-btn');
        const aiDoctorResponseContainer = document.getElementById('ai-doctor-response-container');
        const aiDoctorErrorMessage = document.getElementById('ai-doctor-error-message');
        const aiDoctorInput = document.getElementById('ai-doctor-input');

        // Debate Coach View
        const debateCoachView = document.getElementById('debate-coach-view');
        const debateMotionSelect = document.getElementById('debate-motion');
        const debateSideSelect = document.getElementById('debate-side');
        const debateLevelSelect = document.getElementById('debate-level');
        const debateModulesContainer = document.getElementById('debate-modules-container');
        const debateCustomMotionWrapper = document.getElementById('debate-custom-motion-wrapper');
        const debateCustomMotionInput = document.getElementById('debate-custom-motion');
        const debateToggleBilingualBtn = document.getElementById('debate-toggle-bilingual');

        // Modal
        const imageModal = document.getElementById('image-modal');
        const modalImage = document.getElementById('modal-image');
        const closeModalBtn = document.getElementById('close-modal');

        // --- API Configuration ---
        // API key is now stored securely in Supabase Edge Function
        const EDGE_FUNCTION_URL = `${SUPABASE_URL}/functions/v1/gemini-proxy`;
        
        // Helper function to get auth token
        async function getAuthToken() {
            if (!supabase || !isAuthenticated) {
                throw new Error('User not authenticated');
            }
            const { data: { session } } = await supabase.auth.getSession();
            if (!session) {
                throw new Error('No active session');
            }
            return session.access_token;
        }
        
        // --- API Call Functions ---
        async function handleApiError(response) {
            let errorBody;
            const contentType = response.headers.get('content-type');
            try {
                 if (contentType && contentType.includes('application/json')) {
                    errorBody = await response.json();
                    const message = errorBody.error?.message || JSON.stringify(errorBody);
                    return new Error(`API Error (${response.status}): ${message}`);
                } else {
                    errorBody = await response.text();
                    // Attempt to parse text as JSON if it looks like it, otherwise return plain text
                    if (errorBody && errorBody.trim().startsWith('{')) {
                       try {
                           errorBody = JSON.parse(errorBody);
                           const message = errorBody.error?.message || JSON.stringify(errorBody);
                           return new Error(`API Error (${response.status}): ${message}`);
                       } catch (parseError) {
                           // If parsing fails, use the raw text, ensuring it's not empty
                           return new Error(`API Error (${response.status}): ${errorBody || response.statusText}`);
                       }
                    } else {
                         // Return raw text or status text if body is empty
                        return new Error(`API Error (${response.status}): ${errorBody || response.statusText}`);
                    }
                }
            } catch (e) {
                // Fallback if reading the body fails, return status text
                console.error("Failed to parse error response body:", e);
                return new Error(`API Error (${response.status}): ${response.statusText}`);
            }
        }

        async function callGeminiAPI(prompt, systemPrompt = "", base64Image = null, model = "gemini-2.5-flash-preview-09-2025", usePersonalization = true) {
            // Check authentication
            if (!isAuthenticated) {
                throw new Error('è«‹å…ˆç™»å…¥ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½');
            }

            // Get personalized system prompt if enabled
            let finalSystemPrompt = systemPrompt;
            if (usePersonalization && isAuthenticated) {
                try {
                    const personalizedPrompt = await getPersonalizedPrompt({
                        prompt_type: 'gemini_api',
                        original_system_prompt: systemPrompt,
                    });
                    if (personalizedPrompt) {
                        finalSystemPrompt = personalizedPrompt + (systemPrompt ? `\n\n${systemPrompt}` : '');
                    }
                } catch (error) {
                    console.error('Failed to get personalized prompt, using default:', error);
                }
            }

            const authToken = await getAuthToken();
            const apiUrl = EDGE_FUNCTION_URL;

            const parts = [{ text: prompt }];
            if (base64Image) {
                parts.push({
                    inlineData: {
                        mimeType: "image/jpeg",
                        data: base64Image
                    }
                });
            }

            const payload = {
                endpoint: 'generateContent',
                model: model,
                contents: [{ role: "user", parts: parts }],
            };
            
            if(finalSystemPrompt){
                payload.systemInstruction = {
                    parts: [{ text: finalSystemPrompt }]
                };
            }

            try {
                let response;
                let result;
                let retries = 3;
                let delay = 1000;

                while (retries > 0) {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}`
                        },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        result = await response.json();
                        const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                        if (text) {
                            return text; // Success
                        } else {
                             // Check for safety ratings or other non-text response
                             if (result.candidates && result.candidates[0].finishReason !== 'STOP') {
                                 throw new Error(`API request stopped: ${result.candidates[0].finishReason}`);
                             }
                             throw new Error("No content returned from API.");
                        }
                    } else if (response.status === 429 || response.status >= 500) {
                        // Throttling or server error, retry
                        retries--;
                        if (retries === 0) {
                           throw await handleApiError(response);
                        }
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; // Exponential backoff
                    } else {
                        // Other client-side error, don't retry
                        throw await handleApiError(response);
                    }
                }
            } catch (error) {
                console.error("Gemini API Error:", error);
                throw error;
            }
        }
        
        async function callTTSAPI(text, button = null, options = {}) {
            // Check authentication
            if (!isAuthenticated) {
                throw new Error('è«‹å…ˆç™»å…¥ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½');
            }

            if (button) {
                button.classList.add('loading');
            }
            try {
                const authToken = await getAuthToken();
                const apiUrl = EDGE_FUNCTION_URL;
                const speechProfile = options.speechProfile || null;
                const voiceCandidates = Array.from(new Set([options.voiceName || voiceProfiles.default, voiceProfiles.default]));
                const rateCandidates = speechProfile?.apiRate ? [speechProfile.apiRate, null] : [null];

                const requestTTS = async (voiceName, speakingRate) => {
                    const speechConfig = {
                        voiceConfig: {
                            prebuiltVoiceConfig: { voiceName }
                        }
                    };
                    if (typeof speakingRate === 'number') {
                        speechConfig.speakingRate = speakingRate;
                    }
                    const payload = {
                        endpoint: 'generateContent',
                        model: 'gemini-2.5-flash-preview-tts',
                        contents: [{ parts: [{ text }] }],
                        generationConfig: {
                            responseModalities: ["AUDIO"],
                            speechConfig
                        }
                    };

                    let retries = 3;
                    let delay = 1000;
                    while (retries > 0) {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${authToken}`
                            },
                            body: JSON.stringify(payload)
                        });

                        if (response.ok) {
                            const result = await response.json();
                            const part = result?.candidates?.[0]?.content?.parts?.[0];
                            const audioData = part?.inlineData?.data;
                            const mimeType = part?.inlineData?.mimeType || '';

                            if (audioData && mimeType.startsWith("audio/")) {
                                const byteCharacters = atob(audioData);
                                const byteNumbers = new Array(byteCharacters.length);
                                for (let i = 0; i < byteCharacters.length; i++) {
                                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                                }
                                const byteArray = new Uint8Array(byteNumbers);
                                const normalizedMime = mimeType.toLowerCase();
                                if (normalizedMime.includes('pcm')) {
                                    const rateMatch = mimeType.match(/rate=(\d+)/);
                                    const sampleRate = rateMatch ? parseInt(rateMatch[1], 10) : 24000;
                                    const pcmLength = Math.floor(byteArray.byteLength / 2);
                                    const pcmView = new DataView(byteArray.buffer);
                                    const pcmData = new Int16Array(pcmLength);
                                    for (let i = 0; i < pcmLength; i++) {
                                        pcmData[i] = pcmView.getInt16(i * 2, true);
                                    }
                                    return pcmToWav(pcmData, sampleRate);
                                }
                                return new Blob([byteArray], { type: mimeType || 'audio/wav' });
                            } else {
                                if (result.candidates && result.candidates[0].finishReason !== 'STOP') {
                                    throw new Error(`TTS request stopped: ${result.candidates[0].finishReason}`);
                                }
                                throw new Error("Invalid audio data received from API.");
                            }
                        } else if (response.status === 429 || response.status >= 500) {
                            retries--;
                            if (retries === 0) {
                                throw await handleApiError(response);
                            }
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                        } else {
                            throw await handleApiError(response);
                        }
                    }
                };

                let lastError;
                for (const voiceName of voiceCandidates) {
                    for (const speakingRate of rateCandidates) {
                        try {
                            return await requestTTS(voiceName, speakingRate);
                        } catch (error) {
                            lastError = error;
                            console.warn(`TTS attempt failed (voice=${voiceName}, rate=${speakingRate ?? 'default'})`, error);
                        }
                    }
                }

                if (lastError) {
                    console.error("TTS API Error:", lastError);
                    throw lastError;
                }
                throw new Error("Unknown TTS error");
            } finally {
                if (button) {
                    button.classList.remove('loading');
                }
            }
        }
        
        async function callImagenAPI(prompt) {
            // Check authentication
            if (!isAuthenticated) {
                throw new Error('è«‹å…ˆç™»å…¥ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½');
            }

            const authToken = await getAuthToken();
            const apiUrl = EDGE_FUNCTION_URL;
            const payload = {
                endpoint: 'generateContent',
                model: 'gemini-2.5-flash-image-preview',
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: { responseModalities: ['TEXT', 'IMAGE'] },
            };
             try {
                let response;
                let result;
                let retries = 3;
                let delay = 1000;
                
                while (retries > 0) {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}`
                        },
                        body: JSON.stringify(payload)
                    });
                    
                     if (response.ok) {
                        result = await response.json();
                        const base64Data = result?.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;
                        if (base64Data) {
                            return `data:image/png;base64,${base64Data}`; // Success
                        } else {
                            // Check for safety ratings or other issues
                            if (result.candidates && result.candidates[0].finishReason !== 'STOP') {
                                throw new Error(`Image generation stopped: ${result.candidates[0].finishReason}`);
                            }
                            throw new Error("No image data returned from API.");
                        }
                    } else if (response.status === 429 || response.status >= 500) {
                        // Throttling or server error, retry
                        retries--;
                        if (retries === 0) {
                           throw await handleApiError(response);
                        }
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; // Exponential backoff
                    } else {
                        // Other client-side error, don't retry
                        throw await handleApiError(response);
                    }
                }
             } catch (error) {
                console.error("Image Generation Error:", error);
                throw error;
             }
        }

        // --- Helper Functions ---
        function setLoading(button, isLoading) {
            const btnText = button.querySelector('.btn-text');
            const loader = button.querySelector('.loader');
            if (isLoading) {
                button.disabled = true;
                if(btnText) btnText.classList.add('hidden');
                if(loader) loader.classList.remove('hidden');
            } else {
                button.disabled = false;
                if(btnText) btnText.classList.remove('hidden');
                if(loader) loader.classList.add('hidden');
            }
        }
        
        function simpleMarkdownParse(text) {
            if (!text) return '';
            return text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/## (.*?)(?:\\n|<br>|$)/g, '<h3 class="font-bold text-lg my-3">$1</h3>')
                .replace(/\\n/g, '<br>');
        }

        function normalizeSpeechText(value) {
            if (value === null || value === undefined) return '';
            return String(value).replace(/\s+/g, ' ').trim();
        }

        function encodeForDataAttr(value) {
            const normalized = normalizeSpeechText(value);
            if (!normalized) return '';
            return normalized
                .replace(/&/g, '&amp;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#39;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');
        }

        function base64FromFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = error => reject(error);
            });
        }
        
        function handleFileSelection(file, previewImgEl, placeholderEl, fileNameDisplayEl, buttonToEnable) {
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    if (previewImgEl) {
                         previewImgEl.src = event.target.result;
                         previewImgEl.classList.remove('hidden');
                    }
                    if (placeholderEl) placeholderEl.classList.add('hidden');
                    if (fileNameDisplayEl) fileNameDisplayEl.textContent = file.name;
                };
                reader.readAsDataURL(file);
                if (buttonToEnable) buttonToEnable.disabled = false;
                return file;
            }
             if (buttonToEnable) buttonToEnable.disabled = true;
            return null;
        }

        function pcmToWav(pcmData, sampleRate) {
            const header = new ArrayBuffer(44);
            const view = new DataView(header);
            const numSamples = pcmData.length;
            const numChannels = 1;
            const bitsPerSample = 16;
            const byteRate = sampleRate * numChannels * bitsPerSample / 8;
            const blockAlign = numChannels * bitsPerSample / 8;

            /* RIFF identifier */
            view.setUint8(0, 'R'.charCodeAt(0)); view.setUint8(1, 'I'.charCodeAt(0)); view.setUint8(2, 'F'.charCodeAt(0)); view.setUint8(3, 'F'.charCodeAt(0));
            /* file length */
            view.setUint32(4, 36 + numSamples * 2, true);
            /* RIFF type */
            view.setUint8(8, 'W'.charCodeAt(0)); view.setUint8(9, 'A'.charCodeAt(0)); view.setUint8(10, 'V'.charCodeAt(0)); view.setUint8(11, 'E'.charCodeAt(0));
            /* format chunk identifier */
            view.setUint8(12, 'f'.charCodeAt(0)); view.setUint8(13, 'm'.charCodeAt(0)); view.setUint8(14, 't'.charCodeAt(0)); view.setUint8(15, ' '.charCodeAt(0));
            /* format chunk length */
            view.setUint32(16, 16, true);
            /* sample format (1 for PCM) */
            view.setUint16(20, 1, true);
            /* channel count */
            view.setUint16(22, numChannels, true);
            /* sample rate */
            view.setUint32(24, sampleRate, true);
            /* byte rate */
            view.setUint32(28, byteRate, true);
            /* block align */
            view.setUint16(32, blockAlign, true);
            /* bits per sample */
            view.setUint16(34, bitsPerSample, true);
            /* data chunk identifier */
            view.setUint8(36, 'd'.charCodeAt(0)); view.setUint8(37, 'a'.charCodeAt(0)); view.setUint8(38, 't'.charCodeAt(0)); view.setUint8(39, 'a'.charCodeAt(0));
            /* data chunk length */
            view.setUint32(40, numSamples * 2, true);
            
            // PCM data must be Int16Array for WAV
             const wavData = new Int16Array(pcmData.buffer.byteLength / 2);
             const pcmView = new DataView(pcmData.buffer);
             for (let i = 0; i < wavData.length; i++) {
                wavData[i] = pcmView.getInt16(i * 2, true); // Assuming little-endian PCM
            }
            
            return new Blob([view, wavData], { type: 'audio/wav' });
        }
        
         function displayError(element, message) {
            element.textContent = message;
            element.classList.remove('hidden');
        }

        function getAudioButtonKey(button) {
            if (!button.dataset.audioKey) {
                audioButtonCounter += 1;
                button.dataset.audioKey = `audio-${audioButtonCounter}`;
            }
            return button.dataset.audioKey;
        }

        function cacheGeneratedAudio(key, blob) {
            const existing = generatedAudioCache.get(key);
            if (existing?.url) {
                URL.revokeObjectURL(existing.url);
            }
            const url = URL.createObjectURL(blob);
            generatedAudioCache.set(key, { blob, url, updatedAt: Date.now() });
            return url;
        }

        function ensureDownloadButton(button) {
            let downloadBtn = button.nextElementSibling;
            if (!downloadBtn || !downloadBtn.classList.contains('download-audio-btn')) {
                downloadBtn = document.createElement('button');
                downloadBtn.type = 'button';
                downloadBtn.className = 'download-audio-btn hidden';
                downloadBtn.setAttribute('aria-label', 'Download audio');
                downloadBtn.title = 'Download audio';
                downloadBtn.innerHTML = '<i class="fas fa-download"></i>';
                button.insertAdjacentElement('afterend', downloadBtn);
            }
            downloadBtn.dataset.downloadKey = button.dataset.audioKey;
            return downloadBtn;
        }

        function showDownloadButton(button) {
            if (!button?.isConnected) return;
            const downloadBtn = ensureDownloadButton(button);
            downloadBtn.classList.remove('hidden');
        }

        function getAudioErrorDisplay(element) {
            if (element.closest('#tutoring-results-view')) {
                return tutoringErrorMessage;
            }
            if (element.closest('#storybook-main-view')) {
                return storybookErrorMessage;
            }
            return errorMessage;
        }

        function triggerAudioDownload(downloadBtn) {
            const key = downloadBtn.dataset.downloadKey;
            const cache = generatedAudioCache.get(key);
            const errorDisplay = getAudioErrorDisplay(downloadBtn);
            if (!cache) {
                displayError(errorDisplay, 'Audio file not ready yet. Please play it once before downloading.');
                return;
            }
            const link = document.createElement('a');
            link.href = cache.url;
            link.download = `tts-${Date.now()}.wav`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // --- UI Rendering ---
        
        // MOVED createVocabularyHtmlForLang and createPhrasesHtmlForLang here to be accessible by handleLessonEvents
        const createVocabularyHtmlForLang = (targetLang) => {
            if (!currentLesson || !currentLesson.vocabulary) return '';
            const lang = targetLang || currentLang; // Fallback to currentLang
            return currentLesson.vocabulary.map(item => {
                const translationText = (item.translation && item.translation[targetLang]) ? item.translation[targetLang] : item.word;
                const phoneticHTML = item.phonetic ? `<p class="text-sm text-cyan-300">/<span data-translate-key="phoneticLabel">${translations[lang].phoneticLabel}</span>: ${item.phonetic}/</p>` : '';
                
                // Updated exampleHTML to check for object and then targetLang
                const exampleSentence = (item.example_sentence && typeof item.example_sentence === 'object' && item.example_sentence[targetLang]) 
                    ? item.example_sentence[targetLang] 
                    : (item.example_sentence && typeof item.example_sentence === 'object' && item.example_sentence['en'])
                    ? item.example_sentence['en'] // Fallback to english
                    : (typeof item.example_sentence === 'string') // Legacy support for string
                    ? item.example_sentence
                    : '';
                
                const exampleHTML = exampleSentence ? `<p class="text-sm italic mt-2 text-indigo-200">"<span data-translate-key="exampleLabel">${translations[lang].exampleLabel}</span>: ${exampleSentence}"</p>` : '';

                const wordSpeechAttr = encodeForDataAttr(item.word || translationText);
                const vocabAudioButton = wordSpeechAttr ? `
                        <button class="play-audio-btn flex-shrink-0 ml-4" data-text-to-speak="${wordSpeechAttr}" data-lesson-lang="${lang}">
                            <i class="fas fa-play"></i>
                            <div class="audio-loader"></div>
                        </button>` : '';

                return `
                    <div class="p-4 bg-white/10 rounded-lg flex justify-between items-start">
                        <div class="flex-grow">
                            <p class="font-bold text-lg text-yellow-300">${item.word}</p>
                            ${phoneticHTML}
                            <p class="text-sm mt-1 font-semibold">${translationText}</p>
                            ${exampleHTML}
                        </div>
                        ${vocabAudioButton}
                    </div>
                `;
            }).join('');
        };

        const createPhrasesHtmlForLang = (targetLang) => {
             if (!currentLesson || !currentLesson.phrases) return '';
             const lang = targetLang || currentLang; // Fallback
             return currentLesson.phrases.map(item => {
                const translationText = (item.translation && item.translation[targetLang]) ? item.translation[targetLang] : item.phrase;
                const phraseSpeechAttr = encodeForDataAttr(item.phrase || translationText);
                const phraseAudioButton = phraseSpeechAttr ? `
                        <button class="play-audio-btn flex-shrink-0" data-text-to-speak="${phraseSpeechAttr}" data-lesson-lang="${lang}">
                            <i class="fas fa-play"></i>
                            <div class="audio-loader"></div>
                        </button>` : '';
                 return `
                    <div class="p-4 bg-white/10 rounded-lg flex justify-between items-center">
                        <div>
                            <p class="font-semibold text-lg text-yellow-300">${item.phrase}</p>
                            <p class="text-sm mt-1">${translationText}</p>
                        </div>
                        ${phraseAudioButton}
                    </div>
                 `;
            }).join('');
        };


        function renderLesson() {
            if (!currentLesson) return;
            const lang = document.getElementById('lesson-lang-tabs')?.querySelector('.active')?.dataset.lang || currentLang;
            const selectedTopicName = currentLesson.selectedTopicName || (topicSelect.value === '__custom__' ? (customTopicInput?.value.trim() || getCustomTopicOptionText()) : topicSelect.value);
            
            // createVocabularyHtmlForLang and createPhrasesHtmlForLang were moved out

            const explanationLangTabsHTML = Object.entries(translations[currentLang].lessonLangTabs).map(([key, value]) => `
                <button class="lesson-lang-btn px-3 py-1 rounded-md text-sm ${key === currentLang ? 'active' : ''}" data-lang="${key}">${value}</button>
            `).join('');
            const isDialogueLesson = currentLessonType === 'é›™äººåšå®¢';
            const voiceVariants = isDialogueLesson ? ['dialogue'] : ['default'];
            const voiceLabels = translations[currentLang].voiceLabels || {};
            const explanationAudioButtonsHTML = Object.entries(translations[currentLang].lessonLangTabs).map(([key, value]) => {
                return voiceVariants.map(voiceType => {
                    let template;
                    if (voiceType === 'dialogue') {
                        template = translations[currentLang].genDialogueAudio || translations[currentLang].genAudio;
                    } else if (voiceType === 'default') {
                        template = translations[currentLang].genAudio;
                    } else {
                        template = translations[currentLang].genAudioVariant || translations[currentLang].genAudio;
                    }
                    let buttonText = template.replace('{lang}', value);
                    if (buttonText.includes('{voice}')) {
                        buttonText = buttonText.replace('{voice}', voiceLabels?.[voiceType] || voiceType);
                    } else if (voiceType !== 'default' && voiceType !== 'dialogue') {
                        buttonText = `${buttonText} (${voiceLabels?.[voiceType] || voiceType})`;
                    }
                    return `
                        <button class="generate-explanation-audio-btn bg-white/20 hover:bg-white/30 text-white text-sm py-2 px-3 rounded-md flex items-center justify-center" data-lang="${key}" data-voice="${voiceType}">
                            <span class="btn-text">${buttonText}</span>
                            <div class="loader ml-2 hidden"></div>
                        </button>
                    `;
                }).join('');
            }).join('');

            const explanationAudioSectionHTML = Object.entries(translations[currentLang].lessonLangTabs).map(([key, value]) => {
                return voiceVariants.map(voiceType => {
                    let downloadTemplate = translations[currentLang].downloadAudio;
                    if (voiceType === 'dialogue') {
                        downloadTemplate = translations[currentLang].downloadDialogueAudio || downloadTemplate;
                    }
                    const downloadText = downloadTemplate.replace('{lang}', value);
                    let voiceBadge = '';
                    if (voiceType === 'dialogue') {
                        const badgeText = translations[currentLang].dialogueBadge || 'Dialogue';
                        voiceBadge = `<span class="text-xs uppercase tracking-wide text-indigo-200 font-semibold">${badgeText}</span>`;
                    } else if (voiceType !== 'default') {
                        voiceBadge = `<span class="text-xs uppercase tracking-wide text-indigo-200 font-semibold">${voiceLabels?.[voiceType] || voiceType}</span>`;
                    }
                    return `
                        <div id="audio-player-${key}-${voiceType}" class="hidden flex-col items-center gap-2">
                            ${voiceBadge}
                            <audio controls class="w-full"></audio>
                            <a href="#" class="download-link text-sm text-cyan-300 hover:underline">${downloadText}</a>
                        </div>
                    `;
                }).join('');
            }).join('');
            
            lessonContainer.innerHTML = `
                 <div class="bg-blue-900/10 backdrop-blur-md rounded-xl shadow-lg p-6 md:p-8 border-2 border-white/20 text-white space-y-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                        <div>
                            <h3 class="text-2xl font-bold mb-4 text-center">"${selectedTopicName}"</h3>
                            <div class="flex justify-center flex-wrap gap-2 mb-4" id="lesson-lang-tabs">
                                ${explanationLangTabsHTML}
                            </div>
                            <p id="lesson-explanation" class="text-indigo-200 leading-relaxed min-h-[120px]">${currentLesson.explanation[currentLang]}</p>
                             <div class="grid grid-cols-2 md:grid-cols-2 gap-2 mt-4" id="lesson-audio-buttons">
                                ${explanationAudioButtonsHTML}
                            </div>
                            <div class="mt-4 space-y-2">
                                ${explanationAudioSectionHTML}
                            </div>
                        </div>
                        <div class="cursor-pointer">
                            <h4 class="text-xl font-bold mb-4 text-center" data-translate-key="imageTitle">${translations[lang].imageTitle}</h4>
                            <img id="lesson-image" src="${currentLesson.imageUrl || 'https://placehold.co/600x600/1e1b4b/9ca3af?text=Loading...'}" alt="Lesson image" class="rounded-lg shadow-lg w-full aspect-square object-cover">
                        </div>
                    </div>
                    ${currentLesson.vocabulary ? `
                    <div>
                        <h4 class="text-xl font-bold mb-4" data-translate-key="vocabTitle">${translations[lang].vocabTitle}</h4>
                        <div id="vocabulary-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">${createVocabularyHtmlForLang(lang)}</div>
                    </div>` : ''}
                    ${currentLesson.phrases ? `
                    <div>
                         <h4 class="text-xl font-bold mb-4" data-translate-key="phraseTitle">${translations[lang].phraseTitle}</h4>
                         <div id="phrases-list" class="space-y-4">${createPhrasesHtmlForLang(lang)}</div>
                    </div>` : ''}
                </div>
            `;
            const lessonImage = document.getElementById('lesson-image');
            if(lessonImage) {
                lessonImage.addEventListener('click', () => {
                    modalImage.src = lessonImage.src;
                    imageModal.classList.remove('hidden');
                    imageModal.classList.add('flex');
                });
            }
        }
        
        // --- Event Handlers & App Logic ---
        function switchView(viewId) {
            views.forEach(view => view.classList.add('hidden'));
            document.getElementById(viewId)?.classList.remove('hidden');
            mainNav.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === viewId);
            });
             // Clear chat history when switching away from tutor/doctor views
            if (viewId !== 'ai-tutor-view') {
                aiTutorChatHistory = [];
                aiTutorResponseContainer.innerHTML = '';
                 aiTutorResponseContainer.classList.add('hidden');
            }
            if (viewId !== 'ai-doctor-view') {
                aiDoctorChatHistory = [];
                aiDoctorResponseContainer.innerHTML = '';
                 aiDoctorResponseContainer.classList.add('hidden');
            }
            if (viewId !== 'debate-coach-view') {
                Object.keys(debateModuleConfigs).forEach(key => {
                    stopModuleTimer(key);
                    setWaveformVisible(key, false);
                    showProgress(key, false);
                    setRecordingButtonState(getRecordingButton(key), false);
                    debateState.recording[key] = { status: 'idle' };
                });
            } else {
                renderDebateModules();
            }
            if (viewId === 'admin-view') {
                loadAdminData();
            }
            if (viewId === 'my-learning-view') {
                loadLearningStats();
                loadLessonsHistory();
            }
        }
        
        function handleNavClick(e) {
            const btn = e.target.closest('.nav-btn');
            if (btn) {
                switchView(btn.dataset.view);
            }
        }

        // --- AI Personalization Functions ---
        const AI_PERSONALIZATION_URL = `${SUPABASE_URL}/functions/v1/ai-personalization`;
        let currentSessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        let userPreferences = null;
        let personalizedSystemPrompt = null;
        
        // Log user behavior
        async function logUserBehavior(actionType, actionDetails = {}) {
            if (!isAuthenticated) return;
            
            try {
                const { data: { session } } = await supabase.auth.getSession();
                if (!session) return;
                
                await fetch(AI_PERSONALIZATION_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${session.access_token}`,
                    },
                    body: JSON.stringify({
                        action: 'log_behavior',
                        behavior: {
                            action_type: actionType,
                            action_details: actionDetails,
                            session_id: currentSessionId,
                        }
                    }),
                });
            } catch (error) {
                console.error('Failed to log behavior:', error);
            }
        }
        
        // Get personalized prompt for AI
        async function getPersonalizedPrompt(context = {}) {
            if (!isAuthenticated) return null;
            
            try {
                const { data: { session } } = await supabase.auth.getSession();
                if (!session) return null;
                
                const response = await fetch(AI_PERSONALIZATION_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${session.access_token}`,
                    },
                    body: JSON.stringify({
                        action: 'get_personalized_prompt',
                        prompt_context: context,
                    }),
                });
                
                const result = await response.json();
                if (result.personalized_system_prompt) {
                    personalizedSystemPrompt = result.personalized_system_prompt;
                    userPreferences = result.personalized_context.user_preferences;
                    return result.personalized_system_prompt;
                }
                return null;
            } catch (error) {
                console.error('Failed to get personalized prompt:', error);
                return null;
            }
        }
        
        // Save user feedback
        async function saveUserFeedback(responseType, responseId, rating, feedbackText = null, wasHelpful = null) {
            if (!isAuthenticated) return;
            
            try {
                const { data: { session } } = await supabase.auth.getSession();
                if (!session) return;
                
                await fetch(AI_PERSONALIZATION_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${session.access_token}`,
                    },
                    body: JSON.stringify({
                        action: 'save_feedback',
                        feedback: {
                            response_type: responseType,
                            response_id: responseId,
                            rating: rating,
                            feedback_text: feedbackText,
                            was_helpful: wasHelpful,
                        }
                    }),
                });
            } catch (error) {
                console.error('Failed to save feedback:', error);
            }
        }
        
        // Analyze learning style (call periodically)
        async function analyzeUserLearningStyle() {
            if (!isAuthenticated) return;
            
            try {
                const { data: { session } } = await supabase.auth.getSession();
                if (!session) return;
                
                const response = await fetch(AI_PERSONALIZATION_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${session.access_token}`,
                    },
                    body: JSON.stringify({
                        action: 'analyze_learning_style',
                    }),
                });
                
                const result = await response.json();
                console.log('Learning style analysis:', result);
            } catch (error) {
                console.error('Failed to analyze learning style:', error);
            }
        }
        
        // Enhanced callGeminiAPI with personalization
        async function callGeminiAPIWithPersonalization(userPrompt, baseSystemPrompt = '', imageBase64 = null, context = {}) {
            // Get personalized system prompt
            const personalizedPrompt = await getPersonalizedPrompt(context);
            
            // Combine base system prompt with personalized prompt
            const finalSystemPrompt = personalizedPrompt 
                ? `${baseSystemPrompt}\n\n${personalizedPrompt}`
                : baseSystemPrompt;
            
            // Call original Gemini API
            return await callGeminiAPI(userPrompt, finalSystemPrompt, imageBase64);
        }

        // --- Learning Progress Functions ---
        const LEARNING_PROGRESS_URL = `${SUPABASE_URL}/functions/v1/learning-progress`;
        
        async function callLearningProgress(action, payload = {}) {
            if (!supabase || !isAuthenticated) {
                throw new Error('è«‹å…ˆç™»å…¥');
            }
            
            const { data: { session } } = await supabase.auth.getSession();
            if (!session) {
                throw new Error('æœªæ‰¾åˆ°ç™»å…¥æœƒè©±');
            }
            
            const response = await fetch(LEARNING_PROGRESS_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${session.access_token}`,
                },
                body: JSON.stringify({ action, ...payload }),
            });
            
            const result = await response.json();
            if (!response.ok) {
                throw new Error(result.error || 'æ“ä½œå¤±æ•—');
            }
            
            return result;
        }
        
        // Save lesson to learning history
        async function saveLessonToHistory(lessonData) {
            try {
                await callLearningProgress('save_lesson', { lesson: lessonData });
                // Refresh stats if on my-learning view
                if (document.getElementById('my-learning-view') && !document.getElementById('my-learning-view').classList.contains('hidden')) {
                    loadLearningStats();
                }
            } catch (error) {
                console.error('Failed to save lesson:', error);
            }
        }
        
        // Save story to learning history
        async function saveStoryToHistory(storyData) {
            try {
                await callLearningProgress('save_story', { story: storyData });
                if (document.getElementById('my-learning-view') && !document.getElementById('my-learning-view').classList.contains('hidden')) {
                    loadLearningStats();
                }
            } catch (error) {
                console.error('Failed to save story:', error);
            }
        }
        
        // Save tutoring session to learning history
        async function saveTutoringToHistory(tutoringData) {
            try {
                await callLearningProgress('save_tutoring', { tutoring: tutoringData });
                if (document.getElementById('my-learning-view') && !document.getElementById('my-learning-view').classList.contains('hidden')) {
                    loadLearningStats();
                }
            } catch (error) {
                console.error('Failed to save tutoring session:', error);
            }
        }
        
        // Load learning statistics
        async function loadLearningStats() {
            try {
                const result = await callLearningProgress('get_stats');
                if (result.data) {
                    document.getElementById('stat-lessons').textContent = result.data.total_lessons || 0;
                    document.getElementById('stat-stories').textContent = result.data.total_stories || 0;
                    document.getElementById('stat-tutoring').textContent = result.data.total_tutoring_sessions || 0;
                    document.getElementById('stat-favorites').textContent = result.data.total_favorites || 0;
                }
            } catch (error) {
                console.error('Failed to load stats:', error);
            }
        }
        
        // Load lessons history
        async function loadLessonsHistory() {
            try {
                const result = await callLearningProgress('get_lessons', { limit: 50, offset: 0 });
                const container = document.getElementById('lessons-container');
                if (!result.data || result.data.length === 0) {
                    container.innerHTML = `<div class="text-center text-indigo-200 py-8">
                        <i class="fas fa-book text-4xl mb-4 opacity-50"></i>
                        <p data-translate-key="myLearning.noLessons">é‚„æ²’æœ‰èª²ç¨‹è¨˜éŒ„</p>
                    </div>`;
                    return;
                }
                
                container.innerHTML = result.data.map(lesson => {
                    const content = lesson.content || {};
                    const date = new Date(lesson.created_at).toLocaleDateString(currentLang === 'zh-Hant' ? 'zh-TW' : currentLang);
                    return `
                        <div class="bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20">
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex-1">
                                    <h3 class="font-bold text-lg text-yellow-300 mb-1">${lesson.topic}</h3>
                                    <div class="flex flex-wrap gap-2 text-sm text-indigo-200">
                                        <span><i class="fas fa-book mr-1"></i>${lesson.lesson_type}</span>
                                        <span><i class="fas fa-graduation-cap mr-1"></i>${lesson.subject}</span>
                                        <span><i class="fas fa-users mr-1"></i>${lesson.age_group}</span>
                                    </div>
                                </div>
                                <button class="favorite-btn text-yellow-300 hover:text-yellow-200" data-item-type="lesson" data-item-id="${lesson.id}">
                                    <i class="far fa-star"></i>
                                </button>
                            </div>
                            <p class="text-sm text-white/70 mb-2 line-clamp-2">${content.explanation?.[currentLang] || content.explanation?.['zh-Hant'] || ''}</p>
                            <div class="flex justify-between items-center text-xs text-indigo-200">
                                <span><i class="far fa-calendar mr-1"></i>${date}</span>
                                <button class="view-details-btn text-yellow-300 hover:text-yellow-200" data-lesson-id="${lesson.id}">
                                    <i class="fas fa-eye mr-1"></i><span data-translate-key="myLearning.viewDetails">æŸ¥çœ‹è©³æƒ…</span>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Failed to load lessons:', error);
                document.getElementById('lessons-container').innerHTML = `<div class="text-center text-red-300 py-8">è¼‰å…¥å¤±æ•—</div>`;
            }
        }
        
        // Load stories history
        async function loadStoriesHistory() {
            try {
                const result = await callLearningProgress('get_stories', { limit: 50, offset: 0 });
                const container = document.getElementById('stories-container');
                if (!result.data || result.data.length === 0) {
                    container.innerHTML = `<div class="text-center text-indigo-200 py-8">
                        <i class="fas fa-book-reader text-4xl mb-4 opacity-50"></i>
                        <p data-translate-key="myLearning.noStories">é‚„æ²’æœ‰æ•…äº‹è¨˜éŒ„</p>
                    </div>`;
                    return;
                }
                
                container.innerHTML = result.data.map(story => {
                    const date = new Date(story.created_at).toLocaleDateString(currentLang === 'zh-Hant' ? 'zh-TW' : currentLang);
                    const preview = story.story_text.substring(0, 150) + (story.story_text.length > 150 ? '...' : '');
                    return `
                        <div class="bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20">
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex-1">
                                    <h3 class="font-bold text-lg text-yellow-300 mb-1">${story.character_name || 'æ•…äº‹'}</h3>
                                    <div class="flex flex-wrap gap-2 text-sm text-indigo-200">
                                        <span><i class="fas fa-language mr-1"></i>${story.language}</span>
                                        <span><i class="fas fa-users mr-1"></i>${story.age_group}</span>
                                        <span><i class="fas fa-palette mr-1"></i>${story.style}</span>
                                    </div>
                                </div>
                                <button class="favorite-btn text-yellow-300 hover:text-yellow-200" data-item-type="story" data-item-id="${story.id}">
                                    <i class="far fa-star"></i>
                                </button>
                            </div>
                            <p class="text-sm text-white/70 mb-2 line-clamp-3">${preview}</p>
                            <div class="flex justify-between items-center text-xs text-indigo-200">
                                <span><i class="far fa-calendar mr-1"></i>${date}</span>
                                <button class="view-story-btn text-yellow-300 hover:text-yellow-200" data-story-id="${story.id}">
                                    <i class="fas fa-eye mr-1"></i><span data-translate-key="myLearning.viewDetails">æŸ¥çœ‹è©³æƒ…</span>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Failed to load stories:', error);
                document.getElementById('stories-container').innerHTML = `<div class="text-center text-red-300 py-8">è¼‰å…¥å¤±æ•—</div>`;
            }
        }
        
        // Load tutoring sessions history
        async function loadTutoringHistory() {
            try {
                const result = await callLearningProgress('get_tutoring_sessions', { limit: 50, offset: 0 });
                const container = document.getElementById('tutoring-container');
                if (!result.data || result.data.length === 0) {
                    container.innerHTML = `<div class="text-center text-indigo-200 py-8">
                        <i class="fas fa-graduation-cap text-4xl mb-4 opacity-50"></i>
                        <p data-translate-key="myLearning.noTutoring">é‚„æ²’æœ‰ä½œæ¥­è¼”å°è¨˜éŒ„</p>
                    </div>`;
                    return;
                }
                
                container.innerHTML = result.data.map(session => {
                    const date = new Date(session.created_at).toLocaleDateString(currentLang === 'zh-Hant' ? 'zh-TW' : currentLang);
                    const analysis = session.analysis_content || {};
                    return `
                        <div class="bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20">
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex-1">
                                    <h3 class="font-bold text-lg text-yellow-300 mb-1">${session.subject}</h3>
                                    <div class="flex flex-wrap gap-2 text-sm text-indigo-200">
                                        <span><i class="fas fa-layer-group mr-1"></i>${session.level}</span>
                                        <span><i class="fas fa-language mr-1"></i>${session.language}</span>
                                    </div>
                                </div>
                                <button class="favorite-btn text-yellow-300 hover:text-yellow-200" data-item-type="tutoring" data-item-id="${session.id}">
                                    <i class="far fa-star"></i>
                                </button>
                            </div>
                            <p class="text-sm text-white/70 mb-2 line-clamp-2">${analysis.summary || ''}</p>
                            <div class="flex justify-between items-center text-xs text-indigo-200">
                                <span><i class="far fa-calendar mr-1"></i>${date}</span>
                                <button class="view-tutoring-btn text-yellow-300 hover:text-yellow-200" data-tutoring-id="${session.id}">
                                    <i class="fas fa-eye mr-1"></i><span data-translate-key="myLearning.viewDetails">æŸ¥çœ‹è©³æƒ…</span>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Failed to load tutoring sessions:', error);
                document.getElementById('tutoring-container').innerHTML = `<div class="text-center text-red-300 py-8">è¼‰å…¥å¤±æ•—</div>`;
            }
        }
        
        // Load favorites
        async function loadFavorites() {
            try {
                const result = await callLearningProgress('get_favorites', { limit: 50, offset: 0 });
                const container = document.getElementById('favorites-container');
                if (!result.data || result.data.length === 0) {
                    container.innerHTML = `<div class="text-center text-indigo-200 py-8">
                        <i class="fas fa-star text-4xl mb-4 opacity-50"></i>
                        <p data-translate-key="myLearning.noFavorites">é‚„æ²’æœ‰æ”¶è—</p>
                    </div>`;
                    return;
                }
                
                container.innerHTML = '<p class="text-indigo-200 mb-4">æ”¶è—åŠŸèƒ½é–‹ç™¼ä¸­...</p>';
            } catch (error) {
                console.error('Failed to load favorites:', error);
                document.getElementById('favorites-container').innerHTML = `<div class="text-center text-red-300 py-8">è¼‰å…¥å¤±æ•—</div>`;
            }
        }

        // --- Admin Management Functions ---
        const ADMIN_EDGE_FUNCTION_URL = `${SUPABASE_URL}/functions/v1/admin-management`;
        
        async function callAdminFunction(action, payload = {}) {
            if (!supabase || !isAuthenticated) {
                throw new Error('è«‹å…ˆç™»å…¥');
            }
            
            const { data: { session } } = await supabase.auth.getSession();
            if (!session) {
                throw new Error('æœªæ‰¾åˆ°ç™»å…¥æœƒè©±');
            }
            
            const response = await fetch(ADMIN_EDGE_FUNCTION_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${session.access_token}`,
                },
                body: JSON.stringify({ action, ...payload }),
            });
            
            const result = await response.json();
            if (!response.ok) {
                throw new Error(result.error || 'æ“ä½œå¤±æ•—');
            }
            
            return result;
        }
        
        async function loadAdminData() {
            const pendingContainer = document.getElementById('pending-users-container');
            const authorizedContainer = document.getElementById('authorized-users-container');
            const adminErrorMsg = document.getElementById('admin-error-message');
            const adminSuccessMsg = document.getElementById('admin-success-message');
            
            adminErrorMsg?.classList.add('hidden');
            adminSuccessMsg?.classList.add('hidden');
            
            // Load pending users
            try {
                pendingContainer.innerHTML = '<div class="text-center text-indigo-200 py-8"><div class="loader mx-auto mb-2"></div><p>è¼‰å…¥ä¸­...</p></div>';
                const pendingResult = await callAdminFunction('get_pending_users');
                renderPendingUsers(pendingResult.users || []);
            } catch (error) {
                pendingContainer.innerHTML = `<div class="text-center text-red-300 py-8"><p>è¼‰å…¥å¤±æ•—: ${error.message}</p></div>`;
            }
            
            // Load authorized users
            try {
                authorizedContainer.innerHTML = '<div class="text-center text-indigo-200 py-8"><div class="loader mx-auto mb-2"></div><p>è¼‰å…¥ä¸­...</p></div>';
                const authorizedResult = await callAdminFunction('get_authorized_users');
                renderAuthorizedUsers(authorizedResult.users || []);
            } catch (error) {
                authorizedContainer.innerHTML = `<div class="text-center text-red-300 py-8"><p>è¼‰å…¥å¤±æ•—: ${error.message}</p></div>`;
            }
        }
        
        function renderPendingUsers(users) {
            const container = document.getElementById('pending-users-container');
            if (!container) return;
            
            if (users.length === 0) {
                container.innerHTML = '<div class="text-center text-indigo-200 py-8"><p>ç›®å‰æ²’æœ‰å¾…å¯©æ ¸çš„ç”¨æˆ¶</p></div>';
                return;
            }
            
            container.innerHTML = users.map(user => {
                const createdDate = new Date(user.created_at).toLocaleString('zh-TW');
                const lastSignIn = user.last_sign_in_at ? new Date(user.last_sign_in_at).toLocaleString('zh-TW') : 'å¾æœªç™»å…¥';
                return `
                    <div class="bg-white/10 rounded-lg p-4 border border-white/20">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <p class="font-semibold text-lg">${user.email}</p>
                                <p class="text-sm text-indigo-200 mt-1">è¨»å†Šæ™‚é–“: ${createdDate}</p>
                                <p class="text-sm text-indigo-200">æœ€å¾Œç™»å…¥: ${lastSignIn}</p>
                            </div>
                            <button onclick="approveUser('${user.id}', '${user.email}')" 
                                    class="ml-4 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm font-medium">
                                <i class="fas fa-check mr-2"></i>å¯©æ ¸é€šé
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function renderAuthorizedUsers(users) {
            const container = document.getElementById('authorized-users-container');
            if (!container) return;
            
            if (users.length === 0) {
                container.innerHTML = '<div class="text-center text-indigo-200 py-8"><p>ç›®å‰æ²’æœ‰å·²æˆæ¬Šçš„ç”¨æˆ¶</p></div>';
                return;
            }
            
            container.innerHTML = users.map(user => {
                const createdDate = new Date(user.created_at).toLocaleString('zh-TW');
                const updatedDate = new Date(user.updated_at).toLocaleString('zh-TW');
                const statusBadge = user.is_active 
                    ? '<span class="px-2 py-1 bg-green-600 rounded text-xs">å•Ÿç”¨</span>'
                    : '<span class="px-2 py-1 bg-red-600 rounded text-xs">åœç”¨</span>';
                return `
                    <div class="bg-white/10 rounded-lg p-4 border border-white/20">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-2">
                                    <p class="font-semibold text-lg">${user.email}</p>
                                    ${statusBadge}
                                </div>
                                <p class="text-sm text-indigo-200">å»ºç«‹æ™‚é–“: ${createdDate}</p>
                                <p class="text-sm text-indigo-200">æ›´æ–°æ™‚é–“: ${updatedDate}</p>
                                ${user.notes ? `<p class="text-sm text-indigo-200 mt-1">å‚™è¨»: ${user.notes}</p>` : ''}
                            </div>
                            <div class="ml-4 flex gap-2">
                                ${user.is_active 
                                    ? `<button onclick="updateUserStatus('${user.user_id}', false)" 
                                              class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-medium">
                                          <i class="fas fa-ban mr-2"></i>åœç”¨
                                      </button>`
                                    : `<button onclick="updateUserStatus('${user.user_id}', true)" 
                                              class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm font-medium">
                                          <i class="fas fa-check mr-2"></i>å•Ÿç”¨
                                      </button>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        async function approveUser(userId, email) {
            const adminErrorMsg = document.getElementById('admin-error-message');
            const adminSuccessMsg = document.getElementById('admin-success-message');
            
            adminErrorMsg?.classList.add('hidden');
            adminSuccessMsg?.classList.add('hidden');
            
            try {
                await callAdminFunction('approve_user', { user_id: userId, email });
                adminSuccessMsg.textContent = `å·²æˆåŠŸå¯©æ ¸é€šé ${email}`;
                adminSuccessMsg.classList.remove('hidden');
                loadAdminData();
            } catch (error) {
                adminErrorMsg.textContent = `å¯©æ ¸å¤±æ•—: ${error.message}`;
                adminErrorMsg.classList.remove('hidden');
            }
        }
        
        async function updateUserStatus(userId, isActive) {
            const adminErrorMsg = document.getElementById('admin-error-message');
            const adminSuccessMsg = document.getElementById('admin-success-message');
            
            adminErrorMsg?.classList.add('hidden');
            adminSuccessMsg?.classList.add('hidden');
            
            try {
                await callAdminFunction('update_user_status', { user_id: userId, is_active: isActive });
                adminSuccessMsg.textContent = `å·²æˆåŠŸ${isActive ? 'å•Ÿç”¨' : 'åœç”¨'}ç”¨æˆ¶`;
                adminSuccessMsg.classList.remove('hidden');
                loadAdminData();
            } catch (error) {
                adminErrorMsg.textContent = `æ›´æ–°å¤±æ•—: ${error.message}`;
                adminErrorMsg.classList.remove('hidden');
            }
        }
        
        // Make functions globally accessible for onclick handlers
        window.approveUser = approveUser;
        window.updateUserStatus = updateUserStatus;

        async function generateLesson() {
            setLoading(generateLessonBtn, true);
            errorMessage.classList.add('hidden');
            lessonContainer.classList.add('hidden');
            currentLesson = null;
            explanationAudioBlobs = {};
            
            try {
                const age = document.querySelector('input[name="age"]:checked').value;
                const subject = document.querySelector('input[name="subject"]:checked').value;
                const lessonType = document.querySelector('input[name="lesson-type"]:checked').value;
                currentLessonType = lessonType;
                const topicValue = topicSelect.value;
                let topic = topicValue;
                if (topicValue === '__custom__') {
                    const customValue = customTopicInput?.value.trim();
                    if (!customValue) {
                        throw new Error(getCustomTopicErrorText());
                    }
                    topic = customValue;
                }
                const langName = new Intl.DisplayNames(['en'], {type: 'language'}).of(subject.toLowerCase().includes('english') ? 'en' : currentLang);
                
                const systemPrompt = `You are an expert curriculum designer. Your task is to generate a mini-lesson as a single, valid JSON object. The lesson is for a ${age} old student, the format is "${lessonType}". All property names in the JSON must be enclosed in double quotes. Output ONLY the JSON object.`;
                const userPrompt = `Generate a mini-lesson about "${topic}" in the subject of ${subject}. The main learning language for this lesson is ${langName}.
The lesson must include:
1.  An "explanation" paragraph about the topic, tailored to the lesson type "${lessonType}". **This explanation must be detailed and between 500 and 600 words.** Provide this explanation in an object with four language versions: Traditional Chinese (ç¹é«”ä¸­æ–‡), English, Vietnamese (Tiáº¿ng Viá»‡t), and Japanese (æ—¥æœ¬èª).
2.  If the lesson type is NOT "AIæå•", include a list of 5-7 core "vocabulary" words. The "word" field must be in the main learning language (${langName}). For each word:
    a. Provide its "translation" in an object with all four languages (zh-Hant, en, vi, ja).
    b. Provide an IPA "phonetic" transcription as a single string.
    c. Provide a simple "example_sentence" as an object with all four languages (zh-Hant, en, vi, ja).
3.  If the lesson type is NOT "AIæå•", include a list of 3-4 simple, practical "phrases". The "phrase" field must be in the main learning language (${langName}). For each phrase, provide its "translation" in an object with all four languages.
4.  An "image_prompt" for an image generation model to create a colorful, friendly, cartoon-style illustration for this lesson.

Output ONLY a single, valid JSON object in the following format. Omit "vocabulary" and "phrases" keys if the lesson type is "AIæå•". Ensure all property names are double-quoted.
{
  "explanation": { "zh-Hant": "...", "en": "...", "vi": "...", "ja": "..." },
  "vocabulary": [
    { "word": "...", "phonetic": "...", "example_sentence": { "zh-Hant": "...", "en": "...", "vi": "...", "ja": "..." }, "translation": { "zh-Hant": "...", "en": "...", "vi": "...", "ja": "..." } }
  ],
  "phrases": [
    { "phrase": "...", "translation": { "zh-Hant": "...", "en": "...", "vi": "...", "ja": "..." } }
  ],
  "image_prompt": "..."
}`;

                const rawJsonResponse = await callGeminiAPI(userPrompt, systemPrompt);
                let cleanedJson = rawJsonResponse.replace(/```json/g, '').replace(/```/g, '').trim();
                const firstBrace = cleanedJson.indexOf('{');
                const lastBrace = cleanedJson.lastIndexOf('}');
                if (firstBrace !== -1 && lastBrace > firstBrace) {
                    cleanedJson = cleanedJson.substring(firstBrace, lastBrace + 1);
                }
                
                // Attempt to parse the cleaned JSON
                 try {
                     currentLesson = JSON.parse(cleanedJson);
                 } catch (parseError) {
                     console.error("Failed to parse JSON:", parseError, "Raw response:", rawJsonResponse, "Cleaned JSON:", cleanedJson);
                     throw new Error(`Invalid JSON received from API: ${parseError.message}`);
                 }


                if (currentLesson.image_prompt) {
                    currentLesson.imageUrl = await callImagenAPI(currentLesson.image_prompt);
                }
                
                currentLesson.selectedTopicName = topic;
                renderLesson();
                lessonContainer.classList.remove('hidden');
                
                // Save lesson to history
                if (isAuthenticated) {
                    saveLessonToHistory({
                        lesson_type: lessonType,
                        subject: subject,
                        topic: topic,
                        age_group: age,
                        content: currentLesson
                    });
                }

            } catch (error) {
                console.error("Lesson Generation Error:", error);
                displayError(errorMessage, translations[currentLang].lessonError.replace('{message}', error.message));
            } finally {
                setLoading(generateLessonBtn, false);
            }
        }

        function renderTutoringVocabulary(items) {
            if (!tutoringVocabCard || !tutoringVocabContainer) return;
            if (!Array.isArray(items) || items.length === 0) {
                tutoringVocabContainer.innerHTML = '';
                tutoringVocabCard.classList.add('hidden');
                return;
            }
            const phoneticLabel = translations[currentLang]?.phoneticLabel || 'Phonetic';
            const exampleLabel = translations[currentLang]?.exampleLabel || 'Example';
            tutoringVocabContainer.innerHTML = items.map((item, index) => {
                const wordText = typeof item?.word === 'string' && item.word.trim() ? item.word.trim() : `Word ${index + 1}`;
                const meaningText = typeof item?.meaning === 'string' ? item.meaning.trim() : '';
                const phoneticText = typeof item?.phonetic === 'string' ? item.phonetic.trim() : '';
                const exampleText = typeof item?.example === 'string' ? item.example.trim() : '';
                const wordSpeechAttr = encodeForDataAttr(wordText);
                const exampleSpeechAttr = exampleText ? encodeForDataAttr(exampleText) : '';
                const wordButton = wordSpeechAttr ? `
                            <button class="play-audio-btn flex-shrink-0" data-text-to-speak="${wordSpeechAttr}" title="Play word audio" aria-label="Play word audio">
                                <i class="fas fa-play"></i>
                                <div class="audio-loader"></div>
                            </button>` : '';
                const exampleButton = exampleSpeechAttr ? `
                            <button class="play-audio-btn flex-shrink-0" data-text-to-speak="${exampleSpeechAttr}" title="Play example audio" aria-label="Play example audio">
                                <i class="fas fa-play"></i>
                                <div class="audio-loader"></div>
                            </button>` : '';
                return `
                    <div class="p-4 bg-white/10 rounded-lg flex flex-col gap-4 md:flex-row md:items-start">
                        <div class="flex-1">
                            <p class="font-bold text-lg text-yellow-300">${wordText}</p>
                            ${phoneticText ? `<p class="text-sm text-cyan-300">${phoneticLabel}: ${phoneticText}</p>` : ''}
                            ${meaningText ? `<p class="text-sm mt-1 text-white/90">${meaningText}</p>` : ''}
                            ${exampleText ? `<p class="text-sm italic mt-2 text-indigo-200">"${exampleLabel}: ${exampleText}"</p>` : ''}
                        </div>
                        <div class="flex flex-wrap gap-3">
                            ${wordButton}
                            ${exampleButton}
                        </div>
                    </div>
                `;
            }).join('');
            tutoringVocabCard.classList.remove('hidden');
        }

        async function analyzeHomework() {
             setLoading(analyzeHomeworkBtn, true);
             tutoringErrorMessage.classList.add('hidden');
             tutoringResultsView.classList.add('hidden');

             try {
                 if (!tutoringFiles.length) {
                     const noFileMessage = translations[currentLang]?.tutoring?.noFileError || translations['en']?.tutoring?.noFileError || 'Please upload at least one file first.';
                     throw new Error(noFileMessage);
                 }
                 const primaryFile = tutoringFiles[0];
                 const fileCount = tutoringFiles.length;
                 const base64Image = await base64FromFile(primaryFile);
                 const level = tutoringLevelSelect.value;
                 let subject = tutoringSubjectSelect.value;
                 if (subject === 'Other' || subject === 'å…¶ä»–' || subject === 'KhÃ¡c' || subject === 'ãã®ä»–') {
                     subject = tutoringCustomSubjectInput.value || 'Custom';
                 }
                 const language = tutoringLanguageSelect.options[tutoringLanguageSelect.selectedIndex].text;
                 
                 // Log user behavior
                 await logUserBehavior('tutoring_used', {
                     level: level,
                     subject: subject,
                     language: language,
                     file_count: fileCount,
                 });

                 const systemPrompt = `You are an AI tutor analyzing homework. Output a valid JSON object. All property names must be double-quoted. Output ONLY the JSON object.`;
                 const prompt = `Analyze this homework image${fileCount > 1 ? ` (1st of ${fileCount} uploaded files)` : ''}. The student's level is ${level}, the subject is ${subject}. Provide all text in ${language}.
1. Identify the key concepts being tested in the homework.
2. Provide a step-by-step analysis for each distinct problem you can see.
3. Extract exactly six high-impact vocabulary words that appear in, or are essential to, the assignment. For each vocabulary entry, include:
   - "word": the vocabulary term in ${language}
   - "meaning": a short definition or translation in ${language}
   - "phonetic": an IPA (or syllable-style) pronunciation guide
   - "example": a simple example sentence using the word in ${language}
If fewer than six suitable words exist, include as many as possible.

Return ONLY a valid JSON object with the following shape:
{
    "keyConcepts": ["concept1", "concept2"],
    "problemAnalysis": [
        { "problem": "Description of problem 1", "solution": "Step-by-step solution for problem 1", "feedback": "Specific feedback for problem 1" }
    ],
    "vocabulary": [
        { "word": "term", "meaning": "short meaning", "phonetic": "IPA", "example": "example sentence" }
    ]
}`;
                const rawJsonResponse = await callGeminiAPI(prompt, systemPrompt, base64Image);
                let cleanedJson = rawJsonResponse.replace(/```json/g, '').replace(/```/g, '').trim();
                const firstBrace = cleanedJson.indexOf('{');
                const lastBrace = cleanedJson.lastIndexOf('}');
                if (firstBrace !== -1 && lastBrace > firstBrace) {
                    cleanedJson = cleanedJson.substring(firstBrace, lastBrace + 1);
                }
                 let results;
                 try {
                    results = JSON.parse(cleanedJson);
                 } catch (parseError) {
                     console.error("Failed to parse homework JSON:", parseError, "Raw response:", rawJsonResponse, "Cleaned JSON:", cleanedJson);
                     throw new Error(`Invalid JSON received from API: ${parseError.message}`);
                 }
                const keyConcepts = Array.isArray(results.keyConcepts) ? results.keyConcepts : [];
                const problemAnalysis = Array.isArray(results.problemAnalysis) ? results.problemAnalysis : [];
                const vocabularyItems = Array.isArray(results.vocabulary) ? results.vocabulary.slice(0, 6) : [];

                const keyConceptsHtml = keyConcepts
                    .map(concept => (typeof concept === 'string' ? concept.trim() : ''))
                    .filter(Boolean)
                    .map(concept => {
                        const speechAttr = encodeForDataAttr(concept);
                        const buttonHtml = speechAttr ? `
                        <button class="play-audio-btn flex-shrink-0" data-text-to-speak="${speechAttr}">
                            <i class="fas fa-play"></i>
                            <div class="audio-loader"></div>
                        </button>` : '';
                        return `
                    <div class="p-3 bg-white/10 rounded-lg flex justify-between items-center gap-3">
                        <span>${concept}</span>
                        ${buttonHtml}
                    </div>`;
                    }).join('');
                keyConceptsContainer.innerHTML = keyConceptsHtml;

                const problemAnalysisHtml = problemAnalysis.map((prob, index) => {
                    const problemTitle = typeof prob?.problem === 'string' && prob.problem.trim() ? prob.problem.trim() : `Problem ${index + 1}`;
                    const solutionText = typeof prob?.solution === 'string' ? prob.solution : '';
                    const feedbackText = typeof prob?.feedback === 'string' ? prob.feedback : '';
                    const speechParts = [problemTitle, solutionText, feedbackText].map(normalizeSpeechText).filter(Boolean);
                    const speechAttr = speechParts.length ? encodeForDataAttr(speechParts.join('. ')) : '';
                    const solutionHtml = solutionText ? `<p class="mt-2 whitespace-pre-wrap">${solutionText}</p>` : '';
                    const feedbackHtml = feedbackText ? `<p class="mt-2 text-sm italic text-indigo-200">${feedbackText}</p>` : '';
                    const buttonHtml = speechAttr ? `
                             <button class="play-audio-btn flex-shrink-0 ml-4" data-text-to-speak="${speechAttr}">
                                 <i class="fas fa-play"></i>
                                 <div class="audio-loader"></div>
                             </button>` : '';
                    return `
                    <div class="p-4 bg-white/10 rounded-lg">
                        <div class="flex justify-between items-start gap-4">
                             <div>
                                <h4 class="font-bold text-yellow-300">${problemTitle}</h4>
                                ${solutionHtml}
                                ${feedbackHtml}
                             </div>
                             ${buttonHtml}
                        </div>
                    </div>`;
                }).join('');
                problemAnalysisContainer.innerHTML = problemAnalysisHtml;

                renderTutoringVocabulary(vocabularyItems);
                tutoringResultsView.classList.remove('hidden');
                
                // Save tutoring session to history
                if (isAuthenticated) {
                    saveTutoringToHistory({
                        level: level,
                        subject: subject,
                        language: language,
                        analysis_content: results,
                        file_urls: tutoringFiles.map(f => f.name)
                    });
                }

            } catch (error) {
                console.error("Homework Analysis Error:", error);
                 displayError(tutoringErrorMessage, `Analysis failed: ${error.message}`);
             } finally {
                 setLoading(analyzeHomeworkBtn, false);
             }
        }

        async function generateStory() {
            setLoading(generateStoryBtn, true);
            storybookErrorMessage.classList.add('hidden');
            storyOutputContainer.classList.add('hidden');
            audioControls.classList.add('hidden');
            if (storyAudioUrl) URL.revokeObjectURL(storyAudioUrl);
            storyAudioBlob = null;
            storyAudioUrl = null;

            try {
                if (!storybookFiles.length) {
                    const noImageMessage = translations[currentLang]?.storybook?.noImageError || translations['en']?.storybook?.noImageError || 'Please upload at least one illustration first.';
                    throw new Error(noImageMessage);
                }
                
                const base64Image = await base64FromFile(storybookFiles[0]);
                const lang = storybookLanguageSelect.options[storybookLanguageSelect.selectedIndex].text;
                const age = storybookAgeSelect.value;
                const style = document.querySelector('input[name="style"]:checked').value;
                const charName = document.getElementById('storybook-char-name').value;
                
                const prompt = `Based on this image, write a ${style} children's story suitable for a ${age} old child. The story should be in ${lang}. ${charName ? `The main character's name is ${charName}.` : ''} **The story must be detailed and between 500 and 600 words.**`;
                
                const storyText = await callGeminiAPI(prompt, "", base64Image);
                storyDisplayContainer.textContent = storyText;
                storyOutputContainer.classList.remove('hidden');

                const audioBlob = await callTTSAPI(storyText, playStoryBtn);
                storyAudioBlob = audioBlob;
                storyAudioUrl = URL.createObjectURL(audioBlob);
                audioControls.classList.remove('hidden');
                playStoryBtn.disabled = false;
                
                // Save story to history
                if (isAuthenticated) {
                    saveStoryToHistory({
                        story_text: storyText,
                        language: lang,
                        age_group: age,
                        style: style,
                        character_name: charName || null,
                        image_urls: Array.from(storybookFiles).map(f => f.name),
                        audio_url: storyAudioUrl
                    });
                }

            } catch (error) {
                console.error("Story Generation Error:", error);
                displayError(storybookErrorMessage, `Story generation failed: ${error.message}`);
            } finally {
                setLoading(generateStoryBtn, false);
            }
        }
        
        async function getAdviceOrDiagnosis(isDoctor, followUpText = null) {
            const chatHistory = isDoctor ? aiDoctorChatHistory : aiTutorChatHistory;
            const responseContainer = isDoctor ? aiDoctorResponseContainer : aiTutorResponseContainer;
            const inputEl = isDoctor ? aiDoctorInput : aiTutorInput;
            const expertGroup = isDoctor ? aiDoctorExpertGroup : aiTutorExpertGroup;
            const button = isDoctor ? getDiagnosisBtn : getAdviceBtn;
            const errorEl = isDoctor ? aiDoctorErrorMessage : aiTutorErrorMessage;

            const userInput = followUpText || inputEl.value.trim();
            if (!userInput) return;

            const selectedExpertEl = expertGroup.querySelector('.expert-card.selected');
             // Use chat history's last expert if available (for follow-ups)
            const lastExpertId = chatHistory.length > 0 ? chatHistory[chatHistory.length - 1].expertId : null;
            const currentExpertId = selectedExpertEl ? selectedExpertEl.dataset.expertId : lastExpertId;

            if (!currentExpertId) {
                displayError(errorEl, "Please select an expert.");
                return;
            }
            
            setLoading(button, true);
            errorEl.classList.add('hidden');
            responseContainer.classList.remove('hidden');
            
            responseContainer.querySelector('#follow-up-section')?.remove();
            responseContainer.innerHTML += `<div class="flex justify-end mb-4"><div class="chat-bubble user p-3">${userInput}</div></div>`;
            if (!followUpText) inputEl.value = "";
            
            const loadingBubble = document.createElement('div');
            loadingBubble.className = "flex justify-start mb-4";
            loadingBubble.innerHTML = `<div class="chat-bubble bot p-3 flex justify-center items-center"><div class="loader" style="border-color: #9ca3af; border-bottom-color: transparent;"></div></div>`;
            responseContainer.appendChild(loadingBubble);
            responseContainer.scrollTop = responseContainer.scrollHeight;

            try {
                const expertData = isDoctor ? aiDoctorsData[currentExpertId] : aiExpertsData[currentExpertId];
                
                const isFirstTurn = chatHistory.length === 0;
                let base64Image = null;
                if (isDoctor && aiDoctorFiles.length && isFirstTurn) {
                    base64Image = await base64FromFile(aiDoctorFiles[0]);
                }
                
                chatHistory.push({ role: 'user', text: userInput, expertId: currentExpertId }); // Store expertId with the turn
                const fullPrompt = chatHistory.map(turn => `${turn.role}: ${turn.text}`).join('\n');
                
                const rawJsonResponse = await callGeminiAPI(fullPrompt, expertData.systemPrompt, base64Image);
                let cleanedJson = rawJsonResponse.replace(/```json/g, '').replace(/```/g, '').trim();
                const firstBrace = cleanedJson.indexOf('{');
                const lastBrace = cleanedJson.lastIndexOf('}');
                if (firstBrace !== -1 && lastBrace > firstBrace) {
                    cleanedJson = cleanedJson.substring(firstBrace, lastBrace + 1);
                }
                let responseData;
                 try {
                    responseData = JSON.parse(cleanedJson);
                 } catch (parseError) {
                     console.error("Failed to parse chat JSON:", parseError, "Raw response:", rawJsonResponse, "Cleaned JSON:", cleanedJson);
                     throw new Error(`Invalid JSON received from API: ${parseError.message}`);
                 }


                const formattedAdvice = simpleMarkdownParse(responseData.advice);
                chatHistory.push({ role: 'model', text: responseData.advice, expertId: currentExpertId }); // Store expertId with the turn

                loadingBubble.outerHTML = `<div class="flex justify-start mb-4"><div class="chat-bubble bot p-4 prose prose-sm max-w-none text-slate-800">${formattedAdvice}</div></div>`;

                const followUpQuestions = responseData.followUpQuestions;
                if (followUpQuestions && followUpQuestions.length > 0) {
                    const expertName = expertData.name[currentLang] || expertData.name['en'];
                    const followUpHTML = `
                        <div id="follow-up-section" class="mt-6">
                            <div class="chat-bubble bot summary p-4 space-y-3">
                                <h4 class="font-bold flex items-center gap-2 text-lg" style="color: ${expertData.color};">
                                    <i class="fas fa-question-circle opacity-80"></i>
                                    <span>${translations[currentLang].aiTutor.summaryTitle.replace('{expertName}', expertName)}</span>
                                </h4>
                                ${followUpQuestions.map(q => `<button class="suggested-question-btn w-full text-left p-2 bg-white/60 hover:bg-white rounded-md transition text-slate-800">${q}</button>`).join('')}
                            </div>
                            <div class="mt-4 relative">
                                <input type="text" class="follow-up-input w-full p-3 pr-16 bg-white/20 border border-white/30 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white placeholder-gray-300" placeholder="${translations[currentLang].aiTutor.followupPlaceholder}">
                                <button class="send-follow-up-btn absolute right-2 top-1/2 -translate-y-1/2 bg-emerald-500 text-white rounded-md h-8 w-10 flex items-center justify-center hover:bg-emerald-600">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>`;
                    responseContainer.insertAdjacentHTML('beforeend', followUpHTML);
                }

                responseContainer.scrollTop = responseContainer.scrollHeight;

            } catch (error) {
                 console.error("Chat Error:", error);
                 loadingBubble.remove();
                 displayError(errorEl, `Failed to get response: ${error.message}`);
            } finally {
                setLoading(button, false);
            }
        }

        async function playAudio(e) {
            const button = e.target.closest('.play-audio-btn');
            if (!button) return;
            const textToSpeak = button.dataset.textToSpeak;
            if (!textToSpeak) return;

            const errorDisplay = getAudioErrorDisplay(button);
            errorDisplay.classList.add('hidden');

            const audioKey = getAudioButtonKey(button);
            const cached = generatedAudioCache.get(audioKey);
            const isLessonAudio = Boolean(button.closest('#platform-view'));
            const speechProfile = isLessonAudio
                ? getLessonSpeechProfile(button.dataset.lessonLang || getActiveLessonLanguage())
                : null;

            const handlePlaybackError = (playError) => {
                console.error("Audio playback error:", playError);
                displayError(errorDisplay, `Audio playback failed: ${playError.message}`);
            };

            try {
                if (cached) {
                    playAudioBlob(cached.blob, speechProfile, handlePlaybackError);
                    showDownloadButton(button);
                    return;
                }
                const audioBlob = await callTTSAPI(textToSpeak, button, { speechProfile });
                cacheGeneratedAudio(audioKey, audioBlob);
                playAudioBlob(audioBlob, speechProfile, handlePlaybackError);
                showDownloadButton(button);
            } catch (error) {
                console.error("Audio playback error:", error);
                displayError(errorDisplay, `Audio Error: ${error.message}`);
            }
        }

        // --- Translation & UI Update Functions ---
        function setLanguage(lang) {
            const previousLang = currentLang;
            currentLang = lang;
            document.documentElement.lang = lang;
            
            // Log language change behavior
            if (previousLang && previousLang !== lang && isAuthenticated) {
                logUserBehavior('language_changed', {
                    from_language: previousLang,
                    to_language: lang,
                });
            }
            
            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.dataset.translateKey;
                const keys = key.split('.');
                let translation = translations[lang];
                try {
                    for (const k of keys) {
                        translation = translation[k];
                    }
                } catch (e) {
                    translation = undefined;
                }
                
                if (typeof translation === 'string') {
                     if (el.tagName === 'TEXTAREA' || el.tagName === 'INPUT') {
                        el.placeholder = translation;
                     } else if (el.dataset.placeholderKey) {
                        // Special handling for contenteditable placeholder
                        // Only set if currently empty or showing a known placeholder
                        const currentPlaceholder = el.getAttribute('data-placeholder-key');
                        const isEmpty = el.textContent.trim() === '';
                        const isShowingPlaceholder = Object.values(translations).some(t => 
                            (t.storybook && t.storybook.storyPlaceholder === currentPlaceholder) ||
                            (t.aiTutor && t.aiTutor.inputPlaceholder === currentPlaceholder) || // Add other placeholders if needed
                            (t.aiDoctor && t.aiDoctor.symptomPlaceholder === currentPlaceholder) 
                        );

                        if (isEmpty || isShowingPlaceholder) {
                           el.setAttribute('data-placeholder-key', translation);
                        }
                     } else {
                        // Check if it's a button text span
                        if (el.classList.contains('btn-text')) {
                            el.textContent = translation;
                        } else {
                           el.innerHTML = translation; // Use innerHTML for potential markdown/bolding in titles etc.
                        }
                     }
                } else if (typeof translation === 'object' && el.id === 'lesson-type-group') {
                    // Handle radio button group labels specifically
                    Object.entries(translation).forEach(([key, value]) => {
                        const label = el.querySelector(`label[for="type-${key}"]`);
                        if (label) label.textContent = value;
                    });
                } else if (typeof translation === 'object' && el.id === 'storybook-style-group') {
                    // Handle storybook style labels
                     Object.entries(translations[lang].storybook).forEach(([key, value]) => {
                        if (key.startsWith('style')) {
                            const styleKey = key.replace('style','').toLowerCase();
                            const label = el.querySelector(`label[for="style-${styleKey}"]`);
                            if(label) label.textContent = value;
                        }
                     });
                }
            });

            updateAllSelectOptions();
            updateTopicSelection(subjectGroup.querySelector('input[name="subject"]:checked').value);
            renderExpertCards(); 
            renderDoctorCards();
            renderTutorCategories();
            populateDebateSelects();
            renderDebateModules();
            updateStorybookSummary(storybookFiles.length);
            updateTutoringSummary(tutoringFiles.length);
            updateDoctorSummary(aiDoctorFiles.length);
            if (generateStoryBtn) generateStoryBtn.disabled = storybookFiles.length === 0;
            if (analyzeHomeworkBtn) analyzeHomeworkBtn.disabled = tutoringFiles.length === 0;
            if (fileNameDisplay) {
                if (tutoringFiles.length > 0) {
                    fileNameDisplay.textContent = tutoringFiles.map(file => file.name).join(', ');
                } else {
                    const noFile = translations[currentLang]?.tutoring?.noFileSelected || translations['en']?.tutoring?.noFileSelected || 'No file selected';
                    fileNameDisplay.textContent = noFile;
                }
            }
            syncCustomTopicOptionLabel();

            if (currentLesson) {
                renderLesson();
            }
             // Ensure button texts are updated correctly
            document.querySelectorAll('button[data-translate-key]').forEach(btn => {
                const key = btn.dataset.translateKey;
                const keys = key.split('.');
                let translation = translations[lang];
                 try { for (const k of keys) { translation = translation[k]; } } catch(e){ translation = undefined; }
                 if(typeof translation === 'string') {
                     const textSpan = btn.querySelector('.btn-text');
                     if (textSpan) { textSpan.textContent = translation; } else { btn.textContent = translation;}
                 }
            });
             // Ensure select labels are updated correctly
             document.querySelectorAll('label[data-translate-key]').forEach(lbl => {
                 const key = lbl.dataset.translateKey;
                 const keys = key.split('.');
                 let translation = translations[lang];
                 try { for (const k of keys) { translation = translation[k]; } } catch(e){ translation = undefined; }
                 if(typeof translation === 'string') { lbl.textContent = translation; }
             });
        }

        function getLocalizedText(entry) {
            if (!entry) return '';
            if (typeof entry === 'string') return entry;
            return entry[currentLang] || entry['en'] || Object.values(entry)[0] || '';
        }

        function getDebateTranslation(path) {
            const segments = path.split('.');
            let node = translations[currentLang]?.debateCoach;
            let fallbackNode = translations['en']?.debateCoach;
            for (const segment of segments) {
                node = node?.[segment];
                fallbackNode = fallbackNode?.[segment];
            }
            return typeof node === 'string' ? node : (typeof fallbackNode === 'string' ? fallbackNode : '');
        }

        function getStorybookSelectedText(count) {
            const template = translations[currentLang]?.storybook?.selectedCount || translations['en']?.storybook?.selectedCount || 'Selected {count} file(s)';
            return template.replace('{count}', count);
        }

        function getCustomTopicOptionText() {
            return translations[currentLang]?.topicCustomOption || translations['en']?.topicCustomOption || 'Custom topic';
        }

        function getCustomTopicErrorText() {
            return translations[currentLang]?.topicCustomError || translations['en']?.topicCustomError || 'Please enter your custom topic.';
        }

        function updateStorybookSummary(count) {
            if (!storybookFileSummary) return;
            if (count > 0) {
                storybookFileSummary.textContent = getStorybookSelectedText(count);
                storybookFileSummary.classList.remove('hidden');
            } else {
                storybookFileSummary.textContent = '';
                storybookFileSummary.classList.add('hidden');
            }
        }

        function getTutoringSelectedText(count) {
            const template = translations[currentLang]?.tutoring?.selectedCount || translations['en']?.tutoring?.selectedCount || 'Selected {count} file(s)';
            return template.replace('{count}', count);
        }

        function updateTutoringSummary(count) {
            if (!tutoringFileSummary) return;
            if (count > 0) {
                tutoringFileSummary.textContent = getTutoringSelectedText(count);
                tutoringFileSummary.classList.remove('hidden');
            } else {
                tutoringFileSummary.textContent = '';
                tutoringFileSummary.classList.add('hidden');
            }
        }

        function getDoctorSelectedText(count) {
            const template = translations[currentLang]?.aiDoctor?.selectedCount || translations['en']?.aiDoctor?.selectedCount || 'Selected {count} photo(s)';
            return template.replace('{count}', count);
        }

        function updateDoctorSummary(count) {
            if (!aiDoctorFileSummary) return;
            if (count > 0) {
                aiDoctorFileSummary.textContent = getDoctorSelectedText(count);
                aiDoctorFileSummary.classList.remove('hidden');
            } else {
                aiDoctorFileSummary.textContent = '';
                aiDoctorFileSummary.classList.add('hidden');
            }
        }

        function updateAllSelectOptions() {
             const langKey = currentLang;
             // Tutoring Levels
             tutoringLevelSelect.innerHTML = (tutoring_levels[langKey] || tutoring_levels['en']).map(level => `<option class="text-black">${level}</option>`).join('');
             // Tutoring Subjects
             tutoringSubjectSelect.innerHTML = (tutoring_subjects[langKey] || tutoring_subjects['en']).map(subject => `<option class="text-black">${subject}</option>`).join('');
             // Tutoring/Storybook languages
             const langOptions = Object.keys(translations).map(key => {
                const langName = new Intl.DisplayNames([langKey], {type: 'language'}).of(key) || key; // Use current lang for display name
                return `<option class="text-black" value="${key}">${langName.charAt(0).toUpperCase() + langName.slice(1)}</option>`
             }).join('');
             tutoringLanguageSelect.innerHTML = langOptions;
             storybookLanguageSelect.innerHTML = langOptions;
             tutoringLanguageSelect.value = currentLang; // Default to current app language
             storybookLanguageSelect.value = currentLang; // Default to current app language
             // Storybook Ages
            storybookAgeSelect.innerHTML = (storybook_ages[langKey] || storybook_ages['en']).map(age => `<option class="text-black" value="${age}">${age}</option>`).join('');
        }

        function syncCustomTopicOptionLabel() {
            const customOption = topicSelect.querySelector('option[value="__custom__"]');
            if (customOption) {
                const customValue = customTopicInput?.value.trim();
                customOption.textContent = customValue ? `${getCustomTopicOptionText()} (${customValue})` : getCustomTopicOptionText();
            }
        }

        function updateCustomTopicUI() {
            if (!customTopicWrapper) return;
            const subject = subjectGroup.querySelector('input[name="subject"]:checked')?.value;
            const allowCustom = allowsCustomTopic(subject);
            const isCustomSelected = topicSelect.value === '__custom__';
            syncCustomTopicOptionLabel();
            customTopicWrapper.classList.toggle('hidden', !(allowCustom && isCustomSelected));
        }

        function allowsCustomTopic(subject) {
            return subject === 'KidsEnglish' || subject === 'AdultEnglish';
        }

        function updateTopicSelection(subject) {
            const topicsMap = translations[currentLang].topics || translations['en'].topics;
            const topics = topicsMap[subject] || [];
            const previousValue = topicSelect.value;
            const includeCustom = allowsCustomTopic(subject);
            const options = [...topics];
            topicSelect.innerHTML = options.map(topic => `<option class="text-black">${topic}</option>`).join('') + (includeCustom ? `<option class="text-black" value="__custom__">${getCustomTopicOptionText()}</option>` : '');

            if (includeCustom && previousValue === '__custom__') {
                topicSelect.value = '__custom__';
            } else if (options.includes(previousValue)) {
                topicSelect.value = previousValue;
            } else if (options.length) {
                topicSelect.value = options[0];
            } else if (includeCustom) {
                topicSelect.value = '__custom__';
            }
            updateCustomTopicUI();
        }

        function renderExpertCards() {
            const selectedId = aiTutorExpertGroup.querySelector('.expert-card.selected')?.dataset.expertId;
            aiTutorExpertGroup.innerHTML = Object.values(aiExpertsData).map(expert => `
                <div class="expert-card bg-white/20 p-4 rounded-lg flex items-center space-x-4 ${expert.id === selectedId ? 'selected' : ''}" data-expert-id="${expert.id}">
                    <div class="text-3xl bg-white/20 p-3 rounded-full">${expert.icon}</div>
                    <div>
                        <h4 class="font-bold text-white">${expert.name[currentLang] || expert.name['en']}</h4>
                        <p class="text-sm text-indigo-200">${expert.description[currentLang] || expert.description['en']}</p>
                    </div>
                </div>
            `).join('');
        }
        
         function renderDoctorCards() {
            const selectedId = aiDoctorExpertGroup.querySelector('.expert-card.selected')?.dataset.expertId;
            aiDoctorExpertGroup.innerHTML = Object.values(aiDoctorsData).map(expert => `
                <div class="expert-card bg-white/20 p-4 rounded-lg flex items-center space-x-4 ${expert.id === selectedId ? 'selected' : ''}" data-expert-id="${expert.id}">
                    <div class="text-3xl bg-white/20 p-3 rounded-full">${expert.icon}</div>
                    <div>
                        <h4 class="font-bold text-white">${expert.name[currentLang] || expert.name['en']}</h4>
                        <p class="text-sm text-indigo-200">${expert.description[currentLang] || expert.description['en']}</p>
                    </div>
                </div>
            `).join('');
        }
        
        function renderTutorCategories() {
            const categories = (translations[currentLang].aiTutor.categories || translations['en'].aiTutor.categories);
            aiTutorCategoryGroup.innerHTML = Object.entries(categories).map(([key, value]) => `
                <div class="flex items-center">
                    <input id="cat-${key}" type="checkbox" value="${key}" name="tutor-category" class="w-4 h-4 text-yellow-400 bg-gray-100 border-gray-300 rounded focus:ring-yellow-500">
                    <label for="cat-${key}" class="ml-2 text-sm font-medium text-white">${value}</label>
                </div>
            `).join('');
        }

        function pickCustomMotionValue(path, defaultValue = '') {
            const segments = path.split('.');
            let locale = translations[currentLang]?.debateCoach?.customMotion;
            let fallback = translations['en']?.debateCoach?.customMotion;
            for (const segment of segments) {
                locale = locale?.[segment];
                fallback = fallback?.[segment];
            }
            const value = locale !== undefined ? locale : fallback;
            return value !== undefined ? value : defaultValue;
        }

        function getCustomMotionData() {
            const title = debateState.customMotionTitle?.trim() || pickCustomMotionValue('fallbackTitle');
            const buildStructure = () => ({
                claim: pickCustomMotionValue('structure.claim'),
                reason: pickCustomMotionValue('structure.reason'),
                evidence: pickCustomMotionValue('structure.evidence'),
                closing: pickCustomMotionValue('structure.closing')
            });
            const buildSide = () => ({
                beginner: { ...buildStructure() },
                advanced: { ...buildStructure() },
                opponentPoints: [...(pickCustomMotionValue('opponentPoints', []) || [])],
                rebuttalFeedback: {
                    summary: pickCustomMotionValue('rebuttal.summary'),
                    tips: [...(pickCustomMotionValue('rebuttal.tips', []) || [])]
                },
                coachFeedback: {
                    score: pickCustomMotionValue('coach.score'),
                    tips: [...(pickCustomMotionValue('coach.tips', []) || [])]
                }
            });
            const moduleNote = pickCustomMotionValue('moduleNote');
            const customNote = moduleNote || pickCustomMotionValue('note');
            return {
                id: 'custom',
                custom: true,
                title: { [currentLang]: title },
                customNote,
                sides: {
                    pro: buildSide(),
                    con: buildSide()
                },
                questions: [...(pickCustomMotionValue('questions', []) || [])]
            };
        }

        function getCurrentMotion() {
            if (debateState.motionId === 'custom') {
                return getCustomMotionData();
            }
            if (!debateMotions.length) return null;
            let motion = debateMotions.find(m => m.id === debateState.motionId);
            if (!motion) {
                motion = debateMotions[0];
                debateState.motionId = motion.id;
            }
            return motion;
        }

        function getDebateContext() {
            const motion = getCurrentMotion();
            if (!motion) return { motion: null, sideData: null, levelData: null };
            let sideData = motion.sides[debateState.side];
            if (!sideData) {
                debateState.side = 'pro';
                sideData = motion.sides[debateState.side];
                if (debateSideSelect) debateSideSelect.value = debateState.side;
            }
            let levelData = sideData?.[debateState.level];
            if (!levelData) {
                debateState.level = 'beginner';
                levelData = sideData?.[debateState.level];
                if (debateLevelSelect) debateLevelSelect.value = debateState.level;
            }
            return { motion, sideData, levelData };
        }

        function populateDebateSelects() {
            if (!debateMotionSelect || !debateSideSelect || !debateLevelSelect) return;
            const motionOptions = debateMotions.map(motion => `
                <option value="${motion.id}">${getLocalizedText(motion.title)}</option>
            `).join('');
            const customOption = `<option value="custom">${getDebateTranslation('customMotion.option')}</option>`;
            debateMotionSelect.innerHTML = motionOptions + customOption;
            if (!debateMotions.some(m => m.id === debateState.motionId) && debateMotions.length) {
                debateState.motionId = debateMotions[0].id;
            }
            debateMotionSelect.value = debateState.motionId;

            debateSideSelect.innerHTML = `
                <option value="pro">${getDebateTranslation('sidePro')}</option>
                <option value="con">${getDebateTranslation('sideCon')}</option>
            `;
            if (!['pro', 'con'].includes(debateState.side)) debateState.side = 'pro';
            debateSideSelect.value = debateState.side;

            debateLevelSelect.innerHTML = `
                <option value="beginner">${getDebateTranslation('levelBeginner')}</option>
                <option value="advanced">${getDebateTranslation('levelAdvanced')}</option>
            `;
            if (!['beginner', 'advanced'].includes(debateState.level)) debateState.level = 'beginner';
            debateLevelSelect.value = debateState.level;
            syncCustomMotionUI();
        }

        function syncCustomMotionUI() {
            if (!debateCustomMotionWrapper) return;
            const isCustom = debateState.motionId === 'custom';
            debateCustomMotionWrapper.classList.toggle('hidden', !isCustom);
            if (isCustom && debateCustomMotionInput) {
                debateCustomMotionInput.value = debateState.customMotionTitle || '';
            }
        }

        
function renderDebateModules() {
    if (!debateModulesContainer) return;
    const { motion, sideData, levelData } = getDebateContext();
    if (!motion || !sideData || !levelData) {
        debateModulesContainer.innerHTML = '';
        return;
    }

    resetModuleStates();

    const structureRows = ['claim', 'reason', 'evidence', 'closing'].map(key => `
        <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-3 p-3 rounded-lg bg-white/5 border border-white/10">
            <span class="font-semibold text-yellow-200 md:w-28">${getDebateTranslation('structure.' + key)}</span>
            <p class="text-sm text-indigo-100 leading-relaxed">${getLocalizedText(levelData[key])}</p>
        </div>
    `).join('');

    const opponentList = (sideData.opponentPoints || []).map(point => `
        <li class="p-3 bg-white/5 rounded-lg border border-white/10 text-sm text-indigo-100">${getLocalizedText(point)}</li>
    `).join('');

    const questionsHtml = (motion.questions || []).map((question, index) => {
        const secondary = question?.en && currentLang !== 'en' ? `<span class="text-xs text-indigo-300">${question.en}</span>` : '';
        return `
        <label class="flex items-start gap-2 p-3 rounded-lg bg-white/0 hover:bg-white/10 transition-colors border border-transparent hover:border-white/20">
            <input type="checkbox" class="mt-1 h-4 w-4 rounded border-white/40 bg-transparent text-yellow-300 focus:ring-yellow-400" value="${index}">
            <div class="flex flex-col gap-1">
                <div class="flex items-center gap-2">
                    <span class="badge-chip timer hidden" data-selection-badge>#1</span>
                    <span class="text-sm text-indigo-100">${getLocalizedText(question)}</span>
                </div>
                ${secondary}
            </div>
        </label>`;
    }).join('');

    const customNoteHtml = motion.customNote ? `<div class="rounded-lg border border-dashed border-white/20 bg-white/5 p-3 text-sm text-indigo-200">${getLocalizedText(motion.customNote)}</div>` : '';

    const modulesHtml = `
        ${customNoteHtml}
        ${renderCaseModule(structureRows)}
        ${renderRebuttalModule(opponentList)}
        ${renderCrossfireModule(questionsHtml)}
        ${renderFeedbackModule()}
        ${renderOralModule()}
    `;

    debateModulesContainer.innerHTML = modulesHtml;
    ['case','rebuttal','crossfire','feedback','oral'].forEach(key => resetModuleTimer(key));
    updateMotionDisplay();
}

const debateModuleConfigs = {
    case: { duration: 60, recordLabel: 'buttons.recordStart', hasTimer: true, resultRenderer: renderCaseResults },
    rebuttal: { duration: 60, recordLabel: 'buttons.recordRebuttal', hasTimer: true, resultRenderer: renderRebuttalResults },
    crossfire: { duration: 45, recordLabel: 'buttons.recordCrossfire', hasTimer: true, resultRenderer: renderCrossfireResults },
    feedback: { duration: 60, recordLabel: 'buttons.recordFeedback', hasTimer: false, resultRenderer: renderFeedbackResults },
    oral: { duration: 60, recordLabel: 'buttons.recordOral', hasTimer: false, resultRenderer: renderOralResults }
};

const debateMockApi = {
    translateMotion: ({ motionText, fromLang, to = 'en' }) => {
        return {
            en_text: to === 'en' ? motionText : motionText,
            zh_text: motionText
        };
    },
    startRecording: (moduleKey) => ({ recordingId: `${moduleKey}-${Date.now()}` }),
    stopRecording: () => ({ audioBlob: null }),
    transcribeAudio: () => ({
        transcript: 'Mock transcript generated for practice.',
        timestamps: []
    }),
    evaluateDelivery: ({ transcript }) => ({
        wpm: 110 + Math.floor(Math.random() * 40),
        fillerWords: ['um', 'like', 'you know'].map(word => ({ word, count: Math.floor(Math.random() * 3) })).filter(item => item.count > 0),
        pauseStats: { longPauses: Math.floor(Math.random() * 3) }
    }),
    evaluateLogic: () => ({
        peelMissing: ['Point', 'Evidence', 'Example', 'Link'].filter(() => Math.random() > 0.5),
        suggestions: [
            'Add a concrete statistic to quantify the impact.',
            'Close by explaining why your impact outweighs theirs.'
        ]
    }),
    crossfireAnswerCheck: () => ({
        directness: Math.random() > 0.3,
        conciseRewrite: 'Answer the question in one sentence, then add new offense.'
    }),
    oralReadingCoach: () => ({
        mispronunciations: ['stress the second syllable in "renewable"'],
        pacingAdvice: ['Pause for half a beat before the weighing sentence']
    })
};

const RECORDING_STEPS = ['uploading', 'transcribing', 'evaluating'];

function resetModuleStates() {
    Object.keys(debateState.recording).forEach(key => {
        const state = debateState.recording[key];
        if (state?.timerId) {
            clearTimeout(state.timerId);
        }
        debateState.recording[key] = { status: 'idle' };
        debateState.moduleResults[key] = null;
        stopModuleTimer(key);
    });
}

function renderCaseModule(structureRows) {
    return `
    <div class="border border-white/15 rounded-xl overflow-hidden bg-white/5">
        ${moduleHeader('modules.case60s', 'case', 'debate-module-case')}
        <div id="debate-module-case" class="hidden px-4 py-5 space-y-4 border-t border-white/10">
            ${recordingControls('case', 'buttons.recordStart')}
            ${waveformMarkup('case')}
            <div class="space-y-3">
                <h4 class="font-semibold text-white">${getDebateTranslation('structureHeading')}</h4>
                <div class="space-y-3">
                    ${structureRows}
                </div>
            </div>
            <div>
                <label class="text-sm font-semibold text-white block mb-2">${getDebateTranslation('caseNotesLabel')}</label>
                <textarea rows="3" class="w-full bg-white/10 border border-white/20 rounded-lg p-3 text-sm text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 placeholder:text-indigo-200/60" placeholder="${getDebateTranslation('caseNotesPlaceholder')}"></textarea>
            </div>
            ${progressMarkup('case')}
            ${caseResultMarkup()}
        </div>
    </div>`;
}

function renderRebuttalModule(opponentList) {
    return `
    <div class="border border-white/15 rounded-xl overflow-hidden bg-white/5">
        ${moduleHeader('modules.rebuttal', 'rebuttal', 'debate-module-rebuttal')}
        <div id="debate-module-rebuttal" class="hidden px-4 py-5 space-y-4 border-t border-white/10">
            ${recordingControls('rebuttal', 'buttons.recordRebuttal')}
            ${waveformMarkup('rebuttal')}
            <div>
                <h4 class="font-semibold text-white mb-2">${getDebateTranslation('opponentHeading')}</h4>
                <ul class="space-y-2">${opponentList}</ul>
            </div>
            <div>
                <label class="font-semibold text-white block mb-2">${getDebateTranslation('yourResponse')}</label>
                <textarea rows="4" class="w-full bg-white/10 border border-white/20 rounded-lg p-3 text-sm text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 placeholder:text-indigo-200/60" placeholder="${getDebateTranslation('responsePlaceholder')}"></textarea>
            </div>
            ${progressMarkup('rebuttal')}
            ${rebuttalResultMarkup()}
        </div>
    </div>`;
}

function renderCrossfireModule(questionsHtml) {
    return `
    <div class="border border-white/15 rounded-xl overflow-hidden bg-white/5">
        ${moduleHeader('modules.crossfire', 'crossfire', 'debate-module-crossfire')}
        <div id="debate-module-crossfire" class="hidden px-4 py-5 space-y-4 border-t border-white/10">
            ${recordingControls('crossfire', 'buttons.recordCrossfire')}
            ${waveformMarkup('crossfire')}
            <div>
                <h4 class="font-semibold text-white mb-2">${getDebateTranslation('questionsHeading')}</h4>
                <p class="text-sm text-indigo-200 mb-3">${getDebateTranslation('questionsNote')}</p>
                <div class="grid gap-2">${questionsHtml}</div>
            </div>
            <div>
                <label class="font-semibold text-white block mb-2">${getDebateTranslation('responseHeading')}</label>
                <textarea rows="4" class="w-full bg-white/10 border border-white/20 rounded-lg p-3 text-sm text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 placeholder:text-indigo-200/60" placeholder="${getDebateTranslation('responsePlaceholder')}"></textarea>
            </div>
            ${progressMarkup('crossfire')}
            ${crossfireResultMarkup()}
        </div>
    </div>`;
}

function renderFeedbackModule() {
    const audioLabel = getDebateTranslation('feedbackExtras.audioLabel') || getDebateTranslation('buttons.recordFeedback');
    return `
    <div class="border border-white/15 rounded-xl overflow-hidden bg-white/5">
        ${moduleHeader('modules.feedback', 'feedback', 'debate-module-feedback')}
        <div id="debate-module-feedback" class="hidden px-4 py-5 space-y-4 border-t border-white/10">
            <div class="space-y-3">
                <label class="font-semibold text-white block mb-2">${getDebateTranslation('feedbackPrompt')}</label>
                <textarea id="debate-feedback-text" rows="5" class="w-full bg-white/10 border border-white/20 rounded-lg p-3 text-sm text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 placeholder:text-indigo-200/60" placeholder="${getDebateTranslation('feedbackPlaceholder')}"></textarea>
            </div>
            <div class="space-y-2">
                <p class="text-sm text-indigo-200 font-semibold">${audioLabel}</p>
                <div class="flex flex-wrap gap-3">
                    <button type="button" class="px-4 py-2 rounded-lg bg-rose-400 text-slate-900 font-semibold hover:bg-rose-300" data-debate-action="toggle-recording" data-target="feedback" data-record-label="buttons.recordFeedback">${getDebateTranslation('buttons.recordFeedback')}</button>
                    <label class="px-4 py-2 rounded-lg border border-dashed border-white/30 cursor-pointer hover:border-white/60 text-sm text-indigo-100 flex items-center gap-2">
                        <i class="fa-solid fa-upload"></i>
                        <span>Upload audio</span>
                        <input type="file" id="debate-feedback-audio" accept="audio/*" class="hidden">
                    </label>
                    <button type="button" class="px-4 py-2 rounded-lg bg-sky-400 text-slate-900 font-semibold hover:bg-sky-300" data-debate-action="feedback-text-eval">${getDebateTranslation('buttons.feedbackEvaluate') || getDebateTranslation('feedbackBtn')}</button>
                    <button type="button" class="px-4 py-2 rounded-lg bg-indigo-500/40 border border-indigo-300/40 text-sm text-indigo-100 hover:bg-indigo-500/60" data-debate-action="toggle-reference">${getDebateTranslation('feedbackExtras.referenceToggle')}</button>
                </div>
            </div>
            ${waveformMarkup('feedback')}
            ${progressMarkup('feedback')}
            ${feedbackResultMarkup()}
            <div id="debate-reference-script" class="hidden bg-white/5 border border-dashed border-white/20 rounded-lg p-4">
                <p class="text-sm text-indigo-200 mb-2">${getDebateTranslation('feedbackExtras.referenceHint')}</p>
                <p class="text-sm text-white" data-reference-script></p>
            </div>
        </div>
    </div>`;
}

function renderOralModule() {
    const oral = getDebateTranslation('oral.title') || 'Oral Training';
    return `
    <div class="border border-white/15 rounded-xl overflow-hidden bg-white/5">
        <div class="px-4 py-3 bg-white/10 border-b border-white/10 flex items-center justify-between">
            <div>
                <p class="font-semibold text-white">${oral}</p>
                <p class="text-sm text-indigo-200">${getDebateTranslation('oral.desc')}</p>
            </div>
            <span class="text-indigo-200" title="${getDebateTranslation('tooltips.oral') || ''}"><i class="fa-solid fa-circle-question"></i></span>
        </div>
        <div class="px-4 py-5 space-y-4">
            <textarea id="oral-text-input" rows="4" class="w-full bg-white/10 border border-white/20 rounded-lg p-3 text-sm text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 placeholder:text-indigo-200/60" placeholder="${getDebateTranslation('oral.placeholder')}"></textarea>
            <div class="flex flex-wrap gap-3">
                <button type="button" class="px-4 py-2 rounded-lg bg-pink-400 text-slate-900 font-semibold hover:bg-pink-300" data-debate-action="toggle-recording" data-target="oral" data-record-label="buttons.recordOral">${getDebateTranslation('oral.btnRecord')}</button>
            </div>
            ${waveformMarkup('oral')}
            ${progressMarkup('oral')}
            ${oralResultMarkup()}
        </div>
    </div>`;
}

function moduleHeader(titleKey, tooltipKey, targetId) {
    const tooltip = getDebateTranslation('tooltips.' + tooltipKey) || '';
    return `
    <button type="button" class="w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-white bg-white/10 hover:bg-white/20 transition-colors" data-debate-action="toggle" data-debate-target="${targetId}" aria-expanded="false">
        <div class="flex items-center gap-3 flex-wrap">
            <span>${getDebateTranslation(titleKey)}</span>
            <span class="badge-chip timer">${getDebateTranslation('badges.timer')}</span>
            <span class="badge-chip record">${getDebateTranslation('badges.record')}</span>
        </div>
        <div class="flex items-center gap-3">
            <span class="text-indigo-200" title="${tooltip}"><i class="fa-solid fa-circle-question"></i></span>
            <span data-chevron class="transition-transform duration-200"><i class="fa-solid fa-chevron-down"></i></span>
        </div>
    </button>`;
}

function recordingControls(moduleKey, recordLabelKey) {
    const config = debateModuleConfigs[moduleKey] || { duration: 60, hasTimer: true };
    const timerSection = config.hasTimer ? `
        <span class="text-sm uppercase tracking-wide text-indigo-200">${getDebateTranslation('timerLabel')}</span>
        <span class="text-3xl font-mono text-white" data-timer-display="${moduleKey}">${config.duration}</span>` : '';
    const startLabel = getDebateTranslation('buttons.startTimer') || getDebateTranslation('startTimer');
    const resetLabel = getDebateTranslation('resetTimer');
    const recordLabel = getDebateTranslation(recordLabelKey) || getDebateTranslation('buttons.recordStart');
    return `
    <div class="flex flex-wrap items-center gap-3">
        ${timerSection}
        <div class="flex flex-wrap gap-2">
            ${config.hasTimer ? `<button type="button" class="px-3 py-1 rounded-lg bg-yellow-400 text-slate-900 text-sm font-semibold hover:bg-yellow-300" data-debate-action="start-timer" data-timer="${moduleKey}">${startLabel}</button>` : ''}
            <button type="button" class="px-3 py-1 rounded-lg bg-rose-500/80 text-white text-sm font-semibold hover:bg-rose-400" data-debate-action="toggle-recording" data-target="${moduleKey}" data-record-label="${recordLabelKey}">${recordLabel}</button>
            ${config.hasTimer ? `<button type="button" class="px-3 py-1 rounded-lg bg-slate-700 text-sm hover:bg-slate-600" data-debate-action="reset-timer" data-timer="${moduleKey}">${resetLabel}</button>` : ''}
        </div>
    </div>`;
}

function waveformMarkup(moduleKey) {
    return `
    <div class="waveform-bar hidden" data-waveform="${moduleKey}">
        <span></span><span></span><span></span><span></span>
    </div>`;
}

function progressMarkup(moduleKey) {
    const steps = RECORDING_STEPS.map(step => `<span class="progress-step" data-progress-step="${moduleKey}" data-step="${step}">${getDebateTranslation('statuses.' + step)}</span>`).join('');
    return `
    <div class="hidden space-y-2" data-progress="${moduleKey}">
        <p class="text-xs uppercase tracking-wide text-indigo-200">${getDebateTranslation('progressLabel')}</p>
        <div class="progress-steps">
            ${steps}
        </div>
    </div>`;
}

function caseResultMarkup() {
    return `
    <div class="hidden result-panel-grid" data-result="case">
        <div class="result-panel">
            <h5>${getDebateTranslation('panels.logic')}</h5>
            <div class="text-sm text-indigo-100 space-y-2" data-case-logic></div>
        </div>
        <div class="result-panel">
            <h5>${getDebateTranslation('panels.delivery')}</h5>
            <ul class="text-sm text-indigo-100 space-y-1" data-case-delivery></ul>
        </div>
        <div class="result-panel">
            <h5>${getDebateTranslation('panels.rewrite')}</h5>
            <p class="text-sm text-indigo-100" data-case-rewrite></p>
        </div>
    </div>
    ${resultPlaceholderMarkup('case')}`;
}

function rebuttalResultMarkup() {
    return `
    <div class="hidden result-panel-grid" data-result="rebuttal">
        <div class="result-panel">
            <h5>${getDebateTranslation('rebuttalResult.effectiveness')}</h5>
            <p class="text-sm text-indigo-100" data-rebuttal-effectiveness></p>
        </div>
        <div class="result-panel">
            <h5>${getDebateTranslation('rebuttalResult.directness')}</h5>
            <p class="text-3xl font-mono text-white" data-rebuttal-directness>0%</p>
        </div>
        <div class="result-panel">
            <h5>${getDebateTranslation('rebuttalResult.weighing')}</h5>
            <p class="text-sm text-indigo-100" data-rebuttal-weighing></p>
        </div>
    </div>
    ${resultPlaceholderMarkup('rebuttal')}`;
}

function crossfireResultMarkup() {
    return `
    <div class="hidden result-panel-grid" data-result="crossfire">
        <div class="result-panel">
            <h5>${getDebateTranslation('crossfireResult.directness')}</h5>
            <p class="text-sm text-indigo-100" data-crossfire-direct></p>
        </div>
        <div class="result-panel">
            <h5>${getDebateTranslation('crossfireResult.followup')}</h5>
            <ul class="text-sm text-indigo-100 space-y-1" data-crossfire-followup></ul>
        </div>
        <div class="result-panel">
            <h5>${getDebateTranslation('crossfireResult.language')}</h5>
            <ul class="text-sm text-indigo-100 space-y-1" data-crossfire-language></ul>
        </div>
    </div>
    ${resultPlaceholderMarkup('crossfire')}`;
}

function feedbackResultMarkup() {
    return `
    <div class="hidden space-y-4" data-result="feedback">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3" data-feedback-scores></div>
        <div class="result-panel-grid">
            <div class="result-panel">
                <h5>${getDebateTranslation('panels.delivery')}</h5>
                <ul class="text-sm text-indigo-100 space-y-1" data-feedback-delivery></ul>
            </div>
            <div class="result-panel">
                <h5>${getDebateTranslation('panels.rewrite')}</h5>
                <p class="text-sm text-indigo-100" data-feedback-summary></p>
            </div>
        </div>
    </div>
    ${resultPlaceholderMarkup('feedback')}`;
}

function oralResultMarkup() {
    return `
    <div class="hidden result-panel-grid" data-result="oral">
        <div class="result-panel">
            <h5>${getDebateTranslation('oral.resultPronunciation')}</h5>
            <ul class="text-sm text-indigo-100 space-y-1" data-oral-pronunciation></ul>
        </div>
        <div class="result-panel">
            <h5>${getDebateTranslation('oral.resultPacing')}</h5>
            <ul class="text-sm text-indigo-100 space-y-1" data-oral-pacing></ul>
        </div>
    </div>
    ${resultPlaceholderMarkup('oral')}`;
}

function resultPlaceholderMarkup(moduleKey) {
    return `<p class="text-sm text-indigo-300" data-result-placeholder="${moduleKey}">${getDebateTranslation('resultPlaceholder')}</p>`;
}

function getModuleConfig(moduleKey) {
    return debateModuleConfigs[moduleKey] || { duration: 60, hasTimer: true };
}

function ensureTimerState(moduleKey) {
    if (!debateState.timers[moduleKey]) {
        debateState.timers[moduleKey] = { remaining: getModuleConfig(moduleKey).duration, interval: null };
    }
    return debateState.timers[moduleKey];
}

function resetModuleTimer(moduleKey) {
    const state = ensureTimerState(moduleKey);
    stopModuleTimer(moduleKey);
    state.remaining = getModuleConfig(moduleKey).duration;
    updateModuleTimerDisplay(moduleKey);
}

function startModuleTimer(moduleKey) {
    const config = getModuleConfig(moduleKey);
    if (!config.hasTimer) return;
    const state = ensureTimerState(moduleKey);
    stopModuleTimer(moduleKey);
    updateModuleTimerDisplay(moduleKey);
    state.interval = setInterval(() => {
        state.remaining -= 1;
        updateModuleTimerDisplay(moduleKey);
        if (state.remaining <= 0) {
            stopModuleTimer(moduleKey);
            state.remaining = 0;
            updateModuleTimerDisplay(moduleKey);
            handleTimerComplete(moduleKey);
        }
    }, 1000);
}

function stopModuleTimer(moduleKey) {
    const state = debateState.timers[moduleKey];
    if (state?.interval) {
        clearInterval(state.interval);
        state.interval = null;
    }
}

function updateModuleTimerDisplay(moduleKey) {
    const displayEl = debateModulesContainer?.querySelector(`[data-timer-display="${moduleKey}"]`);
    if (!displayEl) return;
    const state = ensureTimerState(moduleKey);
    displayEl.textContent = Math.max(0, state.remaining).toString().padStart(2, '0');
    displayEl.classList.toggle('timer-flash', state.remaining <= 10);
}

function handleTimerComplete(moduleKey) {
    const recording = debateState.recording[moduleKey];
    if (recording?.status === 'recording') {
        completeRecordingSession(moduleKey);
    }
}

function getRecordingButton(moduleKey) {
    return debateModulesContainer?.querySelector(`[data-debate-action="toggle-recording"][data-target="${moduleKey}"]`);
}

function setRecordingButtonState(button, isRecording) {
    if (!button) return;
    const labelKey = button.dataset.recordLabel || 'buttons.recordStart';
    const startLabel = getDebateTranslation(labelKey) || button.textContent;
    button.textContent = isRecording ? (getDebateTranslation('buttons.stopRecording') || 'Stop Recording') : startLabel;
}

function setWaveformVisible(moduleKey, show) {
    const waveform = debateModulesContainer?.querySelector(`[data-waveform="${moduleKey}"]`);
    if (!waveform) return;
    waveform.classList.toggle('hidden', !show);
}

function showProgress(moduleKey, show) {
    const progress = debateModulesContainer?.querySelector(`[data-progress="${moduleKey}"]`);
    if (!progress) return;
    progress.classList.toggle('hidden', !show);
    if (!show) {
        progress.querySelectorAll('.progress-step').forEach(step => step.classList.remove('active'));
    }
}

function setProgressStep(moduleKey, step) {
    debateModulesContainer?.querySelectorAll(`[data-progress-step="${moduleKey}"]`)?.forEach(el => {
        el.classList.toggle('active', el.dataset.step === step);
    });
}

function toggleRecording(moduleKey) {
    const state = debateState.recording[moduleKey] || { status: 'idle' };
    if (state.status === 'processing') return;
    if (state.status === 'recording') {
        completeRecordingSession(moduleKey);
    } else {
        startRecordingSession(moduleKey);
    }
}

function startRecordingSession(moduleKey) {
    debateState.recording[moduleKey] = { status: 'recording' };
    debateMockApi.startRecording(moduleKey);
    setRecordingButtonState(getRecordingButton(moduleKey), true);
    setWaveformVisible(moduleKey, true);
    const config = getModuleConfig(moduleKey);
    if (config.hasTimer) {
        resetModuleTimer(moduleKey);
        startModuleTimer(moduleKey);
    }
    const placeholder = debateModulesContainer?.querySelector(`[data-result-placeholder="${moduleKey}"]`);
    if (placeholder) placeholder.classList.remove('hidden');
    const resultPanel = debateModulesContainer?.querySelector(`[data-result="${moduleKey}"]`);
    if (resultPanel) resultPanel.classList.add('hidden');
}

function completeRecordingSession(moduleKey) {
    const state = debateState.recording[moduleKey];
    if (!state || state.status !== 'recording') return;
    debateState.recording[moduleKey] = { status: 'processing' };
    debateMockApi.stopRecording(moduleKey);
    stopModuleTimer(moduleKey);
    setWaveformVisible(moduleKey, false);
    showProgress(moduleKey, true);
    runMockPipeline(moduleKey);
}

function runMockPipeline(moduleKey) {
    let index = 0;
    const advance = () => {
        if (index >= RECORDING_STEPS.length) {
            finalizeRecording(moduleKey);
            return;
        }
        const step = RECORDING_STEPS[index++];
        setProgressStep(moduleKey, step);
        setTimeout(advance, 600);
    };
    advance();
}

function finalizeRecording(moduleKey) {
    const renderer = debateModuleConfigs[moduleKey]?.resultRenderer;
    const mockResult = buildMockResult(moduleKey);
    if (typeof renderer === 'function') renderer(mockResult);
    showProgress(moduleKey, false);
    setRecordingButtonState(getRecordingButton(moduleKey), false);
    debateState.recording[moduleKey] = { status: 'idle' };
}

function buildMockResult(moduleKey) {
    const transcriptPool = [
        'Students deserve rest so evenings can spark curiosity again.',
        'Limiting homework boosts emotional health and deepens family connection.',
        'Great debate speeches balance logic, impact, and pacing.'
    ];
    const transcript = transcriptPool[Math.floor(Math.random() * transcriptPool.length)];
    const deliveryEval = debateMockApi.evaluateDelivery({ transcript });
    const delivery = {
        wpm: deliveryEval.wpm,
        fillers: deliveryEval.fillerWords || [],
        pauses: deliveryEval.pauseStats?.longPauses ?? 0
    };
    if (moduleKey === 'case') {
        const logicEval = debateMockApi.evaluateLogic({ structuredText: transcript });
        return {
            logic: {
                peelMissing: logicEval.peelMissing || [],
                suggestions: logicEval.suggestions || []
            },
            delivery,
            rewrite: 'Even if homework seems productive, the marginal gains vanish once kids are exhausted. Let class time drill depth; give evenings back for rest, curiosity, and conversations that build empathy.'
        };
    }
    if (moduleKey === 'rebuttal') {
        return {
            effectiveness: 'You targeted the premise but can tighten the weighing between wellbeing and rigor.',
            directness: 60 + Math.floor(Math.random() * 35),
            weighing: 'Even if practice packets sound efficient, our side still wins because rested minds absorb more per minute.'
        };
    }
    if (moduleKey === 'crossfire') {
        const check = debateMockApi.crossfireAnswerCheck({ answer: transcript });
        return {
            directness: check.directness,
            followups: [
                'If homework builds grit, how do you measure that without ignoring mental health?',
                'What evidence shows your plan protects low-income students with less support at home?'
            ],
            languageIssues: ['Answer drifted into new arguments', 'No clear conclusion sentence']
        };
    }
    if (moduleKey === 'feedback') {
        return {
            scores: [
                { label: getDebateTranslation('rubric.content'), value: 8 },
                { label: getDebateTranslation('rubric.refutation'), value: 7 },
                { label: getDebateTranslation('rubric.delivery'), value: 7 },
                { label: getDebateTranslation('rubric.strategy'), value: 6 }
            ],
            delivery,
            summary: 'Strengthen the opening hook and spend two lines proving why your weighing framework matters.',
            referenceScript: 'This house would reduce homework so students regain rest, creativity, and real conversations at home. First, chronic fatigue destroys curiosity...'
        };
    }
    if (moduleKey === 'oral') {
        const oralEval = debateMockApi.oralReadingCoach({ text: transcript });
        return {
            pronunciation: oralEval.mispronunciations || [],
            pacing: oralEval.pacingAdvice || []
        };
    }
    return { delivery };
}

function renderCaseResults(result) {
    const container = debateModulesContainer?.querySelector('[data-result="case"]');
    if (!container) return;
    container.classList.remove('hidden');
    const logicEl = container.querySelector('[data-case-logic]');
    const deliveryEl = container.querySelector('[data-case-delivery]');
    const rewriteEl = container.querySelector('[data-case-rewrite]');
    if (logicEl) {
        const missing = result.logic.peelMissing.length ? `<p class="text-sm text-amber-200">${result.logic.peelMissing.join(', ')}</p>` : '';
        const tips = result.logic.suggestions.map(tip => `<li>${tip}</li>`).join('');
        logicEl.innerHTML = `${missing}${tips ? `<ul class="list-disc list-inside space-y-1">${tips}</ul>` : ''}`;
    }
    if (deliveryEl) {
        const metrics = [
            `${getDebateTranslation('metrics.wpm')}: ${result.delivery.wpm}`,
            `${getDebateTranslation('metrics.fillers')}: ${result.delivery.fillers.map(f => `${f.word}(${f.count})`).join(', ') || '0'}`,
            `${getDebateTranslation('metrics.pauses')}: ${result.delivery.pauses}`
        ];
        deliveryEl.innerHTML = metrics.map(item => `<li>${item}</li>`).join('');
    }
    if (rewriteEl) {
        rewriteEl.textContent = result.rewrite;
    }
    const placeholder = debateModulesContainer?.querySelector('[data-result-placeholder="case"]');
    if (placeholder) placeholder.classList.add('hidden');
}

function renderRebuttalResults(result) {
    const container = debateModulesContainer?.querySelector('[data-result="rebuttal"]');
    if (!container) return;
    container.classList.remove('hidden');
    const effEl = container.querySelector('[data-rebuttal-effectiveness]');
    if (effEl) effEl.textContent = result.effectiveness;
    const directEl = container.querySelector('[data-rebuttal-directness]');
    if (directEl) directEl.textContent = `${result.directness}%`;
    const weighEl = container.querySelector('[data-rebuttal-weighing]');
    if (weighEl) weighEl.textContent = result.weighing;
    const placeholder = debateModulesContainer?.querySelector('[data-result-placeholder="rebuttal"]');
    if (placeholder) placeholder.classList.add('hidden');
}

function renderCrossfireResults(result) {
    const container = debateModulesContainer?.querySelector('[data-result="crossfire"]');
    if (!container) return;
    container.classList.remove('hidden');
    const directEl = container.querySelector('[data-crossfire-direct]');
    if (directEl) directEl.textContent = result.directness ? 'âœ… Direct answer' : 'âš ï¸ Needs tighter answer';
    const followEl = container.querySelector('[data-crossfire-followup]');
    if (followEl) followEl.innerHTML = result.followups.map(item => `<li>${item}</li>`).join('');
    const langEl = container.querySelector('[data-crossfire-language]');
    if (langEl) langEl.innerHTML = result.languageIssues.map(item => `<li>${item}</li>`).join('');
    const placeholder = debateModulesContainer?.querySelector('[data-result-placeholder="crossfire"]');
    if (placeholder) placeholder.classList.add('hidden');
}

function renderFeedbackResults(result) {
    const container = debateModulesContainer?.querySelector('[data-result="feedback"]');
    if (!container) return;
    container.classList.remove('hidden');
    const scoresEl = container.querySelector('[data-feedback-scores]');
    if (scoresEl) {
        scoresEl.innerHTML = result.scores.map(score => `
        <div class="bg-white/10 rounded-lg p-2 text-center">
            <p class="text-xs uppercase tracking-wide text-indigo-200">${score.label}</p>
            <p class="text-2xl font-semibold text-white">${score.value}/10</p>
        </div>`).join('');
    }
    const deliveryEl = container.querySelector('[data-feedback-delivery]');
    if (deliveryEl) {
        deliveryEl.innerHTML = [
        `${getDebateTranslation('metrics.wpm')}: ${result.delivery.wpm}`,
        `${getDebateTranslation('metrics.fillers')}: ${result.delivery.fillers.map(f => `${f.word}(${f.count})`).join(', ') || '0'}`,
        `${getDebateTranslation('metrics.pauses')}: ${result.delivery.pauses}`
        ].map(item => `<li>${item}</li>`).join('');
    }
    const summaryEl = container.querySelector('[data-feedback-summary]');
    if (summaryEl) summaryEl.textContent = result.summary;
    const placeholder = debateModulesContainer?.querySelector('[data-result-placeholder="feedback"]');
    if (placeholder) placeholder.classList.add('hidden');
    const reference = document.getElementById('debate-reference-script');
    if (reference) {
        const scriptEl = reference.querySelector('[data-reference-script]');
        if (scriptEl) scriptEl.textContent = result.referenceScript;
    }
}

function renderOralResults(result) {
    const container = debateModulesContainer?.querySelector('[data-result="oral"]');
    if (!container) return;
    container.classList.remove('hidden');
    const pronEl = container.querySelector('[data-oral-pronunciation]');
    if (pronEl) pronEl.innerHTML = result.pronunciation.map(item => `<li>${item}</li>`).join('');
    const pacingEl = container.querySelector('[data-oral-pacing]');
    if (pacingEl) pacingEl.innerHTML = result.pacing.map(item => `<li>${item}</li>`).join('');
    const placeholder = debateModulesContainer?.querySelector('[data-result-placeholder="oral"]');
    if (placeholder) placeholder.classList.add('hidden');
}

function handleFeedbackTextEvaluation() {
    debateState.recording.feedback = { status: 'processing' };
    showProgress('feedback', true);
    runMockPipeline('feedback');
}

function toggleReferenceScript() {
    const panel = document.getElementById('debate-reference-script');
    if (!panel) return;
    panel.classList.toggle('hidden');
}

function updateMotionDisplay() {
    const motion = getCurrentMotion();
    const primary = document.querySelector('[data-motion-primary]');
    const secondary = document.querySelector('[data-motion-secondary]');
    if (!motion || !primary) return;
    const translation = debateMockApi.translateMotion({
        motionText: getLocalizedText(motion.title),
        fromLang: currentLang,
        to: 'en'
    });
    primary.textContent = translation.zh_text || getLocalizedText(motion.title);
    if (secondary) {
        secondary.textContent = translation.en_text || motion.title?.en || '';
        secondary.classList.toggle('hidden', !debateState.showBilingualMotion || !motion.title?.en);
    }
    const toggleBtn = document.getElementById('debate-toggle-bilingual');
    if (toggleBtn) {
        toggleBtn.classList.toggle('bg-white/30', debateState.showBilingualMotion);
    }
}

function toggleMotionLanguage() {
    debateState.showBilingualMotion = !debateState.showBilingualMotion;
    updateMotionDisplay();
}

function updateCrossfireSelections() {
    const container = debateModulesContainer?.querySelector('#debate-module-crossfire');
    if (!container) return;
    let order = 1;
    container.querySelectorAll('label').forEach(label => {
        const badge = label.querySelector('[data-selection-badge]');
        const input = label.querySelector('input[type="checkbox"]');
        if (!badge || !input) return;
        if (input.checked && order <= 3) {
            badge.textContent = `#${order++}`;
            badge.classList.remove('hidden');
        } else {
            badge.classList.add('hidden');
        }
    });
}

document.addEventListener('click', (event) => {
    const downloadBtn = event.target.closest('.download-audio-btn');
    if (downloadBtn) {
        event.preventDefault();
        triggerAudioDownload(downloadBtn);
    }
});

    function handleDebateOptionChange(event) {
        const { id, value } = event.target;
        if (id === 'debate-motion') {
            debateState.motionId = value;
            syncCustomMotionUI();
            if (value === 'custom' && debateCustomMotionInput) {
                requestAnimationFrame(() => debateCustomMotionInput.focus());
            }
        } else if (id === 'debate-side') {
            debateState.side = value;
        } else if (id === 'debate-level') {
            debateState.level = value;
        }
        renderDebateModules();
    }

    function handleDebateClick(event) {
        const actionEl = event.target.closest('[data-debate-action]');
        if (!actionEl) return;
        const action = actionEl.dataset.debateAction;
        if (action === 'toggle') {
            const targetId = actionEl.dataset.debateTarget;
            const body = targetId ? debateModulesContainer.querySelector(`#${targetId}`) : null;
            const chevron = actionEl.querySelector('[data-chevron]');
            if (body) {
                const willOpen = body.classList.contains('hidden');
                body.classList.toggle('hidden');
                actionEl.setAttribute('aria-expanded', String(willOpen));
                if (chevron) {
                    chevron.classList.toggle('rotate-180', willOpen);
                }
            }
            return;
        }
        if (action === 'start-timer') {
            const target = actionEl.dataset.timer;
            if (target) startModuleTimer(target);
            return;
        }
        if (action === 'reset-timer') {
            const target = actionEl.dataset.timer;
            if (target) resetModuleTimer(target);
            return;
        }
        if (action === 'toggle-recording') {
            const target = actionEl.dataset.target;
            if (target) toggleRecording(target);
            return;
        }
        if (action === 'feedback-text-eval') {
            handleFeedbackTextEvaluation();
            return;
        }
        if (action === 'toggle-reference') {
            toggleReferenceScript();
            return;
        }
    }

    function handleDebateCheckboxLimit(event) {
        const target = event.target;
        if (target?.id === 'debate-feedback-audio' && target.files?.length) {
            handleFeedbackTextEvaluation();
            target.value = '';
            return;
        }
        if (!(target instanceof HTMLInputElement) || target.type !== 'checkbox') return;
        if (target.closest('#debate-module-crossfire')) {
            const checked = debateModulesContainer.querySelectorAll('#debate-module-crossfire input[type="checkbox"]:checked');
            if (checked.length > 3) {
                target.checked = false;
            }
            updateCrossfireSelections();
        }
    }
        
        function setupFileHandling(dropZoneEl, inputEl, previewImgEl, placeholderEl, fileNameDisplayEl, buttonToEnable, fileStateSetter, options = {}) {
            const {
                multiple = false,
                maxFiles = 1,
                acceptPrefix = null,
                onFilesProcessed = null
            } = options;

            if (inputEl && multiple) {
                inputEl.multiple = true;
            }

            const clearPreview = () => {
                if (previewImgEl) {
                    previewImgEl.src = '';
                    previewImgEl.classList.add('hidden');
                }
                if (placeholderEl) placeholderEl.classList.remove('hidden');
                if (fileNameDisplayEl) {
                    const keyPath = fileNameDisplayEl.dataset.translateKey;
                    if (keyPath) {
                        const keys = keyPath.split('.');
                        let translation = translations[currentLang];
                        for (const k of keys) {
                            translation = translation?.[k];
                        }
                        fileNameDisplayEl.textContent = typeof translation === 'string' ? translation : '';
                    } else {
                        fileNameDisplayEl.textContent = '';
                    }
                }
                if (buttonToEnable) buttonToEnable.disabled = true;
            };

            const filterFiles = (fileList) => {
                const files = Array.from(fileList || []);
                if (!acceptPrefix) return files;
                return files.filter(file => file.type && file.type.startsWith(acceptPrefix));
            };

            const processSingleFile = (file) => {
                const processed = handleFileSelection(file, previewImgEl, placeholderEl, fileNameDisplayEl, buttonToEnable);
                fileStateSetter(processed);
                if (onFilesProcessed) onFilesProcessed(processed ? [processed] : []);
            };

            const processMultipleFiles = (fileList) => {
                const filtered = filterFiles(fileList);
                if (!filtered.length) {
                    fileStateSetter([]);
                    clearPreview();
                    if (onFilesProcessed) onFilesProcessed([]);
                    return;
                }
                const limited = filtered.slice(0, maxFiles);
                if (previewImgEl) {
                    const firstFile = limited[0];
                    if (firstFile && firstFile.type && firstFile.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            previewImgEl.src = event.target.result;
                            previewImgEl.classList.remove('hidden');
                        };
                        reader.readAsDataURL(firstFile);
                        if (placeholderEl) placeholderEl.classList.add('hidden');
                    } else {
                        previewImgEl.src = '';
                        previewImgEl.classList.add('hidden');
                        if (placeholderEl) placeholderEl.classList.remove('hidden');
                    }
                } else if (placeholderEl) {
                    placeholderEl.classList.add('hidden');
                }
                if (fileNameDisplayEl) fileNameDisplayEl.textContent = limited.map(file => file.name).join(', ');
                if (buttonToEnable) buttonToEnable.disabled = false;
                fileStateSetter(limited);
                if (onFilesProcessed) onFilesProcessed(limited);
            };

            const handleFiles = (fileList) => {
                if (multiple) {
                    processMultipleFiles(fileList);
                } else {
                    const filtered = filterFiles(fileList);
                    const file = filtered.length ? filtered[0] : null;
                    if (file) {
                        processSingleFile(file);
                    } else {
                        fileStateSetter(null);
                        clearPreview();
                        if (onFilesProcessed) onFilesProcessed([]);
                    }
                }
            };

            if (!dropZoneEl) return;

            dropZoneEl.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZoneEl.classList.add('dragover');
            });
            dropZoneEl.addEventListener('dragleave', () => dropZoneEl.classList.remove('dragover'));
            dropZoneEl.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZoneEl.classList.remove('dragover');
                if (e.dataTransfer && e.dataTransfer.files) {
                    handleFiles(e.dataTransfer.files);
                }
            });

            if (inputEl) {
                dropZoneEl.addEventListener('click', () => inputEl.click());
                inputEl.addEventListener('change', () => {
                    handleFiles(inputEl.files);
                });
            }
        }
        
        function checkChatButtonStatus(inputEl, expertGroup, buttonEl) {
            const text = inputEl.value.trim();
            const expertSelected = expertGroup.querySelector('.expert-card.selected');
            buttonEl.disabled = !(text && expertSelected);
        }

        async function handleLessonEvents(e) {
            const langTabBtn = e.target.closest('.lesson-lang-btn');
            if (langTabBtn) {
                const lang = langTabBtn.dataset.lang;
                document.getElementById('lesson-explanation').textContent = currentLesson.explanation[lang];
                // Update vocabulary and phrases based on new lang
                const vocabList = document.getElementById('vocabulary-list');
                const phrasesList = document.getElementById('phrases-list');
                if (vocabList) vocabList.innerHTML = createVocabularyHtmlForLang(lang);
                if (phrasesList) phrasesList.innerHTML = createPhrasesHtmlForLang(lang);
                // Update active tab
                lessonContainer.querySelectorAll('.lesson-lang-btn').forEach(btn => btn.classList.remove('active'));
                langTabBtn.classList.add('active');
                return;
            }

            const genAudioBtn = e.target.closest('.generate-explanation-audio-btn');
            if (genAudioBtn) {
                const lang = genAudioBtn.dataset.lang;
                const voiceType = genAudioBtn.dataset.voice || 'default';
                const text = currentLesson.explanation[lang];
                if (!text) return;
                
                errorMessage.classList.add('hidden'); // Clear previous errors
                setLoading(genAudioBtn, true);
                try {
                    const speechProfile = getLessonSpeechProfile(lang);
                    let audioBlob;
                    if (voiceType === 'dialogue') {
                        audioBlob = await generateDialogueAudio(text, lang);
                    } else {
                        const voiceName = voiceProfiles[voiceType] || voiceProfiles.default;
                        audioBlob = await callTTSAPI(text, null, { speechProfile, voiceName });
                    }
                    const blobKey = `${lang}-${voiceType}`;
                    explanationAudioBlobs[blobKey] = audioBlob;
                    
                    const playerContainer = document.getElementById(`audio-player-${lang}-${voiceType}`);
                    const audioEl = playerContainer.querySelector('audio');
                    const downloadLink = playerContainer.querySelector('.download-link');
                    
                    const audioUrl = URL.createObjectURL(audioBlob);
                    audioEl.src = audioUrl;
                    applyPlaybackRate(audioEl, speechProfile);
                    downloadLink.href = audioUrl;
                    let downloadSuffix = '';
                    if (voiceType !== 'default') {
                        downloadSuffix = voiceType === 'dialogue' ? '-dialogue' : `-${voiceType}`;
                    }
                    downloadLink.download = `explanation-${lang}${downloadSuffix}.wav`;
                    
                    playerContainer.classList.remove('hidden');
                    playerContainer.classList.add('flex');
                } catch (error) {
                    console.error("Explanation Audio Error:", error);
                    displayError(errorMessage, `Audio generation for ${lang} failed: ${error.message}`);
                } finally {
                    setLoading(genAudioBtn, false);
                }
                return;
            }
            
            const playBtn = e.target.closest('.play-audio-btn');
            if (playBtn) {
                playAudio(e);
            }
        }

        function handleFollowUpClick(e, isDoctor) {
            const suggestedBtn = e.target.closest('.suggested-question-btn');
            if (suggestedBtn) {
                getAdviceOrDiagnosis(isDoctor, suggestedBtn.textContent);
                return;
            }

            const sendBtn = e.target.closest('.send-follow-up-btn');
            if (sendBtn) {
                const input = sendBtn.previousElementSibling;
                if (input && input.value.trim()) {
                    getAdviceOrDiagnosis(isDoctor, input.value.trim());
                }
                return;
            }
        }

        // --- My Learning Tab Switching ---
        function switchMyLearningTab(tabName) {
            // Hide all tabs
            document.getElementById('my-learning-lessons-tab').classList.add('hidden');
            document.getElementById('my-learning-stories-tab').classList.add('hidden');
            document.getElementById('my-learning-tutoring-tab').classList.add('hidden');
            document.getElementById('my-learning-favorites-tab').classList.add('hidden');
            
            // Remove active state from all tab buttons
            document.querySelectorAll('[id^="my-learning-tab-"]').forEach(btn => {
                btn.classList.remove('border-yellow-400', 'text-yellow-400');
                btn.classList.add('border-transparent');
            });
            
            // Show selected tab
            const tabMap = {
                'lessons': 'my-learning-lessons-tab',
                'stories': 'my-learning-stories-tab',
                'tutoring': 'my-learning-tutoring-tab',
                'favorites': 'my-learning-favorites-tab'
            };
            
            const tabButtonMap = {
                'lessons': 'my-learning-tab-lessons',
                'stories': 'my-learning-tab-stories',
                'tutoring': 'my-learning-tab-tutoring',
                'favorites': 'my-learning-tab-favorites'
            };
            
            document.getElementById(tabMap[tabName])?.classList.remove('hidden');
            const activeBtn = document.getElementById(tabButtonMap[tabName]);
            if (activeBtn) {
                activeBtn.classList.add('border-yellow-400', 'text-yellow-400');
                activeBtn.classList.remove('border-transparent');
            }
            
            // Load data for the selected tab
            if (tabName === 'lessons') {
                loadLessonsHistory();
            } else if (tabName === 'stories') {
                loadStoriesHistory();
            } else if (tabName === 'tutoring') {
                loadTutoringHistory();
            } else if (tabName === 'favorites') {
                loadFavorites();
            }
        }
        
        // --- Initialization ---
        function init() {
            mainNav.addEventListener('click', handleNavClick);
            languageSwitcher.addEventListener('change', (e) => setLanguage(e.target.value));
            
            // My Learning tab switching
            document.getElementById('my-learning-tab-lessons')?.addEventListener('click', () => switchMyLearningTab('lessons'));
            document.getElementById('my-learning-tab-stories')?.addEventListener('click', () => switchMyLearningTab('stories'));
            document.getElementById('my-learning-tab-tutoring')?.addEventListener('click', () => switchMyLearningTab('tutoring'));
            document.getElementById('my-learning-tab-favorites')?.addEventListener('click', () => switchMyLearningTab('favorites'));
            
            // Admin tab switching
            const adminTabPending = document.getElementById('admin-tab-pending');
            const adminTabAuthorized = document.getElementById('admin-tab-authorized');
            const adminPendingTab = document.getElementById('admin-pending-tab');
            const adminAuthorizedTab = document.getElementById('admin-authorized-tab');
            const refreshPendingBtn = document.getElementById('refresh-pending-btn');
            const refreshAuthorizedBtn = document.getElementById('refresh-authorized-btn');
            
            adminTabPending?.addEventListener('click', () => {
                adminTabPending.classList.add('border-yellow-400', 'text-yellow-400');
                adminTabPending.classList.remove('border-transparent');
                adminTabAuthorized?.classList.remove('border-yellow-400', 'text-yellow-400');
                adminTabAuthorized?.classList.add('border-transparent');
                adminPendingTab?.classList.remove('hidden');
                adminAuthorizedTab?.classList.add('hidden');
            });
            
            adminTabAuthorized?.addEventListener('click', () => {
                adminTabAuthorized.classList.add('border-yellow-400', 'text-yellow-400');
                adminTabAuthorized.classList.remove('border-transparent');
                adminTabPending?.classList.remove('border-yellow-400', 'text-yellow-400');
                adminTabPending?.classList.add('border-transparent');
                adminAuthorizedTab?.classList.remove('hidden');
                adminPendingTab?.classList.add('hidden');
            });
            
            refreshPendingBtn?.addEventListener('click', async () => {
                const container = document.getElementById('pending-users-container');
                try {
                    container.innerHTML = '<div class="text-center text-indigo-200 py-8"><div class="loader mx-auto mb-2"></div><p>è¼‰å…¥ä¸­...</p></div>';
                    const result = await callAdminFunction('get_pending_users');
                    renderPendingUsers(result.users || []);
                } catch (error) {
                    container.innerHTML = `<div class="text-center text-red-300 py-8"><p>è¼‰å…¥å¤±æ•—: ${error.message}</p></div>`;
                }
            });
            
            refreshAuthorizedBtn?.addEventListener('click', async () => {
                const container = document.getElementById('authorized-users-container');
                try {
                    container.innerHTML = '<div class="text-center text-indigo-200 py-8"><div class="loader mx-auto mb-2"></div><p>è¼‰å…¥ä¸­...</p></div>';
                    const result = await callAdminFunction('get_authorized_users');
                    renderAuthorizedUsers(result.users || []);
                } catch (error) {
                    container.innerHTML = `<div class="text-center text-red-300 py-8"><p>è¼‰å…¥å¤±æ•—: ${error.message}</p></div>`;
                }
            });
            
            generateLessonBtn.addEventListener('click', generateLesson);
            subjectGroup.addEventListener('change', (e) => {
                if(e.target.name === 'subject') {
                    updateTopicSelection(e.target.value);
                    if (customTopicInput) customTopicInput.value = '';
                    updateCustomTopicUI();
                }
            });
            lessonContainer.addEventListener('click', handleLessonEvents);
            closeModalBtn.addEventListener('click', () => {
                imageModal.classList.add('hidden');
                imageModal.classList.remove('flex');
            });
            
            startUploadBtn.addEventListener('click', () => {
                tutoringInitialView.classList.add('hidden');
                tutoringUploadView.classList.remove('hidden');
                tutoringFiles = [];
                if (homeworkFileInput) homeworkFileInput.value = '';
                if (fileNameDisplay) fileNameDisplay.textContent = translations[currentLang]?.tutoring?.noFileSelected || translations['en']?.tutoring?.noFileSelected || 'No file selected';
                updateTutoringSummary(0);
                analyzeHomeworkBtn.disabled = true;
            });
            setupFileHandling(
                fileDropZone,
                homeworkFileInput,
                null,
                null,
                fileNameDisplay,
                analyzeHomeworkBtn,
                (files) => tutoringFiles = files,
                {
                    multiple: true,
                    maxFiles: 10,
                    acceptPrefix: null,
                    onFilesProcessed: (files) => {
                        updateTutoringSummary(files.length);
                        analyzeHomeworkBtn.disabled = files.length === 0;
                    }
                }
            );
            tutoringSubjectSelect.addEventListener('change', (e) => {
                 const otherValues = ['Other', 'å…¶ä»–', 'KhÃ¡c', 'ãã®ä»–'];
                 tutoringCustomSubjectWrapper.classList.toggle('hidden', !otherValues.includes(e.target.value));
            });
            analyzeHomeworkBtn.addEventListener('click', analyzeHomework);
            tutoringResultsView.addEventListener('click', (e) => playAudio(e)); // Event delegation for tutoring audio

            topicSelect.addEventListener('change', () => {
                updateCustomTopicUI();
                if (topicSelect.value !== '__custom__') {
                    if (customTopicInput && !customTopicInput.value.trim()) {
                        syncCustomTopicOptionLabel();
                    }
                } else if (customTopicInput) {
                    customTopicInput.focus();
                }
            });
            if (customTopicInput) {
                customTopicInput.addEventListener('input', () => {
                    if (topicSelect.value === '__custom__') {
                        syncCustomTopicOptionLabel();
                    }
                });
            }

            startStorybookBtn.addEventListener('click', () => {
                storybookInitialView.classList.add('hidden');
                storybookMainView.classList.remove('hidden');
                storybookFiles = [];
                if (storybookFileInput) storybookFileInput.value = '';
                if (storybookPreviewImg) {
                    storybookPreviewImg.src = '';
                    storybookPreviewImg.classList.add('hidden');
                }
                if (storybookUploadPlaceholder) storybookUploadPlaceholder.classList.remove('hidden');
                updateStorybookSummary(0);
                if (generateStoryBtn) generateStoryBtn.disabled = true;
            });
            setupFileHandling(
                storybookFileDropZone,
                storybookFileInput,
                storybookPreviewImg,
                storybookUploadPlaceholder,
                null,
                generateStoryBtn,
                (files) => storybookFiles = files,
                {
                    multiple: true,
                    maxFiles: 10,
                    acceptPrefix: 'image/',
                    onFilesProcessed: (files) => {
                        updateStorybookSummary(files.length);
                        generateStoryBtn.disabled = files.length === 0;
                    }
                }
            );
            generateStoryBtn.addEventListener('click', generateStory);
            playStoryBtn.addEventListener('click', () => {
                if (storyAudioUrl) new Audio(storyAudioUrl).play();
            });
            downloadAudioBtn.addEventListener('click', () => {
                if(storyAudioBlob) {
                    const url = URL.createObjectURL(storyAudioBlob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    a.download = 'story.wav';
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                }
            });

            aiTutorExpertGroup.addEventListener('click', (e) => {
                const card = e.target.closest('.expert-card');
                if (card) {
                    aiTutorExpertGroup.querySelectorAll('.expert-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    checkChatButtonStatus(aiTutorInput, aiTutorExpertGroup, getAdviceBtn);
                }
            });
            aiTutorInput.addEventListener('input', () => checkChatButtonStatus(aiTutorInput, aiTutorExpertGroup, getAdviceBtn));
            getAdviceBtn.addEventListener('click', () => getAdviceOrDiagnosis(false));
            aiTutorResponseContainer.addEventListener('click', (e) => handleFollowUpClick(e, false));
            
            setupFileHandling(
                aiDoctorFileDropZone,
                aiDoctorFileInput,
                aiDoctorPreviewImg,
                aiDoctorUploadPlaceholder,
                null,
                null,
                (files) => aiDoctorFiles = files,
                {
                    multiple: true,
                    maxFiles: 10,
                    acceptPrefix: 'image/',
                    onFilesProcessed: (files) => updateDoctorSummary(files.length)
                }
            );
            aiDoctorExpertGroup.addEventListener('click', (e) => {
                const card = e.target.closest('.expert-card');
                if (card) {
                    aiDoctorExpertGroup.querySelectorAll('.expert-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    checkChatButtonStatus(aiDoctorInput, aiDoctorExpertGroup, getDiagnosisBtn);
                }
            });
            aiDoctorInput.addEventListener('input', () => checkChatButtonStatus(aiDoctorInput, aiDoctorExpertGroup, getDiagnosisBtn));
            getDiagnosisBtn.addEventListener('click', () => getAdviceOrDiagnosis(true));
            aiDoctorResponseContainer.addEventListener('click', (e) => handleFollowUpClick(e, true));

            if (debateMotionSelect && debateSideSelect && debateLevelSelect) {
                debateMotionSelect.addEventListener('change', handleDebateOptionChange);
                debateSideSelect.addEventListener('change', handleDebateOptionChange);
                debateLevelSelect.addEventListener('change', handleDebateOptionChange);
            }
            if (debateModulesContainer) {
                debateModulesContainer.addEventListener('click', handleDebateClick);
                debateModulesContainer.addEventListener('change', handleDebateCheckboxLimit);
            }
            if (debateToggleBilingualBtn) {
                debateToggleBilingualBtn.addEventListener('click', toggleMotionLanguage);
            }
            if (debateCustomMotionInput) {
                debateCustomMotionInput.addEventListener('input', (e) => {
                    debateState.customMotionTitle = e.target.value;
                    if (debateState.motionId === 'custom') {
                        renderDebateModules();
                    }
                });
            }

            setLanguage(currentLang);
            switchView('platform-view');
        }

        init();
    });
    </script>
    </div> <!-- End of main-app -->
</body>
</html>
